(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16592,e=>{"use strict";var t=e.i(18050),a=e.i(71645),r=e.i(18566);let i=["USER_CREATED","USER_UPDATED","USER_DELETED","USER_ACTIVATED","USER_DEACTIVATED","USER_PASSWORD_RESET","USER_ROLE_CHANGED","ORGANIZATION_CREATED","ORGANIZATION_UPDATED","ORGANIZATION_DELETED","TENANT_CREATED","TENANT_UPDATED","TENANT_DELETED","TENANT_USER_ASSIGNED","TENANT_USER_UNASSIGNED","TICKET_CREATED","TICKET_UPDATED","TICKET_DELETED","TICKET_ASSIGNED","TICKET_STATUS_CHANGED","TICKET_PRIORITY_CHANGED","TICKET_COMMENT_ADDED","KB_ARTICLE_CREATED","KB_ARTICLE_UPDATED","KB_ARTICLE_DELETED","ASSET_CREATED","ASSET_UPDATED","ASSET_DELETED","ASSET_ASSIGNED","CHANGE_CREATED","CHANGE_UPDATED","CHANGE_DELETED","CHANGE_APPROVED","CHANGE_REJECTED","PERMISSION_GRANTED","PERMISSION_REVOKED"];function n(){let e=(0,r.useSearchParams)().get("organizationId"),[n,o]=(0,a.useState)(null),[s,l]=(0,a.useState)(!0),[d,E]=(0,a.useState)(!1),[c,T]=(0,a.useState)(""),[u,g]=(0,a.useState)("");(0,a.useEffect)(()=>{m()},[e]);let m=async()=>{try{let t=localStorage.getItem("accessToken"),a=new URLSearchParams;e&&a.append("organizationId",e);let r=await fetch(`/api/v1/organizations/audit/config?${a.toString()}`,{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw Error("Failed to fetch audit config");let i=await r.json();o(i)}catch(e){T(e.message)}finally{l(!1)}},A=async t=>{if(t.preventDefault(),n){E(!0),T(""),g("");try{let t=localStorage.getItem("accessToken"),a=await fetch("/api/v1/organizations/audit/config",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({organizationId:e||n.organizationId,enabled:n.enabled,events:n.events,retentionDays:n.retentionDays||null})}),r=await a.json();if(!a.ok)throw Error(r.error||"Failed to update audit config");g("Audit configuration updated successfully"),o(r)}catch(e){T(e.message)}finally{E(!1)}}};return s?(0,t.jsx)("div",{children:"Loading audit configuration..."}):n?(0,t.jsxs)("div",{style:{padding:"2rem",maxWidth:"1000px",margin:"0 auto"},children:[(0,t.jsx)("h1",{style:{marginBottom:"2rem"},children:"Audit Configuration"}),c&&(0,t.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--error)"},children:c}),u&&(0,t.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(34, 197, 94, 0.1)",border:"1px solid var(--success)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--success)"},children:u}),(0,t.jsx)("div",{className:"card",style:{padding:"2rem"},children:(0,t.jsxs)("form",{onSubmit:A,children:[(0,t.jsx)("div",{style:{marginBottom:"1.5rem"},children:(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,t.jsx)("input",{type:"checkbox",checked:n.enabled,onChange:e=>o({...n,enabled:e.target.checked}),disabled:d}),(0,t.jsx)("span",{children:"Enable Audit Logging"})]})}),(0,t.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,t.jsx)("label",{className:"label",htmlFor:"retentionDays",children:"Retention Days (leave empty for forever)"}),(0,t.jsx)("input",{id:"retentionDays",type:"number",className:"input",value:n.retentionDays||"",onChange:e=>o({...n,retentionDays:e.target.value?parseInt(e.target.value):void 0}),min:"1",disabled:d})]}),(0,t.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,t.jsx)("h3",{style:{marginBottom:"1rem"},children:"Events to Track"}),(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"0.5rem",maxHeight:"400px",overflowY:"auto",padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"0.5rem"},children:i.map(e=>(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,t.jsx)("input",{type:"checkbox",checked:n.events.includes(e),onChange:()=>(e=>{if(!n)return;let t=n.events.includes(e)?n.events.filter(t=>t!==e):[...n.events,e];o({...n,events:t})})(e),disabled:d||!n.enabled}),(0,t.jsx)("span",{style:{fontSize:"0.875rem"},children:e})]},e))})]}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:d,children:d?"Saving...":"Save Configuration"})]})})]}):(0,t.jsx)("div",{children:"Audit configuration not found"})}function o(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{children:"Loading audit configuration..."}),children:(0,t.jsx)(n,{})})}e.s(["default",()=>o])}]);