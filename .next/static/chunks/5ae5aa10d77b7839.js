(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,83579,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(18566);function o(){(0,r.useRouter)();let[e,o]=(0,t.useState)(null),[i,l]=(0,t.useState)(!0),[s,n]=(0,t.useState)(!1),[d,c]=(0,t.useState)(""),[g,m]=(0,t.useState)(""),[u,h]=(0,t.useState)(null),[p,y]=(0,t.useState)(null);(0,t.useEffect)(()=>{b()},[]);let b=async()=>{try{let e=localStorage.getItem("accessToken"),a=await fetch("/api/v1/organizations/me",{headers:{Authorization:`Bearer ${e}`}});if(!a.ok)throw Error("Failed to fetch organization");let t=await a.json();o(t.organization),t.organization?.logo&&y(t.organization.logo)}catch(e){c(e.message)}finally{l(!1)}},x=async()=>{if(u&&e){n(!0),c(""),m("");try{let a=localStorage.getItem("accessToken"),t=new FormData;t.append("file",u),t.append("organizationId",e.id);let r=await fetch("/api/v1/organizations/upload-logo",{method:"POST",headers:{Authorization:`Bearer ${a}`},body:t}),i=await r.json();if(!r.ok)throw Error(i.error||"Failed to upload logo");m("Logo uploaded successfully"),h(null),i.logoUrl&&(y(i.logoUrl),o({...e,logo:i.logoUrl}))}catch(e){c(e.message)}finally{n(!1)}}},j=async a=>{if(a.preventDefault(),e){n(!0),c(""),m("");try{let a=localStorage.getItem("accessToken"),t=await fetch(`/api/v1/global/organizations/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({name:e.name,description:e.description})}),r=await t.json();if(!t.ok)throw Error(r.error||"Failed to update organization");m("Organization updated successfully"),o(r)}catch(e){c(e.message)}finally{n(!1)}}};return i?(0,a.jsx)("div",{children:"Loading organization settings..."}):e?(0,a.jsxs)("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto"},children:[(0,a.jsx)("h1",{style:{marginBottom:"2rem"},children:"Organization Settings"}),d&&(0,a.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--error)"},children:d}),g&&(0,a.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(34, 197, 94, 0.1)",border:"1px solid var(--success)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--success)"},children:g}),(0,a.jsxs)("div",{className:"card",style:{padding:"2rem",marginBottom:"2rem"},children:[(0,a.jsx)("h2",{style:{marginBottom:"1.5rem"},children:"Logo"}),(0,a.jsxs)("div",{style:{display:"flex",gap:"1.5rem",alignItems:"flex-start"},children:[p&&(0,a.jsx)("img",{src:p,alt:"Organization logo",style:{width:"120px",height:"120px",objectFit:"contain",borderRadius:"0.5rem",border:"1px solid var(--border)"}}),(0,a.jsxs)("div",{style:{flex:1},children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let a=e.target.files?.[0];if(a){h(a);let e=new FileReader;e.onloadend=()=>{y(e.result)},e.readAsDataURL(a)}},style:{marginBottom:"1rem"},disabled:s}),u&&(0,a.jsx)("button",{type:"button",className:"btn btn-primary",onClick:x,disabled:s,children:s?"Uploading...":"Upload Logo"})]})]})]}),(0,a.jsxs)("div",{className:"card",style:{padding:"2rem"},children:[(0,a.jsx)("h2",{style:{marginBottom:"1.5rem"},children:"Organization Details"}),(0,a.jsxs)("form",{onSubmit:j,children:[(0,a.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,a.jsx)("label",{className:"label",htmlFor:"name",children:"Organization Name"}),(0,a.jsx)("input",{id:"name",type:"text",className:"input",value:e.name,onChange:a=>o({...e,name:a.target.value}),required:!0,disabled:s})]}),(0,a.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,a.jsx)("label",{className:"label",htmlFor:"slug",children:"Slug"}),(0,a.jsx)("input",{id:"slug",type:"text",className:"input",value:e.slug,disabled:!0,style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)"}}),(0,a.jsx)("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:"Slug cannot be changed after creation"})]}),(0,a.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,a.jsx)("label",{className:"label",htmlFor:"description",children:"Description"}),(0,a.jsx)("textarea",{id:"description",className:"input",value:e.description||"",onChange:a=>o({...e,description:a.target.value}),rows:4,disabled:s})]}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:s,children:s?"Saving...":"Save Changes"})]})]})]}):(0,a.jsx)("div",{children:"Organization not found"})}e.s(["default",()=>o])}]);