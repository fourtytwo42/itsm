(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1749,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(18566),l=e.i(22016);function s(){let e=(0,r.useRouter)(),[s,i]=(0,t.useState)(!1),[d,n]=(0,t.useState)(""),[o,c]=(0,t.useState)([]),[u,p]=(0,t.useState)(null),[m,h]=(0,t.useState)({}),[y,g]=(0,t.useState)({name:"",type:"HARDWARE",customAssetTypeId:"",category:"",manufacturer:"",model:"",serialNumber:"",status:"ACTIVE",location:"",building:"",floor:"",room:"",purchaseDate:"",purchasePrice:"",warrantyExpiry:""});(0,t.useEffect)(()=>{x()},[y.type]),(0,t.useEffect)(()=>{if(y.customAssetTypeId){let e=o.find(e=>e.id===y.customAssetTypeId);if(p(e||null),e){let a={};e.customFields.forEach(e=>{e.defaultValue&&(a[e.fieldName]=e.defaultValue)}),h(a)}}else p(null),h({})},[y.customAssetTypeId,o]);let x=async()=>{try{let e=localStorage.getItem("accessToken"),a=await fetch(`/api/v1/admin/asset-types?baseType=${y.type}`,{headers:e?{Authorization:`Bearer ${e}`}:{}}),t=await a.json();t.success&&c(t.data.assetTypes)}catch(e){}},v=async a=>{a.preventDefault(),n(""),i(!0);try{let a=localStorage.getItem("accessToken"),t=await fetch("/api/v1/assets",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({...y,customAssetTypeId:y.customAssetTypeId||void 0,purchaseDate:y.purchaseDate?new Date(y.purchaseDate).toISOString():void 0,purchasePrice:y.purchasePrice?parseFloat(y.purchasePrice):void 0,warrantyExpiry:y.warrantyExpiry?new Date(y.warrantyExpiry).toISOString():void 0,customFields:Object.keys(m).length>0?m:void 0})}),r=await t.json();r.success?e.push(`/assets/${r.data.asset.id}`):(n(r.error?.message||"Failed to create asset"),i(!1))}catch(e){n("An unexpected error occurred"),i(!1)}};return(0,a.jsxs)("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto"},children:[(0,a.jsx)("div",{style:{marginBottom:"2rem"},children:(0,a.jsx)(l.default,{href:"/assets",style:{color:"var(--accent-primary)",textDecoration:"none"},children:"â† Back to Assets"})}),(0,a.jsx)("h1",{style:{marginBottom:"2rem"},children:"Create New Asset"}),d&&(0,a.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--error)"},children:d}),(0,a.jsxs)("form",{onSubmit:v,style:{display:"grid",gap:"1.5rem"},children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:["Name ",(0,a.jsx)("span",{style:{color:"var(--error)"},children:"*"})]}),(0,a.jsx)("input",{type:"text",className:"input",value:y.name,onChange:e=>g({...y,name:e.target.value}),required:!0,disabled:s})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:["Base Type ",(0,a.jsx)("span",{style:{color:"var(--error)"},children:"*"})]}),(0,a.jsxs)("select",{className:"input",value:y.type,onChange:e=>{g({...y,type:e.target.value,customAssetTypeId:""}),p(null),h({})},required:!0,disabled:s,children:[(0,a.jsx)("option",{value:"HARDWARE",children:"Hardware"}),(0,a.jsx)("option",{value:"SOFTWARE",children:"Software"}),(0,a.jsx)("option",{value:"NETWORK_DEVICE",children:"Network Device"}),(0,a.jsx)("option",{value:"CLOUD_RESOURCE",children:"Cloud Resource"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Status"}),(0,a.jsxs)("select",{className:"input",value:y.status,onChange:e=>g({...y,status:e.target.value}),disabled:s,children:[(0,a.jsx)("option",{value:"ACTIVE",children:"Active"}),(0,a.jsx)("option",{value:"INACTIVE",children:"Inactive"}),(0,a.jsx)("option",{value:"RETIRED",children:"Retired"}),(0,a.jsx)("option",{value:"MAINTENANCE",children:"Maintenance"})]})]})]}),o.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Asset Type (Optional)"}),(0,a.jsxs)("select",{className:"input",value:y.customAssetTypeId,onChange:e=>g({...y,customAssetTypeId:e.target.value}),disabled:s,children:[(0,a.jsx)("option",{value:"",children:"None (Use base type only)"}),o.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),u&&u.customFields.length>0&&(0,a.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,a.jsxs)("h3",{style:{marginTop:0,marginBottom:"1rem"},children:["Custom Fields for ",u.name]}),(0,a.jsx)("div",{style:{display:"grid",gap:"1rem"},children:u.customFields.sort((e,a)=>e.order-a.order).map(e=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:[e.label,e.required&&(0,a.jsx)("span",{style:{color:"var(--error)"},children:" *"})]}),"text"===e.fieldType&&(0,a.jsx)("input",{type:"text",className:"input",value:m[e.fieldName]||"",onChange:a=>h({...m,[e.fieldName]:a.target.value}),required:e.required,placeholder:e.placeholder,disabled:s}),"textarea"===e.fieldType&&(0,a.jsx)("textarea",{className:"input",value:m[e.fieldName]||"",onChange:a=>h({...m,[e.fieldName]:a.target.value}),required:e.required,placeholder:e.placeholder,rows:3,disabled:s}),"number"===e.fieldType&&(0,a.jsx)("input",{type:"number",className:"input",value:m[e.fieldName]||"",onChange:a=>h({...m,[e.fieldName]:a.target.value}),required:e.required,placeholder:e.placeholder,disabled:s}),"date"===e.fieldType&&(0,a.jsx)("input",{type:"date",className:"input",value:m[e.fieldName]||"",onChange:a=>h({...m,[e.fieldName]:a.target.value}),required:e.required,disabled:s}),"select"===e.fieldType&&(0,a.jsxs)("select",{className:"input",value:m[e.fieldName]||"",onChange:a=>h({...m,[e.fieldName]:a.target.value}),required:e.required,disabled:s,children:[(0,a.jsx)("option",{value:"",children:"Select..."}),Array.isArray(e.options)&&e.options.map((e,t)=>(0,a.jsx)("option",{value:e,children:e},t))]}),"checkbox"===e.fieldType&&(0,a.jsx)("div",{children:Array.isArray(e.options)&&e.options.map((t,r)=>(0,a.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[(0,a.jsx)("input",{type:"checkbox",checked:!!Array.isArray(m[e.fieldName])&&m[e.fieldName].includes(t),onChange:a=>{let r=Array.isArray(m[e.fieldName])?m[e.fieldName]:[],l=a.target.checked?[...r,t]:r.filter(e=>e!==t);h({...m,[e.fieldName]:l})},disabled:s}),t]},r))})]},e.id))})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Category"}),(0,a.jsx)("input",{type:"text",className:"input",value:y.category,onChange:e=>g({...y,category:e.target.value}),disabled:s})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Manufacturer"}),(0,a.jsx)("input",{type:"text",className:"input",value:y.manufacturer,onChange:e=>g({...y,manufacturer:e.target.value}),disabled:s})]})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Model"}),(0,a.jsx)("input",{type:"text",className:"input",value:y.model,onChange:e=>g({...y,model:e.target.value}),disabled:s})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Serial Number"}),(0,a.jsx)("input",{type:"text",className:"input",value:y.serialNumber,onChange:e=>g({...y,serialNumber:e.target.value}),disabled:s})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Location"}),(0,a.jsx)("input",{type:"text",className:"input",value:y.location,onChange:e=>g({...y,location:e.target.value}),disabled:s})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Building"}),(0,a.jsx)("input",{type:"text",className:"input",value:y.building,onChange:e=>g({...y,building:e.target.value}),disabled:s})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Floor"}),(0,a.jsx)("input",{type:"text",className:"input",value:y.floor,onChange:e=>g({...y,floor:e.target.value}),disabled:s})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Room"}),(0,a.jsx)("input",{type:"text",className:"input",value:y.room,onChange:e=>g({...y,room:e.target.value}),disabled:s})]})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Purchase Date"}),(0,a.jsx)("input",{type:"datetime-local",className:"input",value:y.purchaseDate,onChange:e=>g({...y,purchaseDate:e.target.value}),disabled:s})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Purchase Price"}),(0,a.jsx)("input",{type:"number",step:"0.01",className:"input",value:y.purchasePrice,onChange:e=>g({...y,purchasePrice:e.target.value}),disabled:s})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Warranty Expiry"}),(0,a.jsx)("input",{type:"datetime-local",className:"input",value:y.warrantyExpiry,onChange:e=>g({...y,warrantyExpiry:e.target.value}),disabled:s})]})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[(0,a.jsx)(l.default,{href:"/assets",style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)"},children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:s,children:s?"Creating...":"Create Asset"})]})]})]})}e.s(["default",()=>s])}]);