module.exports=[59837,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(){let a=(0,d.useRouter)(),[e,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)(""),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",tenantId:"",role:"AGENT"});(0,c.useEffect)(()=>{m()},[]);let m=async()=>{try{let a=localStorage.getItem("accessToken"),b=await fetch("/api/v1/manager/tenants",{headers:a?{Authorization:`Bearer ${a}`}:{}}),c=await b.json();c.success&&j(c.data.tenants||c.data||[])}catch(a){}},n=async b=>{if(b.preventDefault(),f(!0),h(""),k.password!==k.confirmPassword){h("Passwords do not match"),f(!1);return}if(k.password.length<8){h("Password must be at least 8 characters"),f(!1);return}if(!k.tenantId){h("Please select a tenant"),f(!1);return}try{let b=localStorage.getItem("accessToken"),c=await fetch("/api/v1/manager/agents",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({email:k.email,password:k.password,firstName:k.firstName||void 0,lastName:k.lastName||void 0,tenantId:k.tenantId,roles:[k.role]})}),d=await c.json();d.success?a.push(`/manager/agents/${d.data.agent.id||d.data.id}`):h(d.error?.message||"Failed to register agent")}catch(a){h("An unexpected error occurred")}finally{f(!1)}};return(0,b.jsxs)("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto"},children:[(0,b.jsx)("h1",{style:{fontSize:"2rem",marginBottom:"2rem"},children:"Register New Agent"}),g&&(0,b.jsx)("div",{style:{padding:"1rem",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"var(--error)",borderRadius:"8px",marginBottom:"1.5rem"},children:g}),(0,b.jsxs)("form",{onSubmit:n,style:{display:"grid",gap:"1.5rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Email *"}),(0,b.jsx)("input",{type:"email",required:!0,value:k.email,onChange:a=>l({...k,email:a.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Password *"}),(0,b.jsx)("input",{type:"password",required:!0,minLength:8,value:k.password,onChange:a=>l({...k,password:a.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}}),(0,b.jsx)("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:"Minimum 8 characters"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Confirm Password *"}),(0,b.jsx)("input",{type:"password",required:!0,minLength:8,value:k.confirmPassword,onChange:a=>l({...k,confirmPassword:a.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}})]}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"First Name"}),(0,b.jsx)("input",{type:"text",value:k.firstName,onChange:a=>l({...k,firstName:a.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Last Name"}),(0,b.jsx)("input",{type:"text",value:k.lastName,onChange:a=>l({...k,lastName:a.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Tenant *"}),(0,b.jsxs)("select",{required:!0,value:k.tenantId,onChange:a=>l({...k,tenantId:a.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"},children:[(0,b.jsx)("option",{value:"",children:"Select a tenant"}),i.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Role *"}),(0,b.jsxs)("select",{required:!0,value:k.role,onChange:a=>l({...k,role:a.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"},children:[(0,b.jsx)("option",{value:"AGENT",children:"Agent"}),(0,b.jsx)("option",{value:"END_USER",children:"End User"})]})]}),(0,b.jsxs)("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[(0,b.jsx)("button",{type:"submit",disabled:e,style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--accent-primary)",color:"white",border:"none",borderRadius:"8px",cursor:e?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:600,opacity:e?.6:1},children:e?"Registering...":"Register Agent"}),(0,b.jsx)("button",{type:"button",onClick:()=>a.back(),style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem"},children:"Cancel"})]})]})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=app_manager_agents_new_page_tsx_80fd8400._.js.map