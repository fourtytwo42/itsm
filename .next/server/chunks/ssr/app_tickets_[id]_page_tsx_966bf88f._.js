module.exports=[70851,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(){let a=(0,d.useParams)(),e=a?.id,[f,g]=(0,c.useState)(null),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let a=async()=>{try{let a=await fetch(`/api/v1/tickets/${e}`),b=await a.json();if(!b.success)return void k("Failed to load ticket");g(b.data)}catch(a){k("Failed to load ticket")}finally{i(!1)}};e&&a()},[e]);let p=async()=>{if(l.trim()){o(!0),k("");try{let a=localStorage.getItem("accessToken"),b=await fetch(`/api/v1/tickets/${e}`,{method:"POST",headers:{"Content-Type":"application/json",...a?{Authorization:`Bearer ${a}`}:{}},body:JSON.stringify({body:l})}),c=await b.json();if(!c.success){k(c.error?.message||"Failed to add comment"),o(!1);return}g(a=>a?{...a,comments:[...a.comments,{...c.data,author:c.data.author}]}:a),m("")}catch(a){k("Failed to add comment")}finally{o(!1)}}};return h?(0,b.jsx)("div",{className:"container",style:{padding:"2rem"},children:"Loading ticket..."}):j?(0,b.jsx)("div",{className:"container",style:{padding:"2rem",color:"var(--error)"},children:j}):f?(0,b.jsxs)("div",{className:"container",style:{padding:"2rem",display:"grid",gap:"1.5rem"},children:[(0,b.jsxs)("div",{className:"card",children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,b.jsx)("span",{style:{fontWeight:600},children:f.ticketNumber}),(0,b.jsx)("span",{style:{color:"var(--text-secondary)"},children:new Date(f.createdAt).toLocaleString()})]}),(0,b.jsx)("h1",{style:{marginBottom:"0.5rem"},children:f.subject}),(0,b.jsx)("p",{style:{color:"var(--text-secondary)",marginBottom:"0.75rem"},children:f.description}),(0,b.jsxs)("div",{style:{display:"flex",gap:"0.75rem",color:"var(--text-secondary)",fontSize:"0.9rem"},children:[(0,b.jsxs)("span",{children:["Status: ",f.status]}),(0,b.jsxs)("span",{children:["Priority: ",f.priority]})]})]}),(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("h3",{style:{marginBottom:"0.75rem"},children:"Comments"}),(0,b.jsxs)("div",{style:{display:"grid",gap:"0.5rem",marginBottom:"1rem"},children:[0===f.comments.length&&(0,b.jsx)("p",{style:{color:"var(--text-secondary)"},children:"No comments yet."}),f.comments.map(a=>(0,b.jsxs)("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.5rem",padding:"0.75rem"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[(0,b.jsx)("span",{style:{fontWeight:500},children:a.author?.email??"Unknown"}),(0,b.jsx)("span",{style:{color:"var(--text-tertiary)",fontSize:"0.85rem"},children:new Date(a.createdAt).toLocaleString()})]}),(0,b.jsx)("p",{children:a.body})]},a.id))]}),(0,b.jsxs)("div",{style:{display:"grid",gap:"0.5rem"},children:[(0,b.jsx)("textarea",{className:"input",rows:3,placeholder:"Add a comment",value:l,onChange:a=>m(a.target.value),disabled:n}),(0,b.jsx)("button",{className:"btn btn-primary",onClick:p,disabled:n,children:n?"Adding...":"Add Comment"}),j&&(0,b.jsx)("p",{style:{color:"var(--error)"},children:j})]})]})]}):null}a.s(["default",()=>e])}];

//# sourceMappingURL=app_tickets_%5Bid%5D_page_tsx_966bf88f._.js.map