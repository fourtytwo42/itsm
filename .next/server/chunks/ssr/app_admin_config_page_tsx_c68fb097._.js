module.exports=[84293,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(){let a=(0,d.useRouter)(),[e,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)("general");(0,c.useEffect)(()=>{let b=localStorage.getItem("user"),c=localStorage.getItem("accessToken");if(!b||!c)return void a.push("/login");try{let c=JSON.parse(b);if(f(c),!c.roles.includes("ADMIN"))return void a.push("/dashboard");o()}catch(b){a.push("/login")}finally{h(!1)}},[a]);let o=async()=>{try{let a=localStorage.getItem("accessToken"),b=await fetch("/api/v1/admin/config",{headers:{Authorization:`Bearer ${a}`}});if(!b.ok)throw Error("Failed to load configuration");let c=await b.json();c.success&&l(c.data.config)}catch(a){console.error("Error loading config:",a)}},p=async()=>{if(k)try{j(!0);let a=localStorage.getItem("accessToken");if(!(await fetch("/api/v1/admin/config",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({config:k})})).ok)throw Error("Failed to save configuration");alert("Configuration saved successfully!")}catch(a){console.error("Error saving config:",a),alert("Failed to save configuration")}finally{j(!1)}},q=a=>{k&&l({...k,...a})};return g?(0,b.jsx)("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading..."}):e&&k?(0,b.jsx)("div",{style:{minHeight:"100vh",padding:"2rem"},children:(0,b.jsxs)("div",{className:"container",children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,b.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold"},children:"System Configuration"}),(0,b.jsx)("button",{className:"btn btn-primary",onClick:p,disabled:i,children:i?"Saving...":"Save Changes"})]}),(0,b.jsxs)("div",{className:"card",style:{marginBottom:"2rem"},children:[(0,b.jsx)("div",{style:{display:"flex",gap:"1rem",borderBottom:"1px solid var(--border-color)",marginBottom:"1rem"},children:["general","auth","email","files","branding","tickets","custom-fields","ticket-types"].map(a=>(0,b.jsx)("button",{onClick:()=>n(a),style:{padding:"0.75rem 1.5rem",border:"none",background:"none",borderBottom:m===a?"2px solid var(--primary-color)":"2px solid transparent",cursor:"pointer",textTransform:"capitalize"},children:a.replace("-"," ")},a))}),"general"===m&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{style:{marginBottom:"1rem"},children:"General Settings"}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Organization Name"}),(0,b.jsx)("input",{type:"text",value:k.organizationName,onChange:a=>q({organizationName:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"checkbox",checked:k.maintenanceMode,onChange:a=>q({maintenanceMode:a.target.checked})}),"Maintenance Mode"]})}),k.maintenanceMode&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Maintenance Message"}),(0,b.jsx)("textarea",{value:k.maintenanceMessage||"",onChange:a=>q({maintenanceMessage:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",minHeight:"100px"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Session Timeout (minutes)"}),(0,b.jsx)("input",{type:"number",value:k.sessionTimeout,onChange:a=>q({sessionTimeout:parseInt(a.target.value)||1440}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]})]})]}),"auth"===m&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{style:{marginBottom:"1rem"},children:"Authentication Settings"}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,b.jsx)("div",{children:(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"checkbox",checked:k.registrationEnabled,onChange:a=>q({registrationEnabled:a.target.checked})}),"Enable User Registration"]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"checkbox",checked:k.passwordResetEnabled,onChange:a=>q({passwordResetEnabled:a.target.checked})}),"Enable Password Reset"]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"checkbox",checked:k.ssoEnabled,onChange:a=>q({ssoEnabled:a.target.checked})}),"Enable SSO"]})}),k.ssoEnabled&&(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"SSO Provider"}),(0,b.jsxs)("select",{value:k.ssoProvider||"oauth2",onChange:a=>q({ssoProvider:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"},children:[(0,b.jsx)("option",{value:"oauth2",children:"OAuth2"}),(0,b.jsx)("option",{value:"saml",children:"SAML"})]})]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"checkbox",checked:k.ldapEnabled,onChange:a=>q({ldapEnabled:a.target.checked})}),"Enable LDAP/Active Directory"]})})]})]}),"email"===m&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{style:{marginBottom:"1rem"},children:"Email Settings"}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,b.jsx)("div",{children:(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"checkbox",checked:k.emailNotificationsEnabled,onChange:a=>q({emailNotificationsEnabled:a.target.checked})}),"Enable Email Notifications"]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"From Address"}),(0,b.jsx)("input",{type:"email",value:k.emailFromAddress,onChange:a=>q({emailFromAddress:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"From Name"}),(0,b.jsx)("input",{type:"text",value:k.emailFromName,onChange:a=>q({emailFromName:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]})]})]}),"files"===m&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{style:{marginBottom:"1rem"},children:"File Upload Settings"}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Max File Size (bytes)"}),(0,b.jsx)("input",{type:"number",value:k.maxFileSize,onChange:a=>q({maxFileSize:parseInt(a.target.value)||0x6400000}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}}),(0,b.jsxs)("small",{style:{color:"var(--text-secondary)"},children:["Current: ",(k.maxFileSize/1024/1024).toFixed(2)," MB"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Allowed File Types (comma-separated, * for all)"}),(0,b.jsx)("input",{type:"text",value:k.allowedFileTypes.join(", "),onChange:a=>q({allowedFileTypes:a.target.value.split(",").map(a=>a.trim())}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]})]})]}),"branding"===m&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{style:{marginBottom:"1rem"},children:"Branding"}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Logo URL"}),(0,b.jsx)("input",{type:"url",value:k.logoUrl||"",onChange:a=>q({logoUrl:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Primary Color (hex)"}),(0,b.jsx)("input",{type:"color",value:k.primaryColor||"#3b82f6",onChange:a=>q({primaryColor:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Secondary Color (hex)"}),(0,b.jsx)("input",{type:"color",value:k.secondaryColor||"#8b5cf6",onChange:a=>q({secondaryColor:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Favicon URL"}),(0,b.jsx)("input",{type:"url",value:k.faviconUrl||"",onChange:a=>q({faviconUrl:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]})]})]}),"tickets"===m&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{style:{marginBottom:"1rem"},children:"Ticket Settings"}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Default Ticket Priority"}),(0,b.jsxs)("select",{value:k.defaultTicketPriority,onChange:a=>q({defaultTicketPriority:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"},children:[(0,b.jsx)("option",{value:"LOW",children:"Low"}),(0,b.jsx)("option",{value:"MEDIUM",children:"Medium"}),(0,b.jsx)("option",{value:"HIGH",children:"High"}),(0,b.jsx)("option",{value:"CRITICAL",children:"Critical"})]})]}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"checkbox",checked:k.autoAssignEnabled,onChange:a=>q({autoAssignEnabled:a.target.checked})}),"Enable Auto-Assignment"]})}),k.autoAssignEnabled&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Auto-Assignment Method"}),(0,b.jsxs)("select",{value:k.autoAssignMethod||"round-robin",onChange:a=>q({autoAssignMethod:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"},children:[(0,b.jsx)("option",{value:"round-robin",children:"Round Robin"}),(0,b.jsx)("option",{value:"least-busy",children:"Least Busy"}),(0,b.jsx)("option",{value:"random",children:"Random"})]})]})]})]}),"custom-fields"===m&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{style:{marginBottom:"1rem"},children:"Custom Fields"}),(0,b.jsx)("p",{style:{color:"var(--text-secondary)",marginBottom:"1rem"},children:"Custom fields functionality will be available in the next update."})]}),"ticket-types"===m&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{style:{marginBottom:"1rem"},children:"Ticket Types"}),(0,b.jsx)("p",{style:{color:"var(--text-secondary)",marginBottom:"1rem"},children:"Ticket types functionality will be available in the next update."})]})]})]})}):null}a.s(["default",()=>e])}];

//# sourceMappingURL=app_admin_config_page_tsx_c68fb097._.js.map