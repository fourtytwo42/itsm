module.exports=[36216,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246);let e=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}),f=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))});function g({tickets:a,onStatusChange:g,showQuickActions:h=!0,onRefresh:i,disableClientSort:j=!1,onSortChange:k,currentSortField:l,currentSortOrder:m}){let[n,o]=(0,c.useState)("createdAt"),[p,q]=(0,c.useState)("desc"),r=j&&void 0!==l?l:n,s=j&&void 0!==m?m:p,[t,u]=(0,c.useState)({}),v=async(a,b)=>{if(g){u(b=>({...b,[a]:!0}));try{await g(a,b),i&&i()}catch(a){console.error("Failed to update status:",a)}finally{u(b=>({...b,[a]:!1}))}}},w=j?a:[...a].sort((a,b)=>{let c,d;switch(r){case"ticketNumber":c=a.ticketNumber,d=b.ticketNumber;break;case"subject":c=a.subject,d=b.subject;break;case"status":c=a.status,d=b.status;break;case"priority":c=a.priority,d=b.priority;break;case"createdAt":default:c=new Date(a.createdAt).getTime(),d=new Date(b.createdAt).getTime();break;case"updatedAt":c=new Date(a.updatedAt).getTime(),d=new Date(b.updatedAt).getTime();break;case"requester":c=a.requester?.email||a.requesterEmail||"",d=b.requester?.email||b.requesterEmail||"";break;case"assignee":c=a.assignee?.email||"",d=b.assignee?.email||""}return c<d?"asc"===s?-1:1:c>d?"asc"===s?1:-1:0}),x=({field:a,label:c})=>(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem",cursor:"pointer",userSelect:"none",position:"relative"},onClick:()=>{j&&k?k(a,r===a&&"desc"===s?"asc":"desc"):r===a?q("asc"===p?"desc":"asc"):(o(a),q("desc"))},children:(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[c,r===a&&("asc"===s?(0,b.jsx)(e,{style:{width:"0.875rem",height:"0.875rem"}}):(0,b.jsx)(f,{style:{width:"0.875rem",height:"0.875rem"}}))]})});return 0===a.length?(0,b.jsx)("div",{className:"card",style:{padding:"3rem",textAlign:"center",color:"var(--text-secondary)"},children:"No tickets found."}):(0,b.jsx)("div",{className:"card",style:{overflowX:"auto",padding:0},children:(0,b.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{style:{borderBottom:"2px solid var(--border-color)",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)(x,{field:"ticketNumber",label:"Ticket #"}),(0,b.jsx)(x,{field:"subject",label:"Subject"}),(0,b.jsx)(x,{field:"requester",label:"Requester"}),(0,b.jsx)(x,{field:"assignee",label:"Assignee"}),(0,b.jsx)(x,{field:"status",label:"Status"}),(0,b.jsx)(x,{field:"priority",label:"Priority"}),(0,b.jsx)(x,{field:"createdAt",label:"Created"}),h&&(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"right",fontWeight:600,fontSize:"0.875rem"},children:"Actions"})]})}),(0,b.jsx)("tbody",{children:w.map(a=>(0,b.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[(0,b.jsx)("td",{style:{padding:"1rem"},children:(0,b.jsx)(d.default,{href:`/tickets/${a.id}`,style:{color:"var(--accent-primary)",textDecoration:"none",fontWeight:500},children:a.ticketNumber})}),(0,b.jsx)("td",{style:{padding:"1rem"},children:(0,b.jsx)(d.default,{href:`/tickets/${a.id}`,style:{color:"var(--text-primary)",textDecoration:"none"},children:a.subject})}),(0,b.jsx)("td",{style:{padding:"1rem",color:"var(--text-secondary)"},children:a.requester?[a.requester.firstName,a.requester.lastName].filter(Boolean).join(" ")||a.requester.email:a.requesterName||a.requesterEmail||"Unknown"}),(0,b.jsx)("td",{style:{padding:"1rem",color:"var(--text-secondary)"},children:a.assignee?[a.assignee.firstName,a.assignee.lastName].filter(Boolean).join(" ")||a.assignee.email:"Unassigned"}),(0,b.jsx)("td",{style:{padding:"1rem"},children:(0,b.jsx)("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:(a=>{switch(a){case"NEW":return"rgba(59, 130, 246, 0.15)";case"IN_PROGRESS":return"rgba(234, 179, 8, 0.15)";case"RESOLVED":return"rgba(34, 197, 94, 0.15)";case"CLOSED":return"rgba(107, 114, 128, 0.15)";default:return"var(--bg-tertiary)"}})(a.status),color:(a=>{switch(a){case"NEW":return"rgb(59, 130, 246)";case"IN_PROGRESS":return"rgb(234, 179, 8)";case"RESOLVED":return"rgb(34, 197, 94)";case"CLOSED":return"rgb(107, 114, 128)";default:return"var(--text-secondary)"}})(a.status),borderRadius:"4px",fontSize:"0.75rem",fontWeight:500,textTransform:"capitalize"},children:a.status.replace("_"," ")})}),(0,b.jsx)("td",{style:{padding:"1rem"},children:(0,b.jsx)("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:(a=>{switch(a){case"LOW":return"rgba(34, 197, 94, 0.15)";case"MEDIUM":return"rgba(234, 179, 8, 0.15)";case"HIGH":return"rgba(251, 146, 60, 0.15)";case"CRITICAL":return"rgba(239, 68, 68, 0.15)";default:return"var(--bg-tertiary)"}})(a.priority),color:(a=>{switch(a){case"LOW":return"rgb(34, 197, 94)";case"MEDIUM":return"rgb(234, 179, 8)";case"HIGH":return"rgb(251, 146, 60)";case"CRITICAL":return"rgb(239, 68, 68)";default:return"var(--text-secondary)"}})(a.priority),borderRadius:"4px",fontSize:"0.75rem",fontWeight:500,textTransform:"capitalize"},children:a.priority})}),(0,b.jsxs)("td",{style:{padding:"1rem",color:"var(--text-secondary)",fontSize:"0.875rem"},children:[new Date(a.createdAt).toLocaleDateString()," ",new Date(a.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),h&&(0,b.jsx)("td",{style:{padding:"1rem",textAlign:"right"},children:g&&(0,b.jsxs)("select",{value:a.status,onChange:b=>v(a.id,b.target.value),disabled:t[a.id],style:{padding:"0.375rem 0.75rem",border:"1px solid var(--border-color)",borderRadius:"4px",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",cursor:t[a.id]?"not-allowed":"pointer",fontSize:"0.875rem"},children:[(0,b.jsx)("option",{value:"NEW",children:"New"}),(0,b.jsx)("option",{value:"IN_PROGRESS",children:"In Progress"}),(0,b.jsx)("option",{value:"RESOLVED",children:"Resolved"}),(0,b.jsx)("option",{value:"CLOSED",children:"Closed"})]})})]},a.id))})]})})}a.s(["default",()=>g],36216)},20731,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(36216);function f(){let[a,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(null);(0,c.useEffect)(()=>{let a=localStorage.getItem("user");if(a)try{let b=JSON.parse(a);t(b)}catch(a){console.error("Failed to parse user data")}u()},[]),(0,c.useEffect)(()=>{s&&s.roles?.some(a=>["AGENT","IT_MANAGER","ADMIN"].includes(a))&&(v(),w())},[s]);let u=async()=>{try{j(!0);let a=localStorage.getItem("accessToken"),[b,c]=await Promise.all([fetch("/api/v1/analytics/metrics",{headers:a?{Authorization:`Bearer ${a}`}:{}}),fetch("/api/v1/analytics/mttr",{headers:a?{Authorization:`Bearer ${a}`}:{}})]),d=await b.json(),e=await c.json();d.success&&f(d.data.metrics),e.success&&h(e.data.mttr)}catch(a){console.error("Failed to load dashboard data:",a)}finally{j(!1)}},v=async()=>{try{n(!0);let a=localStorage.getItem("accessToken"),b=await fetch("/api/v1/tickets?onlyAssignedToMe=true&excludeStatuses=CLOSED,RESOLVED&limit=20",{headers:a?{Authorization:`Bearer ${a}`}:{}}),c=await b.json();c.success&&l(c.data||[])}catch(a){console.error("Failed to load assigned tickets:",a)}finally{n(!1)}},w=async()=>{try{r(!0);let a=localStorage.getItem("accessToken"),b=await fetch("/api/v1/kb?limit=5",{headers:a?{Authorization:`Bearer ${a}`}:{}}),c=await b.json();c.success&&Array.isArray(c.data)&&p(c.data.slice(0,5))}catch(a){console.error("Failed to load KB articles:",a)}finally{r(!1)}},x=async(a,b)=>{let c=localStorage.getItem("accessToken");try{let d=await fetch(`/api/v1/tickets/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({status:b})}),e=await d.json();if(!e.success)throw Error(e.error?.message||"Failed to update status");"CLOSED"===b||"RESOLVED"===b?l(b=>b.filter(b=>b.id!==a)):l(c=>c.map(c=>c.id===a?{...c,status:b}:c))}catch(a){throw console.error("Failed to update ticket status:",a),a}},y=async a=>{try{let b=localStorage.getItem("accessToken"),c=await fetch(`/api/v1/analytics/export?type=${a}&format=csv`,{headers:b?{Authorization:`Bearer ${b}`}:{}}),d=await c.blob(),e=window.URL.createObjectURL(d),f=document.createElement("a");f.href=e,f.download=`${a}-report-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(f),f.click(),window.URL.revokeObjectURL(e),document.body.removeChild(f)}catch(a){console.error("Failed to export report:",a)}},z=s?.roles?.some(a=>["AGENT","IT_MANAGER","ADMIN"].includes(a));return i?(0,b.jsx)("div",{style:{padding:"2rem"},children:"Loading dashboard..."}):(0,b.jsxs)("div",{style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,b.jsx)("h1",{style:{margin:0},children:"Dashboard"}),(0,b.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,b.jsx)("button",{onClick:()=>y("tickets"),style:{padding:"0.5rem 1rem",backgroundColor:"var(--accent-primary)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Export Tickets CSV"}),(0,b.jsx)(d.default,{href:"/reports",style:{padding:"0.5rem 1rem",backgroundColor:"var(--accent-primary)",color:"white",textDecoration:"none",borderRadius:"6px"},children:"View Reports"})]})]}),a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[(0,b.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Total Tickets"}),(0,b.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:a.totalTickets})]}),(0,b.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Open Tickets"}),(0,b.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"orange"},children:a.openTickets})]}),(0,b.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Resolved Tickets"}),(0,b.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"green"},children:a.resolvedTickets})]}),(0,b.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"SLA Compliance"}),(0,b.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:a.slaCompliance>=90?"green":a.slaCompliance>=75?"orange":"red"},children:[a.slaCompliance.toFixed(1),"%"]})]}),null!==g&&(0,b.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"MTTR (Minutes)"}),(0,b.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:g})]}),(0,b.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Avg Resolution Time"}),(0,b.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:[a.averageResolutionTime," min"]})]})]}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem",marginBottom:"2rem"},children:[(0,b.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)("h2",{style:{marginTop:0,marginBottom:"1rem"},children:"Tickets by Priority"}),(0,b.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Object.entries(a.ticketsByPriority).map(([a,c])=>(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,b.jsxs)("span",{children:[a,":"]}),(0,b.jsx)("strong",{children:c})]},a))})]}),(0,b.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)("h2",{style:{marginTop:0,marginBottom:"1rem"},children:"Tickets by Status"}),(0,b.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Object.entries(a.ticketsByStatus).map(([a,c])=>(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,b.jsxs)("span",{children:[a,":"]}),(0,b.jsx)("strong",{children:c})]},a))})]})]})]}),z&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,b.jsx)("h2",{style:{margin:0},children:"My Assigned Tickets"}),(0,b.jsx)(d.default,{href:"/tickets",className:"btn btn-secondary",style:{fontSize:"0.875rem"},children:"View All Tickets"})]}),m?(0,b.jsx)("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading tickets..."}):(0,b.jsx)(e.default,{tickets:k,onStatusChange:x,showQuickActions:!0,onRefresh:v})]}),(0,b.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,b.jsx)("h2",{style:{margin:0},children:"Recent Knowledge Base Articles"}),(0,b.jsx)(d.default,{href:"/kb",className:"btn btn-secondary",style:{fontSize:"0.875rem"},children:"View All Articles"})]}),q?(0,b.jsx)("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading articles..."}):o.length>0?(0,b.jsx)("div",{className:"card",style:{padding:0},children:(0,b.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:o.map(a=>(0,b.jsxs)(d.default,{href:`/kb/${a.slug}`,style:{padding:"1rem",borderBottom:"1px solid var(--border-color)",textDecoration:"none",color:"inherit",display:"block"},children:[(0,b.jsx)("h3",{style:{margin:0,marginBottom:"0.5rem",fontSize:"1rem"},children:a.title}),(0,b.jsxs)("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:["Updated: ",new Date(a.updatedAt).toLocaleDateString()]})]},a.id))})}):(0,b.jsx)("div",{className:"card",style:{padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:"No knowledge base articles found."})]})]}),(0,b.jsxs)("div",{style:{marginTop:"2rem"},children:[(0,b.jsx)("h2",{style:{marginBottom:"1rem"},children:"Quick Links"}),(0,b.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[(0,b.jsx)(d.default,{href:"/tickets",style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)"},children:"View Tickets"}),(0,b.jsx)(d.default,{href:"/assets",style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)"},children:"View Assets"}),(0,b.jsx)(d.default,{href:"/changes",style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)"},children:"View Changes"}),(0,b.jsx)(d.default,{href:"/kb",style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)"},children:"Knowledge Base"})]})]})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=_6da9dedf._.js.map