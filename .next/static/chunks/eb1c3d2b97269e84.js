(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94630,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(18566),n=e.i(22016);function s(){let e=(0,a.useRouter)(),[s,o]=(0,t.useState)([]),[i,d]=(0,t.useState)(!0),[c,l]=(0,t.useState)(""),[g,m]=(0,t.useState)("");(0,t.useEffect)(()=>{u()},[]);let u=async()=>{try{d(!0);let e=localStorage.getItem("accessToken"),r=await fetch("/api/v1/manager/agents",{headers:e?{Authorization:`Bearer ${e}`}:{}}),t=await r.json();t.success?o(t.data.agents||t.data||[]):l(t.error?.message||"Failed to load agents")}catch(e){l("An unexpected error occurred")}finally{d(!1)}},h=async(e,r)=>{if(confirm(`Are you sure you want to ${r?"disable":"enable"} this agent?`))try{let t=localStorage.getItem("accessToken"),a=await fetch(`/api/v1/manager/agents/${e}/disable`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({disabled:r})}),n=await a.json();n.success?u():l(n.error?.message||"Failed to update agent")}catch(e){l("An unexpected error occurred")}},p=async e=>{if(confirm("Are you sure you want to delete this agent? This action cannot be undone."))try{let r=localStorage.getItem("accessToken"),t=await fetch(`/api/v1/manager/agents/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`}}),a=await t.json();a.success?u():l(a.error?.message||"Failed to delete agent")}catch(e){l("An unexpected error occurred")}},y=s.filter(e=>{if(!g)return!0;let r=g.toLowerCase();return e.email.toLowerCase().includes(r)||e.firstName?.toLowerCase().includes(r)||e.lastName?.toLowerCase().includes(r)});return i?(0,r.jsx)("div",{style:{padding:"2rem"},children:(0,r.jsx)("p",{children:"Loading agents..."})}):(0,r.jsxs)("div",{style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,r.jsx)("h1",{style:{fontSize:"2rem",margin:0},children:"My Agents"}),(0,r.jsx)("button",{onClick:()=>e.push("/manager/agents/new"),style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--accent-primary)",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontSize:"1rem"},children:"Register Agent"})]}),c&&(0,r.jsx)("div",{style:{padding:"1rem",backgroundColor:"var(--error-bg)",color:"var(--error-text)",borderRadius:"0.5rem",marginBottom:"1rem"},children:c}),(0,r.jsx)("div",{style:{marginBottom:"2rem"},children:(0,r.jsx)("input",{type:"text",placeholder:"Search agents...",value:g,onChange:e=>m(e.target.value),style:{width:"100%",maxWidth:"400px",padding:"0.75rem",border:"1px solid var(--border-color)",borderRadius:"0.5rem",backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)"}})}),0===y.length?(0,r.jsx)("div",{style:{textAlign:"center",padding:"3rem",color:"var(--text-secondary)"},children:(0,r.jsx)("p",{children:"No agents found. Register your first agent to get started."})}):(0,r.jsx)("div",{style:{display:"grid",gap:"1rem"},children:y.map(e=>(0,r.jsxs)("div",{style:{padding:"1.5rem",backgroundColor:"var(--bg-secondary)",borderRadius:"0.5rem",border:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsx)("h3",{style:{margin:0,fontSize:"1.125rem",marginBottom:"0.5rem"},children:e.firstName||e.lastName?`${e.firstName||""} ${e.lastName||""}`.trim():e.email}),(0,r.jsx)("p",{style:{margin:0,color:"var(--text-secondary)",fontSize:"0.875rem"},children:e.email}),(0,r.jsxs)("div",{style:{display:"flex",gap:"1rem",marginTop:"0.5rem",fontSize:"0.875rem"},children:[(0,r.jsx)("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"1rem",backgroundColor:e.isActive?"var(--success-bg)":"var(--error-bg)",color:e.isActive?"var(--success-text)":"var(--error-text)"},children:e.isActive?"Active":"Inactive"}),(0,r.jsx)("span",{style:{color:"var(--text-secondary)"},children:e.roles.join(", ")}),e.tenantAssignments&&e.tenantAssignments.length>0&&(0,r.jsxs)("span",{style:{color:"var(--text-secondary)"},children:[e.tenantAssignments.length," tenant(s)"]})]})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,r.jsx)(n.default,{href:`/manager/agents/${e.id}`,style:{padding:"0.5rem 1rem",backgroundColor:"var(--accent-primary)",color:"white",textDecoration:"none",borderRadius:"0.5rem",fontSize:"0.875rem"},children:"Manage"}),(0,r.jsx)("button",{onClick:()=>h(e.id,e.isActive),style:{padding:"0.5rem 1rem",backgroundColor:e.isActive?"var(--warning-bg)":"var(--success-bg)",color:e.isActive?"var(--warning-text)":"var(--success-text)",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontSize:"0.875rem"},children:e.isActive?"Disable":"Enable"}),(0,r.jsx)("button",{onClick:()=>p(e.id),style:{padding:"0.5rem 1rem",backgroundColor:"var(--error-bg)",color:"var(--error-text)",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontSize:"0.875rem"},children:"Delete"})]})]},e.id))})]})}e.s(["default",()=>s])}]);