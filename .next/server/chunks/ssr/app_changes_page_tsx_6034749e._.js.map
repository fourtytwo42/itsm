{"version":3,"sources":["../../../../app/changes/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport Link from 'next/link'\nimport OrganizationContext from '@/components/OrganizationContext'\n\ninterface ChangeRequest {\n  id: string\n  changeNumber: string\n  title: string\n  type: string\n  status: string\n  priority: string\n  requester: {\n    id: string\n    email: string\n    firstName?: string\n    lastName?: string\n  }\n}\n\nexport default function ChangesPage() {\n  const [changeRequests, setChangeRequests] = useState<ChangeRequest[]>([])\n  const [loading, setLoading] = useState(true)\n  const [filters, setFilters] = useState({\n    type: '',\n    status: '',\n    priority: '',\n    search: '',\n  })\n\n  useEffect(() => {\n    loadChangeRequests()\n  }, [filters])\n\n  const loadChangeRequests = async () => {\n    try {\n      setLoading(true)\n      const token = localStorage.getItem('accessToken')\n      const params = new URLSearchParams()\n      if (filters.type) params.append('type', filters.type)\n      if (filters.status) params.append('status', filters.status)\n      if (filters.priority) params.append('priority', filters.priority)\n      if (filters.search) params.append('search', filters.search)\n\n      const response = await fetch(`/api/v1/changes?${params.toString()}`, {\n        headers: token ? { Authorization: `Bearer ${token}` } : {},\n      })\n\n      const data = await response.json()\n      if (data.success) {\n        setChangeRequests(data.data.changeRequests)\n      }\n    } catch (error) {\n      console.error('Failed to load change requests:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div style={{ padding: '2rem', maxWidth: '1400px', margin: '0 auto' }}>\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '2rem' }}>\n        <h1 style={{ margin: 0 }}>Change Management</h1>\n        <Link\n          href=\"/changes/new\"\n          style={{\n            padding: '0.5rem 1rem',\n            backgroundColor: 'var(--accent-primary)',\n            color: 'white',\n            textDecoration: 'none',\n            borderRadius: '6px',\n          }}\n        >\n          New Change Request\n        </Link>\n      </div>\n\n      <div style={{ marginBottom: '2rem', display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\n        <input\n          type=\"text\"\n          placeholder=\"Search change requests...\"\n          value={filters.search}\n          onChange={(e) => setFilters({ ...filters, search: e.target.value })}\n          style={{\n            padding: '0.5rem',\n            border: '1px solid var(--border-color)',\n            borderRadius: '6px',\n            flex: 1,\n            minWidth: '200px',\n          }}\n        />\n        <select\n          value={filters.type}\n          onChange={(e) => setFilters({ ...filters, type: e.target.value })}\n          style={{\n            padding: '0.5rem',\n            border: '1px solid var(--border-color)',\n            borderRadius: '6px',\n          }}\n        >\n          <option value=\"\">All Types</option>\n          <option value=\"STANDARD\">Standard</option>\n          <option value=\"NORMAL\">Normal</option>\n          <option value=\"EMERGENCY\">Emergency</option>\n        </select>\n        <select\n          value={filters.status}\n          onChange={(e) => setFilters({ ...filters, status: e.target.value })}\n          style={{\n            padding: '0.5rem',\n            border: '1px solid var(--border-color)',\n            borderRadius: '6px',\n          }}\n        >\n          <option value=\"\">All Statuses</option>\n          <option value=\"DRAFT\">Draft</option>\n          <option value=\"SUBMITTED\">Submitted</option>\n          <option value=\"IN_REVIEW\">In Review</option>\n          <option value=\"APPROVED\">Approved</option>\n          <option value=\"REJECTED\">Rejected</option>\n          <option value=\"IMPLEMENTED\">Implemented</option>\n          <option value=\"CLOSED\">Closed</option>\n        </select>\n        <select\n          value={filters.priority}\n          onChange={(e) => setFilters({ ...filters, priority: e.target.value })}\n          style={{\n            padding: '0.5rem',\n            border: '1px solid var(--border-color)',\n            borderRadius: '6px',\n          }}\n        >\n          <option value=\"\">All Priorities</option>\n          <option value=\"LOW\">Low</option>\n          <option value=\"MEDIUM\">Medium</option>\n          <option value=\"HIGH\">High</option>\n          <option value=\"CRITICAL\">Critical</option>\n        </select>\n      </div>\n\n      {loading ? (\n        <div>Loading change requests...</div>\n      ) : (\n        <div\n          style={{\n            border: '1px solid var(--border-color)',\n            borderRadius: '8px',\n            overflow: 'hidden',\n          }}\n        >\n          <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n            <thead>\n              <tr style={{ backgroundColor: 'var(--bg-secondary)', borderBottom: '1px solid var(--border-color)' }}>\n                <th style={{ padding: '1rem', textAlign: 'left' }}>Change Number</th>\n                <th style={{ padding: '1rem', textAlign: 'left' }}>Title</th>\n                <th style={{ padding: '1rem', textAlign: 'left' }}>Type</th>\n                <th style={{ padding: '1rem', textAlign: 'left' }}>Status</th>\n                <th style={{ padding: '1rem', textAlign: 'left' }}>Priority</th>\n                <th style={{ padding: '1rem', textAlign: 'left' }}>Requester</th>\n                <th style={{ padding: '1rem', textAlign: 'left' }}>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {changeRequests.length === 0 ? (\n                <tr>\n                  <td colSpan={7} style={{ padding: '2rem', textAlign: 'center', color: 'var(--text-secondary)' }}>\n                    No change requests found\n                  </td>\n                </tr>\n              ) : (\n                changeRequests.map((cr) => (\n                  <tr key={cr.id} style={{ borderBottom: '1px solid var(--border-color)' }}>\n                    <td style={{ padding: '1rem' }}>{cr.changeNumber}</td>\n                    <td style={{ padding: '1rem' }}>{cr.title}</td>\n                    <td style={{ padding: '1rem' }}>{cr.type}</td>\n                    <td style={{ padding: '1rem' }}>{cr.status}</td>\n                    <td style={{ padding: '1rem' }}>{cr.priority}</td>\n                    <td style={{ padding: '1rem' }}>\n                      {`${cr.requester.firstName || ''} ${cr.requester.lastName || ''}`.trim() || cr.requester.email}\n                    </td>\n                    <td style={{ padding: '1rem' }}>\n                      <Link\n                        href={`/changes/${cr.id}`}\n                        style={{ color: 'var(--accent-primary)', textDecoration: 'none' }}\n                      >\n                        View\n                      </Link>\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}