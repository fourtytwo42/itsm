{"version":3,"sources":["../../../../app/tenant/%5Bslug%5D/tickets/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useParams } from 'next/navigation'\nimport Link from 'next/link'\n\nexport default function TenantTicketsPage() {\n  const params = useParams()\n  const slug = params?.slug as string\n\n  const [tickets, setTickets] = useState<any[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState('')\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\n\n  useEffect(() => {\n    const token = localStorage.getItem('accessToken')\n    setIsAuthenticated(!!token)\n    loadTickets()\n  }, [slug])\n\n  const loadTickets = async () => {\n    try {\n      setLoading(true)\n      const token = localStorage.getItem('accessToken')\n      const publicToken = localStorage.getItem('publicToken')\n\n      const headers: Record<string, string> = {\n        'Content-Type': 'application/json',\n      }\n\n      if (token) {\n        headers['Authorization'] = `Bearer ${token}`\n      } else if (publicToken) {\n        headers['Authorization'] = `Bearer ${publicToken}`\n      }\n\n      const response = await fetch(`/api/v1/tenants/${slug}/tickets`, {\n        headers,\n      })\n      const data = await response.json()\n\n      if (data.success) {\n        setTickets(data.data)\n      } else {\n        setError(data.error?.message || 'Failed to load tickets')\n      }\n    } catch (err) {\n      setError('An unexpected error occurred')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  if (loading) {\n    return (\n      <div style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n        <p>Loading tickets...</p>\n      </div>\n    )\n  }\n\n  return (\n    <div style={{ minHeight: '100vh', backgroundColor: 'var(--bg-primary)', color: 'var(--text-primary)' }}>\n      <div style={{ maxWidth: '1200px', margin: '0 auto', padding: '2rem' }}>\n        <Link\n          href={`/tenant/${slug}`}\n          style={{\n            color: 'var(--text-secondary)',\n            textDecoration: 'none',\n            marginBottom: '2rem',\n            display: 'inline-block',\n          }}\n        >\n          ‚Üê Back\n        </Link>\n\n        <h1 style={{ fontSize: '2rem', marginBottom: '2rem' }}>My Tickets</h1>\n\n        {error && (\n          <div style={{ padding: '1rem', backgroundColor: 'rgba(239, 68, 68, 0.1)', border: '1px solid var(--error)', borderRadius: '8px', marginBottom: '1rem', color: 'var(--error)' }}>\n            {error}\n          </div>\n        )}\n\n        {tickets.length === 0 ? (\n          <div style={{ textAlign: 'center', padding: '4rem', color: 'var(--text-secondary)' }}>\n            <p>No tickets found.</p>\n            <Link\n              href={`/tenant/${slug}/submit`}\n              style={{\n                display: 'inline-block',\n                marginTop: '1rem',\n                padding: '0.75rem 1.5rem',\n                backgroundColor: 'var(--accent-primary)',\n                color: 'white',\n                textDecoration: 'none',\n                borderRadius: '8px',\n              }}\n            >\n              Submit a Ticket\n            </Link>\n          </div>\n        ) : (\n          <div style={{ display: 'grid', gap: '1rem' }}>\n            {tickets.map((ticket) => (\n              <Link\n                key={ticket.id}\n                href={`/tenant/${slug}/tickets/${ticket.id}`}\n                style={{\n                  padding: '1.5rem',\n                  backgroundColor: 'var(--bg-secondary)',\n                  borderRadius: '8px',\n                  border: '1px solid var(--border-color)',\n                  textDecoration: 'none',\n                  color: 'var(--text-primary)',\n                  display: 'block',\n                }}\n              >\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start', marginBottom: '0.5rem' }}>\n                  <div>\n                    <h3 style={{ margin: 0, marginBottom: '0.25rem' }}>{ticket.subject}</h3>\n                    <p style={{ margin: 0, color: 'var(--text-secondary)', fontSize: '0.875rem' }}>\n                      {ticket.ticketNumber}\n                    </p>\n                  </div>\n                  <span\n                    style={{\n                      padding: '0.25rem 0.75rem',\n                      borderRadius: '12px',\n                      fontSize: '0.75rem',\n                      fontWeight: 600,\n                      backgroundColor:\n                        ticket.status === 'OPEN' || ticket.status === 'NEW'\n                          ? 'rgba(59, 130, 246, 0.1)'\n                          : ticket.status === 'RESOLVED' || ticket.status === 'CLOSED'\n                          ? 'rgba(16, 185, 129, 0.1)'\n                          : 'rgba(156, 163, 175, 0.1)',\n                      color:\n                        ticket.status === 'OPEN' || ticket.status === 'NEW'\n                          ? 'rgb(59, 130, 246)'\n                          : ticket.status === 'RESOLVED' || ticket.status === 'CLOSED'\n                          ? 'rgb(16, 185, 129)'\n                          : 'rgb(156, 163, 175)',\n                    }}\n                  >\n                    {ticket.status}\n                  </span>\n                </div>\n                <p style={{ margin: '0.5rem 0', color: 'var(--text-secondary)', fontSize: '0.875rem' }}>\n                  {ticket.description.substring(0, 150)}...\n                </p>\n                <div style={{ display: 'flex', gap: '1rem', color: 'var(--text-secondary)', fontSize: '0.75rem', marginTop: '0.5rem' }}>\n                  <span>Created: {new Date(ticket.createdAt).toLocaleDateString()}</span>\n                  {ticket.category && <span>Category: {ticket.category}</span>}\n                </div>\n              </Link>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}