{"version":3,"sources":["../../../../app/reports/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\n\ninterface AgentPerformance {\n  id: string\n  name: string\n  email: string\n  ticketsResolved: number\n  ticketsAssigned: number\n  averageResolutionTime: number\n  slaCompliance: number\n  firstResponseTime: number\n}\n\nexport default function ReportsPage() {\n  const [agents, setAgents] = useState<AgentPerformance[]>([])\n  const [loading, setLoading] = useState(true)\n  const [filters, setFilters] = useState({\n    startDate: '',\n    endDate: '',\n  })\n\n  useEffect(() => {\n    loadAgentPerformance()\n  }, [filters])\n\n  const loadAgentPerformance = async () => {\n    try {\n      setLoading(true)\n      const token = localStorage.getItem('accessToken')\n      const params = new URLSearchParams()\n      if (filters.startDate) params.append('startDate', filters.startDate)\n      if (filters.endDate) params.append('endDate', filters.endDate)\n\n      const response = await fetch(`/api/v1/analytics/agents?${params.toString()}`, {\n        headers: token ? { Authorization: `Bearer ${token}` } : {},\n      })\n\n      const data = await response.json()\n      if (data.success) {\n        setAgents(data.data.agents)\n      }\n    } catch (error) {\n      console.error('Failed to load agent performance:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleExport = async (type: string) => {\n    try {\n      const token = localStorage.getItem('accessToken')\n      const params = new URLSearchParams()\n      params.append('type', type)\n      params.append('format', 'csv')\n      if (filters.startDate) params.append('startDate', filters.startDate)\n      if (filters.endDate) params.append('endDate', filters.endDate)\n\n      const response = await fetch(`/api/v1/analytics/export?${params.toString()}`, {\n        headers: token ? { Authorization: `Bearer ${token}` } : {},\n      })\n\n      const blob = await response.blob()\n      const url = window.URL.createObjectURL(blob)\n      const a = document.createElement('a')\n      a.href = url\n      a.download = `${type}-report-${new Date().toISOString().split('T')[0]}.csv`\n      document.body.appendChild(a)\n      a.click()\n      window.URL.revokeObjectURL(url)\n      document.body.removeChild(a)\n    } catch (error) {\n      console.error('Failed to export report:', error)\n    }\n  }\n\n  return (\n    <div style={{ padding: '2rem', maxWidth: '1400px', margin: '0 auto' }}>\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '2rem' }}>\n        <h1 style={{ margin: 0 }}>Reports</h1>\n        <div style={{ display: 'flex', gap: '1rem' }}>\n          <button\n            onClick={() => handleExport('tickets')}\n            style={{\n              padding: '0.5rem 1rem',\n              backgroundColor: 'var(--accent-primary)',\n              color: 'white',\n              border: 'none',\n              borderRadius: '6px',\n              cursor: 'pointer',\n            }}\n          >\n            Export Tickets\n          </button>\n          <button\n            onClick={() => handleExport('agents')}\n            style={{\n              padding: '0.5rem 1rem',\n              backgroundColor: 'var(--accent-primary)',\n              color: 'white',\n              border: 'none',\n              borderRadius: '6px',\n              cursor: 'pointer',\n            }}\n          >\n            Export Agents\n          </button>\n          <button\n            onClick={() => handleExport('sla')}\n            style={{\n              padding: '0.5rem 1rem',\n              backgroundColor: 'var(--accent-primary)',\n              color: 'white',\n              border: 'none',\n              borderRadius: '6px',\n              cursor: 'pointer',\n            }}\n          >\n            Export SLA\n          </button>\n        </div>\n      </div>\n\n      <div style={{ marginBottom: '2rem', display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\n        <input\n          type=\"date\"\n          placeholder=\"Start Date\"\n          value={filters.startDate}\n          onChange={(e) => setFilters({ ...filters, startDate: e.target.value })}\n          style={{\n            padding: '0.5rem',\n            border: '1px solid var(--border-color)',\n            borderRadius: '6px',\n          }}\n        />\n        <input\n          type=\"date\"\n          placeholder=\"End Date\"\n          value={filters.endDate}\n          onChange={(e) => setFilters({ ...filters, endDate: e.target.value })}\n          style={{\n            padding: '0.5rem',\n            border: '1px solid var(--border-color)',\n            borderRadius: '6px',\n          }}\n        />\n      </div>\n\n      <div style={{ marginBottom: '2rem' }}>\n        <h2 style={{ marginBottom: '1rem' }}>Agent Performance</h2>\n        {loading ? (\n          <div>Loading agent performance...</div>\n        ) : (\n          <div\n            style={{\n              border: '1px solid var(--border-color)',\n              borderRadius: '8px',\n              overflow: 'hidden',\n            }}\n          >\n            <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n              <thead>\n                <tr style={{ backgroundColor: 'var(--bg-secondary)', borderBottom: '1px solid var(--border-color)' }}>\n                  <th style={{ padding: '1rem', textAlign: 'left' }}>Agent</th>\n                  <th style={{ padding: '1rem', textAlign: 'left' }}>Tickets Resolved</th>\n                  <th style={{ padding: '1rem', textAlign: 'left' }}>Tickets Assigned</th>\n                  <th style={{ padding: '1rem', textAlign: 'left' }}>Avg Resolution (min)</th>\n                  <th style={{ padding: '1rem', textAlign: 'left' }}>Avg First Response (min)</th>\n                  <th style={{ padding: '1rem', textAlign: 'left' }}>SLA Compliance</th>\n                </tr>\n              </thead>\n              <tbody>\n                {agents.length === 0 ? (\n                  <tr>\n                    <td colSpan={6} style={{ padding: '2rem', textAlign: 'center', color: 'var(--text-secondary)' }}>\n                      No agent performance data found\n                    </td>\n                  </tr>\n                ) : (\n                  agents.map((agent) => (\n                    <tr key={agent.id} style={{ borderBottom: '1px solid var(--border-color)' }}>\n                      <td style={{ padding: '1rem' }}>{agent.name}</td>\n                      <td style={{ padding: '1rem' }}>{agent.ticketsResolved}</td>\n                      <td style={{ padding: '1rem' }}>{agent.ticketsAssigned}</td>\n                      <td style={{ padding: '1rem' }}>{agent.averageResolutionTime}</td>\n                      <td style={{ padding: '1rem' }}>{agent.firstResponseTime}</td>\n                      <td style={{ padding: '1rem' }}>\n                        <span\n                          style={{\n                            color: agent.slaCompliance >= 90 ? 'green' : agent.slaCompliance >= 75 ? 'orange' : 'red',\n                          }}\n                        >\n                          {agent.slaCompliance.toFixed(1)}%\n                        </span>\n                      </td>\n                    </tr>\n                  ))\n                )}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}