{"version":3,"sources":["../../../../app/assets/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport Link from 'next/link'\nimport OrganizationContext from '@/components/OrganizationContext'\n\ninterface Asset {\n  id: string\n  assetNumber: string\n  name: string\n  type: string\n  status: string\n  assignedTo?: {\n    id: string\n    email: string\n    firstName?: string\n    lastName?: string\n  }\n  customAssetType?: {\n    id: string\n    name: string\n  }\n}\n\nexport default function AssetsPage() {\n  const [assets, setAssets] = useState<Asset[]>([])\n  const [loading, setLoading] = useState(true)\n  const [filters, setFilters] = useState({\n    type: '',\n    status: '',\n    search: '',\n  })\n\n  useEffect(() => {\n    loadAssets()\n  }, [filters])\n\n  const loadAssets = async () => {\n    try {\n      setLoading(true)\n      const token = localStorage.getItem('accessToken')\n      const params = new URLSearchParams()\n      if (filters.type) params.append('type', filters.type)\n      if (filters.status) params.append('status', filters.status)\n      if (filters.search) params.append('search', filters.search)\n\n      const response = await fetch(`/api/v1/assets?${params.toString()}`, {\n        headers: token ? { Authorization: `Bearer ${token}` } : {},\n      })\n\n      const data = await response.json()\n      if (data.success) {\n        setAssets(data.data.assets)\n      }\n    } catch (error) {\n      console.error('Failed to load assets:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleExport = async () => {\n    try {\n      const token = localStorage.getItem('accessToken')\n      const params = new URLSearchParams()\n      if (filters.type) params.append('type', filters.type)\n      if (filters.status) params.append('status', filters.status)\n      if (filters.search) params.append('search', filters.search)\n      params.append('export', 'csv')\n\n      const response = await fetch(`/api/v1/assets?${params.toString()}`, {\n        headers: token ? { Authorization: `Bearer ${token}` } : {},\n      })\n\n      const blob = await response.blob()\n      const url = window.URL.createObjectURL(blob)\n      const a = document.createElement('a')\n      a.href = url\n      a.download = `assets-${new Date().toISOString().split('T')[0]}.csv`\n      document.body.appendChild(a)\n      a.click()\n      window.URL.revokeObjectURL(url)\n      document.body.removeChild(a)\n    } catch (error) {\n      console.error('Failed to export assets:', error)\n    }\n  }\n\n  return (\n    <div style={{ padding: '2rem', maxWidth: '1400px', margin: '0 auto' }}>\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '2rem' }}>\n        <h1 style={{ margin: 0 }}>Assets (CMDB)</h1>\n        <div style={{ display: 'flex', gap: '1rem' }}>\n          <button\n            onClick={handleExport}\n            style={{\n              padding: '0.5rem 1rem',\n              backgroundColor: 'var(--accent-primary)',\n              color: 'white',\n              border: 'none',\n              borderRadius: '6px',\n              cursor: 'pointer',\n            }}\n          >\n            Export CSV\n          </button>\n          <Link\n            href=\"/assets/new\"\n            style={{\n              padding: '0.5rem 1rem',\n              backgroundColor: 'var(--accent-primary)',\n              color: 'white',\n              textDecoration: 'none',\n              borderRadius: '6px',\n            }}\n          >\n            New Asset\n          </Link>\n        </div>\n      </div>\n\n      <div style={{ marginBottom: '2rem', display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\n        <input\n          type=\"text\"\n          placeholder=\"Search assets...\"\n          value={filters.search}\n          onChange={(e) => setFilters({ ...filters, search: e.target.value })}\n          style={{\n            padding: '0.5rem',\n            border: '1px solid var(--border-color)',\n            borderRadius: '6px',\n            flex: 1,\n            minWidth: '200px',\n          }}\n        />\n        <select\n          value={filters.type}\n          onChange={(e) => setFilters({ ...filters, type: e.target.value })}\n          style={{\n            padding: '0.5rem',\n            border: '1px solid var(--border-color)',\n            borderRadius: '6px',\n          }}\n        >\n          <option value=\"\">All Types</option>\n          <option value=\"HARDWARE\">Hardware</option>\n          <option value=\"SOFTWARE\">Software</option>\n          <option value=\"NETWORK_DEVICE\">Network Device</option>\n          <option value=\"CLOUD_RESOURCE\">Cloud Resource</option>\n        </select>\n        <select\n          value={filters.status}\n          onChange={(e) => setFilters({ ...filters, status: e.target.value })}\n          style={{\n            padding: '0.5rem',\n            border: '1px solid var(--border-color)',\n            borderRadius: '6px',\n          }}\n        >\n          <option value=\"\">All Statuses</option>\n          <option value=\"ACTIVE\">Active</option>\n          <option value=\"INACTIVE\">Inactive</option>\n          <option value=\"RETIRED\">Retired</option>\n          <option value=\"MAINTENANCE\">Maintenance</option>\n        </select>\n      </div>\n\n      {loading ? (\n        <div>Loading assets...</div>\n      ) : (\n        <div\n          style={{\n            border: '1px solid var(--border-color)',\n            borderRadius: '8px',\n            overflow: 'hidden',\n          }}\n        >\n          <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n            <thead>\n              <tr style={{ backgroundColor: 'var(--bg-secondary)', borderBottom: '1px solid var(--border-color)' }}>\n                <th style={{ padding: '1rem', textAlign: 'left' }}>Asset Number</th>\n                <th style={{ padding: '1rem', textAlign: 'left' }}>Name</th>\n                <th style={{ padding: '1rem', textAlign: 'left' }}>Type</th>\n                <th style={{ padding: '1rem', textAlign: 'left' }}>Status</th>\n                <th style={{ padding: '1rem', textAlign: 'left' }}>Assigned To</th>\n                <th style={{ padding: '1rem', textAlign: 'left' }}>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {assets.length === 0 ? (\n                <tr>\n                  <td colSpan={6} style={{ padding: '2rem', textAlign: 'center', color: 'var(--text-secondary)' }}>\n                    No assets found\n                  </td>\n                </tr>\n              ) : (\n                assets.map((asset) => (\n                  <tr key={asset.id} style={{ borderBottom: '1px solid var(--border-color)' }}>\n                    <td style={{ padding: '1rem' }}>{asset.assetNumber}</td>\n                    <td style={{ padding: '1rem' }}>{asset.name}</td>\n                    <td style={{ padding: '1rem' }}>{asset.customAssetType?.name || asset.type || 'N/A'}</td>\n                    <td style={{ padding: '1rem' }}>{asset.status}</td>\n                    <td style={{ padding: '1rem' }}>\n                      {asset.assignedTo\n                        ? `${asset.assignedTo.firstName || ''} ${asset.assignedTo.lastName || ''}`.trim() ||\n                          asset.assignedTo.email\n                        : 'Unassigned'}\n                    </td>\n                    <td style={{ padding: '1rem' }}>\n                      <Link\n                        href={`/assets/${asset.id}`}\n                        style={{ color: 'var(--accent-primary)', textDecoration: 'none' }}\n                      >\n                        View\n                      </Link>\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}