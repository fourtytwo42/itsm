{"version":3,"sources":["../../../../app/manager/agents/new/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\n\ninterface Tenant {\n  id: string\n  name: string\n  slug: string\n}\n\nexport default function ManagerNewAgentPage() {\n  const router = useRouter()\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState('')\n  const [tenants, setTenants] = useState<Tenant[]>([])\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n    confirmPassword: '',\n    firstName: '',\n    lastName: '',\n    tenantId: '',\n    role: 'AGENT' as 'AGENT' | 'END_USER',\n  })\n\n  useEffect(() => {\n    loadTenants()\n  }, [])\n\n  const loadTenants = async () => {\n    try {\n      const token = localStorage.getItem('accessToken')\n      const response = await fetch('/api/v1/manager/tenants', {\n        headers: token ? { Authorization: `Bearer ${token}` } : {},\n      })\n\n      const data = await response.json()\n\n      if (data.success) {\n        setTenants(data.data.tenants || data.data || [])\n      }\n    } catch (err) {\n      // Ignore errors\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setLoading(true)\n    setError('')\n\n    if (formData.password !== formData.confirmPassword) {\n      setError('Passwords do not match')\n      setLoading(false)\n      return\n    }\n\n    if (formData.password.length < 8) {\n      setError('Password must be at least 8 characters')\n      setLoading(false)\n      return\n    }\n\n    if (!formData.tenantId) {\n      setError('Please select a tenant')\n      setLoading(false)\n      return\n    }\n\n    try {\n      const token = localStorage.getItem('accessToken')\n      const response = await fetch('/api/v1/manager/agents', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          email: formData.email,\n          password: formData.password,\n          firstName: formData.firstName || undefined,\n          lastName: formData.lastName || undefined,\n          tenantId: formData.tenantId,\n          roles: [formData.role],\n        }),\n      })\n\n      const data = await response.json()\n\n      if (data.success) {\n        router.push(`/manager/agents/${data.data.agent.id || data.data.id}`)\n      } else {\n        setError(data.error?.message || 'Failed to register agent')\n      }\n    } catch (err) {\n      setError('An unexpected error occurred')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div style={{ padding: '2rem', maxWidth: '800px', margin: '0 auto' }}>\n      <h1 style={{ fontSize: '2rem', marginBottom: '2rem' }}>Register New Agent</h1>\n\n      {error && (\n        <div\n          style={{\n            padding: '1rem',\n            backgroundColor: 'rgba(239, 68, 68, 0.1)',\n            color: 'var(--error)',\n            borderRadius: '8px',\n            marginBottom: '1.5rem',\n          }}\n        >\n          {error}\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit} style={{ display: 'grid', gap: '1.5rem' }}>\n        <div>\n          <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: 500 }}>\n            Email *\n          </label>\n          <input\n            type=\"email\"\n            required\n            value={formData.email}\n            onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n            style={{\n              width: '100%',\n              padding: '0.75rem',\n              borderRadius: '8px',\n              border: '1px solid var(--border-color)',\n              backgroundColor: 'var(--bg-primary)',\n              color: 'var(--text-primary)',\n            }}\n          />\n        </div>\n\n        <div>\n          <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: 500 }}>\n            Password *\n          </label>\n          <input\n            type=\"password\"\n            required\n            minLength={8}\n            value={formData.password}\n            onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n            style={{\n              width: '100%',\n              padding: '0.75rem',\n              borderRadius: '8px',\n              border: '1px solid var(--border-color)',\n              backgroundColor: 'var(--bg-primary)',\n              color: 'var(--text-primary)',\n            }}\n          />\n          <p style={{ fontSize: '0.75rem', color: 'var(--text-secondary)', marginTop: '0.25rem' }}>\n            Minimum 8 characters\n          </p>\n        </div>\n\n        <div>\n          <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: 500 }}>\n            Confirm Password *\n          </label>\n          <input\n            type=\"password\"\n            required\n            minLength={8}\n            value={formData.confirmPassword}\n            onChange={(e) => setFormData({ ...formData, confirmPassword: e.target.value })}\n            style={{\n              width: '100%',\n              padding: '0.75rem',\n              borderRadius: '8px',\n              border: '1px solid var(--border-color)',\n              backgroundColor: 'var(--bg-primary)',\n              color: 'var(--text-primary)',\n            }}\n          />\n        </div>\n\n        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>\n          <div>\n            <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: 500 }}>\n              First Name\n            </label>\n            <input\n              type=\"text\"\n              value={formData.firstName}\n              onChange={(e) => setFormData({ ...formData, firstName: e.target.value })}\n              style={{\n                width: '100%',\n                padding: '0.75rem',\n                borderRadius: '8px',\n                border: '1px solid var(--border-color)',\n                backgroundColor: 'var(--bg-primary)',\n                color: 'var(--text-primary)',\n              }}\n            />\n          </div>\n\n          <div>\n            <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: 500 }}>\n              Last Name\n            </label>\n            <input\n              type=\"text\"\n              value={formData.lastName}\n              onChange={(e) => setFormData({ ...formData, lastName: e.target.value })}\n              style={{\n                width: '100%',\n                padding: '0.75rem',\n                borderRadius: '8px',\n                border: '1px solid var(--border-color)',\n                backgroundColor: 'var(--bg-primary)',\n                color: 'var(--text-primary)',\n              }}\n            />\n          </div>\n        </div>\n\n        <div>\n          <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: 500 }}>\n            Tenant *\n          </label>\n          <select\n            required\n            value={formData.tenantId}\n            onChange={(e) => setFormData({ ...formData, tenantId: e.target.value })}\n            style={{\n              width: '100%',\n              padding: '0.75rem',\n              borderRadius: '8px',\n              border: '1px solid var(--border-color)',\n              backgroundColor: 'var(--bg-primary)',\n              color: 'var(--text-primary)',\n            }}\n          >\n            <option value=\"\">Select a tenant</option>\n            {tenants.map((tenant) => (\n              <option key={tenant.id} value={tenant.id}>\n                {tenant.name}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div>\n          <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: 500 }}>\n            Role *\n          </label>\n          <select\n            required\n            value={formData.role}\n            onChange={(e) => setFormData({ ...formData, role: e.target.value as 'AGENT' | 'END_USER' })}\n            style={{\n              width: '100%',\n              padding: '0.75rem',\n              borderRadius: '8px',\n              border: '1px solid var(--border-color)',\n              backgroundColor: 'var(--bg-primary)',\n              color: 'var(--text-primary)',\n            }}\n          >\n            <option value=\"AGENT\">Agent</option>\n            <option value=\"END_USER\">End User</option>\n          </select>\n        </div>\n\n        <div style={{ display: 'flex', gap: '1rem', marginTop: '1rem' }}>\n          <button\n            type=\"submit\"\n            disabled={loading}\n            style={{\n              padding: '0.75rem 1.5rem',\n              backgroundColor: 'var(--accent-primary)',\n              color: 'white',\n              border: 'none',\n              borderRadius: '8px',\n              cursor: loading ? 'not-allowed' : 'pointer',\n              fontSize: '0.875rem',\n              fontWeight: 600,\n              opacity: loading ? 0.6 : 1,\n            }}\n          >\n            {loading ? 'Registering...' : 'Register Agent'}\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => router.back()}\n            style={{\n              padding: '0.75rem 1.5rem',\n              backgroundColor: 'var(--bg-tertiary)',\n              color: 'var(--text-primary)',\n              border: 'none',\n              borderRadius: '8px',\n              cursor: 'pointer',\n              fontSize: '0.875rem',\n            }}\n          >\n            Cancel\n          </button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}