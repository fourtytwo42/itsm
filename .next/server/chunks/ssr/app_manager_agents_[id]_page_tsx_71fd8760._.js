module.exports=[80038,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(){let a=(0,d.useRouter)(),e=(0,d.useParams)(),f=e?.id,[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)({email:"",firstName:"",lastName:"",isActive:!0});(0,c.useEffect)(()=>{s()},[f]);let s=async()=>{try{j(!0);let a=localStorage.getItem("accessToken"),b=await fetch(`/api/v1/manager/agents/${f}`,{headers:a?{Authorization:`Bearer ${a}`}:{}}),c=await b.json();c.success?(h(c.data.agent||c.data),r({email:c.data.agent?.email||c.data.email,firstName:c.data.agent?.firstName||c.data.firstName||"",lastName:c.data.agent?.lastName||c.data.lastName||"",isActive:c.data.agent?.isActive??c.data.isActive??!0})):n(c.error?.message||"Failed to load agent")}catch(a){n("An unexpected error occurred")}finally{j(!1)}},t=async()=>{l(!0),n("");try{let a=localStorage.getItem("accessToken"),b=await fetch(`/api/v1/manager/agents/${f}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(q)}),c=await b.json();c.success?s():n(c.error?.message||"Failed to update agent")}catch(a){n("An unexpected error occurred")}finally{l(!1)}},u=async()=>{if(confirm("Are you sure you want to reset this agent's password? A temporary password will be generated."))try{let a=localStorage.getItem("accessToken"),b=await fetch(`/api/v1/manager/agents/${f}/reset-password`,{method:"POST",headers:{Authorization:`Bearer ${a}`}}),c=await b.json();c.success?p(c.data.temporaryPassword):n(c.error?.message||"Failed to reset password")}catch(a){n("An unexpected error occurred")}},v=async()=>{if(confirm(`Are you sure you want to ${q.isActive?"disable":"enable"} this agent?`))try{let a=localStorage.getItem("accessToken"),b=await fetch(`/api/v1/manager/agents/${f}/disable`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({disabled:q.isActive})}),c=await b.json();c.success?(r({...q,isActive:!q.isActive}),s()):n(c.error?.message||"Failed to update agent")}catch(a){n("An unexpected error occurred")}},w=async()=>{if(confirm("Are you sure you want to delete this agent? This action cannot be undone."))try{let b=localStorage.getItem("accessToken"),c=await fetch(`/api/v1/manager/agents/${f}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}}),d=await c.json();d.success?a.push("/manager/agents"):n(d.error?.message||"Failed to delete agent")}catch(a){n("An unexpected error occurred")}};return i?(0,b.jsx)("div",{style:{padding:"2rem"},children:(0,b.jsx)("p",{children:"Loading agent..."})}):g?(0,b.jsxs)("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,b.jsx)("h1",{style:{fontSize:"2rem",margin:0},children:"Manage Agent"}),(0,b.jsx)("button",{onClick:()=>a.back(),style:{padding:"0.5rem 1rem",backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",border:"none",borderRadius:"0.5rem",cursor:"pointer"},children:"Back"})]}),m&&(0,b.jsx)("div",{style:{padding:"1rem",backgroundColor:"var(--error-bg)",color:"var(--error-text)",borderRadius:"0.5rem",marginBottom:"1rem"},children:m}),o&&(0,b.jsxs)("div",{style:{padding:"1rem",backgroundColor:"var(--success-bg)",color:"var(--success-text)",borderRadius:"0.5rem",marginBottom:"1rem"},children:[(0,b.jsx)("p",{style:{margin:0,fontWeight:600},children:"Temporary Password Generated:"}),(0,b.jsx)("p",{style:{margin:"0.5rem 0 0 0",fontFamily:"monospace",fontSize:"1.25rem"},children:o}),(0,b.jsx)("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.875rem"},children:"Share this password with the agent. They should change it after logging in."})]}),(0,b.jsxs)("div",{style:{display:"grid",gap:"1.5rem",marginBottom:"2rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Email"}),(0,b.jsx)("input",{type:"email",value:q.email,onChange:a=>r({...q,email:a.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}})]}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"First Name"}),(0,b.jsx)("input",{type:"text",value:q.firstName,onChange:a=>r({...q,firstName:a.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Last Name"}),(0,b.jsx)("input",{type:"text",value:q.lastName,onChange:a=>r({...q,lastName:a.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}})]})]}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,b.jsx)("input",{type:"checkbox",checked:q.isActive,onChange:a=>r({...q,isActive:a.target.checked}),style:{width:"18px",height:"18px"}}),(0,b.jsx)("span",{children:"Active"})]})})]}),(0,b.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[(0,b.jsx)("button",{onClick:t,disabled:k,style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--accent-primary)",color:"white",border:"none",borderRadius:"8px",cursor:k?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:600,opacity:k?.6:1},children:k?"Saving...":"Save Changes"}),(0,b.jsx)("button",{onClick:u,style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--warning-bg)",color:"var(--warning-text)",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem"},children:"Reset Password"}),(0,b.jsx)("button",{onClick:v,style:{padding:"0.75rem 1.5rem",backgroundColor:q.isActive?"var(--warning-bg)":"var(--success-bg)",color:q.isActive?"var(--warning-text)":"var(--success-text)",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem"},children:q.isActive?"Disable":"Enable"}),(0,b.jsx)("button",{onClick:w,style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--error-bg)",color:"var(--error-text)",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem"},children:"Delete Agent"})]})]}):(0,b.jsx)("div",{style:{padding:"2rem"},children:(0,b.jsx)("p",{children:"Agent not found"})})}a.s(["default",()=>e])}];

//# sourceMappingURL=app_manager_agents_%5Bid%5D_page_tsx_71fd8760._.js.map