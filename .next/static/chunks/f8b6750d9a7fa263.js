(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,85143,e=>{"use strict";var r=e.i(18050),a=e.i(71645),t=e.i(18566);function o(){let e=(0,t.useRouter)(),[o,i]=(0,a.useState)(!1),[s,d]=(0,a.useState)(""),[l,n]=(0,a.useState)([]),[c,m]=(0,a.useState)({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",tenantId:"",role:"AGENT"});(0,a.useEffect)(()=>{p()},[]);let p=async()=>{try{let e=localStorage.getItem("accessToken"),r=await fetch("/api/v1/manager/tenants",{headers:e?{Authorization:`Bearer ${e}`}:{}}),a=await r.json();a.success&&n(a.data.tenants||a.data||[])}catch(e){}},g=async r=>{if(r.preventDefault(),i(!0),d(""),c.password!==c.confirmPassword){d("Passwords do not match"),i(!1);return}if(c.password.length<8){d("Password must be at least 8 characters"),i(!1);return}if(!c.tenantId){d("Please select a tenant"),i(!1);return}try{let r=localStorage.getItem("accessToken"),a=await fetch("/api/v1/manager/agents",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({email:c.email,password:c.password,firstName:c.firstName||void 0,lastName:c.lastName||void 0,tenantId:c.tenantId,roles:[c.role]})}),t=await a.json();t.success?e.push(`/manager/agents/${t.data.agent.id||t.data.id}`):d(t.error?.message||"Failed to register agent")}catch(e){d("An unexpected error occurred")}finally{i(!1)}};return(0,r.jsxs)("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto"},children:[(0,r.jsx)("h1",{style:{fontSize:"2rem",marginBottom:"2rem"},children:"Register New Agent"}),s&&(0,r.jsx)("div",{style:{padding:"1rem",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"var(--error)",borderRadius:"8px",marginBottom:"1.5rem"},children:s}),(0,r.jsxs)("form",{onSubmit:g,style:{display:"grid",gap:"1.5rem"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Email *"}),(0,r.jsx)("input",{type:"email",required:!0,value:c.email,onChange:e=>m({...c,email:e.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Password *"}),(0,r.jsx)("input",{type:"password",required:!0,minLength:8,value:c.password,onChange:e=>m({...c,password:e.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}}),(0,r.jsx)("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:"Minimum 8 characters"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Confirm Password *"}),(0,r.jsx)("input",{type:"password",required:!0,minLength:8,value:c.confirmPassword,onChange:e=>m({...c,confirmPassword:e.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"First Name"}),(0,r.jsx)("input",{type:"text",value:c.firstName,onChange:e=>m({...c,firstName:e.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Last Name"}),(0,r.jsx)("input",{type:"text",value:c.lastName,onChange:e=>m({...c,lastName:e.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Tenant *"}),(0,r.jsxs)("select",{required:!0,value:c.tenantId,onChange:e=>m({...c,tenantId:e.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"},children:[(0,r.jsx)("option",{value:"",children:"Select a tenant"}),l.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Role *"}),(0,r.jsxs)("select",{required:!0,value:c.role,onChange:e=>m({...c,role:e.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"},children:[(0,r.jsx)("option",{value:"AGENT",children:"Agent"}),(0,r.jsx)("option",{value:"END_USER",children:"End User"})]})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[(0,r.jsx)("button",{type:"submit",disabled:o,style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--accent-primary)",color:"white",border:"none",borderRadius:"8px",cursor:o?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:600,opacity:o?.6:1},children:o?"Registering...":"Register Agent"}),(0,r.jsx)("button",{type:"button",onClick:()=>e.back(),style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem"},children:"Cancel"})]})]})]})}e.s(["default",()=>o])}]);