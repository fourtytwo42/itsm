(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,89954,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(18566),s=e.i(22016);let o=[{email:"admin@demo.com",password:"demo123",label:"Admin"},{email:"manager@demo.com",password:"demo123",label:"IT Manager"},{email:"agent@demo.com",password:"demo123",label:"Agent"},{email:"user@demo.com",password:"demo123",label:"End User"}];function n(){(0,a.useRouter)();let[e,n]=(0,t.useState)(""),[i,l]=(0,t.useState)(""),[d,m]=(0,t.useState)(""),[c,u]=(0,t.useState)(!1),g=async r=>{r.preventDefault(),m(""),u(!0);try{let r,t=await fetch("/api/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:i})});try{r=await t.json()}catch(e){m("Invalid response from server"),u(!1);return}if(!t.ok||!r.success){m(r.error?.message||`Login failed: ${t.statusText||"Unknown error"}`),u(!1);return}if(!r.data?.accessToken||!r.data?.refreshToken||!r.data?.user){m("Invalid response structure from server"),u(!1);return}try{localStorage.setItem("accessToken",r.data.accessToken),localStorage.setItem("refreshToken",r.data.refreshToken),localStorage.setItem("user",JSON.stringify(r.data.user))}catch(e){m("Failed to save login credentials"),u(!1);return}u(!1),window.location.href="/dashboard"}catch(e){console.error("Login error:",e),m(e.message||"An unexpected error occurred. Please try again."),u(!1)}};return(0,r.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:(0,r.jsxs)("div",{className:"card",style:{width:"100%",maxWidth:"400px"},children:[(0,r.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem",textAlign:"center"},children:"ITSM Helpdesk"}),(0,r.jsx)("p",{style:{textAlign:"center",color:"var(--text-secondary)",marginBottom:"2rem"},children:"Sign in to your account"}),d&&(0,r.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--error)"},children:d}),(0,r.jsxs)("form",{onSubmit:g,children:[(0,r.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,r.jsx)("label",{className:"label",htmlFor:"email",children:"Email"}),(0,r.jsx)("input",{id:"email",type:"email",className:"input",value:e,onChange:e=>n(e.target.value),required:!0,disabled:c})]}),(0,r.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,r.jsx)("label",{className:"label",htmlFor:"password",children:"Password"}),(0,r.jsx)("input",{id:"password",type:"password",className:"input",value:i,onChange:e=>l(e.target.value),required:!0,disabled:c})]}),(0,r.jsx)("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",marginBottom:"1rem"},disabled:c,children:c?"Signing in...":"Sign in"})]}),(0,r.jsxs)("div",{style:{marginTop:"1.5rem",marginBottom:"1rem"},children:[(0,r.jsx)("p",{style:{textAlign:"center",color:"var(--text-secondary)",fontSize:"0.875rem",marginBottom:"0.75rem"},children:"Demo Accounts (Click to auto-fill):"}),(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:o.map(e=>(0,r.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{var r,t;return r=e.email,t=e.password,void(n(r),l(t))},style:{fontSize:"0.875rem",padding:"0.5rem 1rem"},children:e.label},e.email))})]}),(0,r.jsx)("div",{style:{textAlign:"center",marginTop:"1.5rem"},children:(0,r.jsx)(s.default,{href:"/register",style:{color:"var(--accent-primary)",fontSize:"0.875rem"},children:"Don't have an account? Sign up"})}),(0,r.jsx)("div",{style:{textAlign:"center",marginTop:"0.5rem"},children:(0,r.jsx)(s.default,{href:"/reset-password",style:{color:"var(--text-secondary)",fontSize:"0.875rem"},children:"Forgot password?"})})]})})}e.s(["default",()=>n])}]);