module.exports=[84739,3735,a=>{"use strict";var b=a.i(72131);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))});a.s(["ChevronUpIcon",0,c],84739);let d=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))});a.s(["ChevronDownIcon",0,d],3735)},36216,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(84739),f=a.i(3735);function g({tickets:a,onStatusChange:g,showQuickActions:h=!0,onRefresh:i,disableClientSort:j=!1,onSortChange:k,currentSortField:l,currentSortOrder:m}){let[n,o]=(0,c.useState)("createdAt"),[p,q]=(0,c.useState)("desc"),r=j&&void 0!==l?l:n,s=j&&void 0!==m?m:p,[t,u]=(0,c.useState)({}),v=async(a,b)=>{if(g){u(b=>({...b,[a]:!0}));try{await g(a,b),i&&i()}catch(a){console.error("Failed to update status:",a)}finally{u(b=>({...b,[a]:!1}))}}},w=j?a:[...a].sort((a,b)=>{let c,d;switch(r){case"ticketNumber":c=a.ticketNumber,d=b.ticketNumber;break;case"subject":c=a.subject,d=b.subject;break;case"status":c=a.status,d=b.status;break;case"priority":c=a.priority,d=b.priority;break;case"createdAt":default:c=new Date(a.createdAt).getTime(),d=new Date(b.createdAt).getTime();break;case"updatedAt":c=new Date(a.updatedAt).getTime(),d=new Date(b.updatedAt).getTime();break;case"requester":c=a.requester?.email||a.requesterEmail||"",d=b.requester?.email||b.requesterEmail||"";break;case"assignee":c=a.assignee?.email||"",d=b.assignee?.email||""}return c<d?"asc"===s?-1:1:c>d?"asc"===s?1:-1:0}),x=({field:a,label:c})=>(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem",cursor:"pointer",userSelect:"none",position:"relative"},onClick:()=>{j&&k?k(a,r===a&&"desc"===s?"asc":"desc"):r===a?q("asc"===p?"desc":"asc"):(o(a),q("desc"))},children:(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[c,r===a&&("asc"===s?(0,b.jsx)(e.ChevronUpIcon,{style:{width:"0.875rem",height:"0.875rem"}}):(0,b.jsx)(f.ChevronDownIcon,{style:{width:"0.875rem",height:"0.875rem"}}))]})});return 0===a.length?(0,b.jsx)("div",{className:"card",style:{padding:"3rem",textAlign:"center",color:"var(--text-secondary)"},children:"No tickets found."}):(0,b.jsx)("div",{className:"card",style:{overflowX:"auto",padding:0},children:(0,b.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{style:{borderBottom:"2px solid var(--border-color)",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)(x,{field:"ticketNumber",label:"Ticket #"}),(0,b.jsx)(x,{field:"subject",label:"Subject"}),(0,b.jsx)(x,{field:"requester",label:"Requester"}),(0,b.jsx)(x,{field:"assignee",label:"Assignee"}),(0,b.jsx)(x,{field:"status",label:"Status"}),(0,b.jsx)(x,{field:"priority",label:"Priority"}),(0,b.jsx)(x,{field:"createdAt",label:"Created"}),h&&(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"right",fontWeight:600,fontSize:"0.875rem"},children:"Actions"})]})}),(0,b.jsx)("tbody",{children:w.map(a=>(0,b.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[(0,b.jsx)("td",{style:{padding:"1rem"},children:(0,b.jsx)(d.default,{href:`/tickets/${a.id}`,style:{color:"var(--accent-primary)",textDecoration:"none",fontWeight:500},children:a.ticketNumber})}),(0,b.jsx)("td",{style:{padding:"1rem"},children:(0,b.jsx)(d.default,{href:`/tickets/${a.id}`,style:{color:"var(--text-primary)",textDecoration:"none"},children:a.subject})}),(0,b.jsx)("td",{style:{padding:"1rem",color:"var(--text-secondary)"},children:a.requester?[a.requester.firstName,a.requester.lastName].filter(Boolean).join(" ")||a.requester.email:a.requesterName||a.requesterEmail||"Unknown"}),(0,b.jsx)("td",{style:{padding:"1rem",color:"var(--text-secondary)"},children:a.assignee?[a.assignee.firstName,a.assignee.lastName].filter(Boolean).join(" ")||a.assignee.email:"Unassigned"}),(0,b.jsx)("td",{style:{padding:"1rem"},children:(0,b.jsx)("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:(a=>{switch(a){case"NEW":return"rgba(59, 130, 246, 0.15)";case"IN_PROGRESS":return"rgba(234, 179, 8, 0.15)";case"RESOLVED":return"rgba(34, 197, 94, 0.15)";case"CLOSED":return"rgba(107, 114, 128, 0.15)";default:return"var(--bg-tertiary)"}})(a.status),color:(a=>{switch(a){case"NEW":return"rgb(59, 130, 246)";case"IN_PROGRESS":return"rgb(234, 179, 8)";case"RESOLVED":return"rgb(34, 197, 94)";case"CLOSED":return"rgb(107, 114, 128)";default:return"var(--text-secondary)"}})(a.status),borderRadius:"4px",fontSize:"0.75rem",fontWeight:500,textTransform:"capitalize"},children:a.status.replace("_"," ")})}),(0,b.jsx)("td",{style:{padding:"1rem"},children:(0,b.jsx)("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:(a=>{switch(a){case"LOW":return"rgba(34, 197, 94, 0.15)";case"MEDIUM":return"rgba(234, 179, 8, 0.15)";case"HIGH":return"rgba(251, 146, 60, 0.15)";case"CRITICAL":return"rgba(239, 68, 68, 0.15)";default:return"var(--bg-tertiary)"}})(a.priority),color:(a=>{switch(a){case"LOW":return"rgb(34, 197, 94)";case"MEDIUM":return"rgb(234, 179, 8)";case"HIGH":return"rgb(251, 146, 60)";case"CRITICAL":return"rgb(239, 68, 68)";default:return"var(--text-secondary)"}})(a.priority),borderRadius:"4px",fontSize:"0.75rem",fontWeight:500,textTransform:"capitalize"},children:a.priority})}),(0,b.jsxs)("td",{style:{padding:"1rem",color:"var(--text-secondary)",fontSize:"0.875rem"},children:[new Date(a.createdAt).toLocaleDateString()," ",new Date(a.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),h&&(0,b.jsx)("td",{style:{padding:"1rem",textAlign:"right"},children:g&&(0,b.jsxs)("select",{value:a.status,onChange:b=>v(a.id,b.target.value),disabled:t[a.id],style:{padding:"0.375rem 0.75rem",border:"1px solid var(--border-color)",borderRadius:"4px",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",cursor:t[a.id]?"not-allowed":"pointer",fontSize:"0.875rem"},children:[(0,b.jsx)("option",{value:"NEW",children:"New"}),(0,b.jsx)("option",{value:"IN_PROGRESS",children:"In Progress"}),(0,b.jsx)("option",{value:"RESOLVED",children:"Resolved"}),(0,b.jsx)("option",{value:"CLOSED",children:"Closed"})]})})]},a.id))})]})})}a.s(["default",()=>g])},80728,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(72131),e=a.i(36216);function f(){let[a,f]=(0,d.useState)([]),[g,h]=(0,d.useState)(!0),[i,j]=(0,d.useState)(""),[k,l]=(0,d.useState)("all"),[m,n]=(0,d.useState)(""),[o,p]=(0,d.useState)("createdAt"),[q,r]=(0,d.useState)("desc"),[s,t]=(0,d.useState)(1),[u,v]=(0,d.useState)(1),[w,x]=(0,d.useState)(0);(0,d.useEffect)(()=>{y()},[k,m,o,q,s]);let y=async()=>{try{h(!0),j("");let a=localStorage.getItem("accessToken"),b=new URLSearchParams;"all"!==k&&b.append("status",k),m.trim()&&b.append("search",m.trim()),b.append("sortBy",o),b.append("sortOrder",q),b.append("page",s.toString()),b.append("limit","20");let c=await fetch(`/api/v1/tickets?${b.toString()}`,{headers:a?{Authorization:`Bearer ${a}`}:{}}),d=await c.json();if(!d.success)return void j(d.error?.message||"Failed to load tickets");f(d.data||[]),d.pagination&&(v(d.pagination.totalPages||1),x(d.pagination.total||0))}catch(a){j("Failed to load tickets"),console.error(a)}finally{h(!1)}},z=async(a,b)=>{let c=localStorage.getItem("accessToken");try{let d=await fetch(`/api/v1/tickets/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({status:b})}),e=await d.json();if(!e.success)throw Error(e.error?.message||"Failed to update status");y()}catch(a){throw console.error("Failed to update ticket status:",a),a}};return(0,b.jsxs)("div",{className:"container",style:{padding:"2rem"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",marginTop:"1rem"},children:[(0,b.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold"},children:"Tickets"}),(0,b.jsx)(c.default,{href:"/tickets/new",className:"btn btn-primary",children:"New Ticket"})]}),(0,b.jsxs)("div",{className:"card",style:{padding:"1.5rem",marginBottom:"1.5rem"},children:[(0,b.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"flex-end"},children:[(0,b.jsxs)("div",{style:{flex:1,minWidth:"200px"},children:[(0,b.jsx)("label",{className:"label",htmlFor:"statusFilter",children:"Status"}),(0,b.jsxs)("select",{id:"statusFilter",className:"input",value:k,onChange:a=>{l(a.target.value),t(1)},children:[(0,b.jsx)("option",{value:"all",children:"All Statuses"}),(0,b.jsx)("option",{value:"NEW",children:"New"}),(0,b.jsx)("option",{value:"IN_PROGRESS",children:"In Progress"}),(0,b.jsx)("option",{value:"RESOLVED",children:"Resolved"}),(0,b.jsx)("option",{value:"CLOSED",children:"Closed"})]})]}),(0,b.jsxs)("div",{style:{flex:2,minWidth:"250px"},children:[(0,b.jsx)("label",{className:"label",htmlFor:"search",children:"Search (Username, Email, or Problem)"}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),t(1),y()},style:{display:"flex",gap:"0.5rem"},children:[(0,b.jsx)("input",{id:"search",type:"text",className:"input",value:m,onChange:a=>n(a.target.value),placeholder:"Search by username, email, or problem text...",style:{flex:1}}),(0,b.jsx)("button",{type:"submit",className:"btn btn-secondary",children:"Search"}),m&&(0,b.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{n(""),t(1)},children:"Clear"})]})]}),(0,b.jsxs)("div",{style:{minWidth:"150px"},children:[(0,b.jsx)("label",{className:"label",htmlFor:"sortBy",children:"Sort By"}),(0,b.jsxs)("select",{id:"sortBy",className:"input",value:o,onChange:a=>{p(a.target.value),t(1)},children:[(0,b.jsx)("option",{value:"createdAt",children:"Created Date"}),(0,b.jsx)("option",{value:"updatedAt",children:"Updated Date"}),(0,b.jsx)("option",{value:"ticketNumber",children:"Ticket Number"}),(0,b.jsx)("option",{value:"subject",children:"Subject"}),(0,b.jsx)("option",{value:"status",children:"Status"}),(0,b.jsx)("option",{value:"priority",children:"Priority"}),(0,b.jsx)("option",{value:"requester",children:"Requester"}),(0,b.jsx)("option",{value:"assignee",children:"Assignee"})]})]}),(0,b.jsxs)("div",{style:{minWidth:"120px"},children:[(0,b.jsx)("label",{className:"label",htmlFor:"sortOrder",children:"Order"}),(0,b.jsxs)("select",{id:"sortOrder",className:"input",value:q,onChange:a=>{r(a.target.value),t(1)},children:[(0,b.jsx)("option",{value:"desc",children:"Newest First"}),(0,b.jsx)("option",{value:"asc",children:"Oldest First"})]})]})]}),w>0&&(0,b.jsxs)("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--border-color)",color:"var(--text-secondary)",fontSize:"0.875rem"},children:["Showing ",(s-1)*20+1," - ",Math.min(20*s,w)," of ",w," tickets"]})]}),i&&(0,b.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--error)"},children:i}),g?(0,b.jsx)("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading tickets..."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.default,{tickets:a,onStatusChange:z,showQuickActions:!0,onRefresh:y,disableClientSort:!0,onSortChange:(a,b)=>{p(a),r(b),t(1)},currentSortField:o,currentSortOrder:q}),u>1&&(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"1rem",marginTop:"2rem"},children:[(0,b.jsx)("button",{className:"btn btn-secondary",onClick:()=>t(a=>Math.max(1,a-1)),disabled:1===s,children:"Previous"}),(0,b.jsxs)("span",{style:{color:"var(--text-secondary)"},children:["Page ",s," of ",u]}),(0,b.jsx)("button",{className:"btn btn-secondary",onClick:()=>t(a=>Math.min(u,a+1)),disabled:s===u,children:"Next"})]})]})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=_febf928c._.js.map