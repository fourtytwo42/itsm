{"version":3,"sources":["../../../../app/manager/agents/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport Link from 'next/link'\n\ninterface Agent {\n  id: string\n  email: string\n  firstName?: string\n  lastName?: string\n  isActive: boolean\n  roles: string[]\n  tenant?: {\n    id: string\n    name: string\n    slug: string\n  }\n  tenantAssignments?: Array<{\n    tenant: {\n      id: string\n      name: string\n      slug: string\n    }\n  }>\n}\n\nexport default function ManagerAgentsPage() {\n  const router = useRouter()\n  const [agents, setAgents] = useState<Agent[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState('')\n  const [searchTerm, setSearchTerm] = useState('')\n\n  useEffect(() => {\n    loadAgents()\n  }, [])\n\n  const loadAgents = async () => {\n    try {\n      setLoading(true)\n      const token = localStorage.getItem('accessToken')\n      const response = await fetch('/api/v1/manager/agents', {\n        headers: token ? { Authorization: `Bearer ${token}` } : {},\n      })\n\n      const data = await response.json()\n\n      if (data.success) {\n        setAgents(data.data.agents || data.data || [])\n      } else {\n        setError(data.error?.message || 'Failed to load agents')\n      }\n    } catch (err) {\n      setError('An unexpected error occurred')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleDisable = async (agentId: string, currentStatus: boolean) => {\n    if (!confirm(`Are you sure you want to ${currentStatus ? 'disable' : 'enable'} this agent?`)) return\n\n    try {\n      const token = localStorage.getItem('accessToken')\n      const response = await fetch(`/api/v1/manager/agents/${agentId}/disable`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({ disabled: currentStatus }),\n      })\n\n      const data = await response.json()\n\n      if (data.success) {\n        loadAgents()\n      } else {\n        setError(data.error?.message || 'Failed to update agent')\n      }\n    } catch (err) {\n      setError('An unexpected error occurred')\n    }\n  }\n\n  const handleDelete = async (agentId: string) => {\n    if (!confirm('Are you sure you want to delete this agent? This action cannot be undone.')) return\n\n    try {\n      const token = localStorage.getItem('accessToken')\n      const response = await fetch(`/api/v1/manager/agents/${agentId}`, {\n        method: 'DELETE',\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n\n      const data = await response.json()\n\n      if (data.success) {\n        loadAgents()\n      } else {\n        setError(data.error?.message || 'Failed to delete agent')\n      }\n    } catch (err) {\n      setError('An unexpected error occurred')\n    }\n  }\n\n  const filteredAgents = agents.filter((agent) => {\n    if (!searchTerm) return true\n    const search = searchTerm.toLowerCase()\n    return (\n      agent.email.toLowerCase().includes(search) ||\n      agent.firstName?.toLowerCase().includes(search) ||\n      agent.lastName?.toLowerCase().includes(search)\n    )\n  })\n\n  if (loading) {\n    return (\n      <div style={{ padding: '2rem' }}>\n        <p>Loading agents...</p>\n      </div>\n    )\n  }\n\n  return (\n    <div style={{ padding: '2rem', maxWidth: '1400px', margin: '0 auto' }}>\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '2rem' }}>\n        <h1 style={{ fontSize: '2rem', margin: 0 }}>My Agents</h1>\n        <button\n          onClick={() => router.push('/manager/agents/new')}\n          style={{\n            padding: '0.75rem 1.5rem',\n            backgroundColor: 'var(--accent-primary)',\n            color: 'white',\n            border: 'none',\n            borderRadius: '0.5rem',\n            cursor: 'pointer',\n            fontSize: '1rem',\n          }}\n        >\n          Register Agent\n        </button>\n      </div>\n\n      {error && (\n        <div\n          style={{\n            padding: '1rem',\n            backgroundColor: 'var(--error-bg)',\n            color: 'var(--error-text)',\n            borderRadius: '0.5rem',\n            marginBottom: '1rem',\n          }}\n        >\n          {error}\n        </div>\n      )}\n\n      <div style={{ marginBottom: '2rem' }}>\n        <input\n          type=\"text\"\n          placeholder=\"Search agents...\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          style={{\n            width: '100%',\n            maxWidth: '400px',\n            padding: '0.75rem',\n            border: '1px solid var(--border-color)',\n            borderRadius: '0.5rem',\n            backgroundColor: 'var(--bg-secondary)',\n            color: 'var(--text-primary)',\n          }}\n        />\n      </div>\n\n      {filteredAgents.length === 0 ? (\n        <div style={{ textAlign: 'center', padding: '3rem', color: 'var(--text-secondary)' }}>\n          <p>No agents found. Register your first agent to get started.</p>\n        </div>\n      ) : (\n        <div style={{ display: 'grid', gap: '1rem' }}>\n          {filteredAgents.map((agent) => (\n            <div\n              key={agent.id}\n              style={{\n                padding: '1.5rem',\n                backgroundColor: 'var(--bg-secondary)',\n                borderRadius: '0.5rem',\n                border: '1px solid var(--border-color)',\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n              }}\n            >\n              <div style={{ flex: 1 }}>\n                <h3 style={{ margin: 0, fontSize: '1.125rem', marginBottom: '0.5rem' }}>\n                  {agent.firstName || agent.lastName\n                    ? `${agent.firstName || ''} ${agent.lastName || ''}`.trim()\n                    : agent.email}\n                </h3>\n                <p style={{ margin: 0, color: 'var(--text-secondary)', fontSize: '0.875rem' }}>\n                  {agent.email}\n                </p>\n                <div style={{ display: 'flex', gap: '1rem', marginTop: '0.5rem', fontSize: '0.875rem' }}>\n                  <span\n                    style={{\n                      padding: '0.25rem 0.75rem',\n                      borderRadius: '1rem',\n                      backgroundColor: agent.isActive ? 'var(--success-bg)' : 'var(--error-bg)',\n                      color: agent.isActive ? 'var(--success-text)' : 'var(--error-text)',\n                    }}\n                  >\n                    {agent.isActive ? 'Active' : 'Inactive'}\n                  </span>\n                  <span style={{ color: 'var(--text-secondary)' }}>\n                    {agent.roles.join(', ')}\n                  </span>\n                  {agent.tenantAssignments && agent.tenantAssignments.length > 0 && (\n                    <span style={{ color: 'var(--text-secondary)' }}>\n                      {agent.tenantAssignments.length} tenant(s)\n                    </span>\n                  )}\n                </div>\n              </div>\n\n              <div style={{ display: 'flex', gap: '0.5rem' }}>\n                <Link\n                  href={`/manager/agents/${agent.id}`}\n                  style={{\n                    padding: '0.5rem 1rem',\n                    backgroundColor: 'var(--accent-primary)',\n                    color: 'white',\n                    textDecoration: 'none',\n                    borderRadius: '0.5rem',\n                    fontSize: '0.875rem',\n                  }}\n                >\n                  Manage\n                </Link>\n                <button\n                  onClick={() => handleDisable(agent.id, agent.isActive)}\n                  style={{\n                    padding: '0.5rem 1rem',\n                    backgroundColor: agent.isActive ? 'var(--warning-bg)' : 'var(--success-bg)',\n                    color: agent.isActive ? 'var(--warning-text)' : 'var(--success-text)',\n                    border: 'none',\n                    borderRadius: '0.5rem',\n                    cursor: 'pointer',\n                    fontSize: '0.875rem',\n                  }}\n                >\n                  {agent.isActive ? 'Disable' : 'Enable'}\n                </button>\n                <button\n                  onClick={() => handleDelete(agent.id)}\n                  style={{\n                    padding: '0.5rem 1rem',\n                    backgroundColor: 'var(--error-bg)',\n                    color: 'var(--error-text)',\n                    border: 'none',\n                    borderRadius: '0.5rem',\n                    cursor: 'pointer',\n                    fontSize: '0.875rem',\n                  }}\n                >\n                  Delete\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}