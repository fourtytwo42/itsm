(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51364,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566),r=e.i(18228);function l(){(0,s.useRouter)();let[e,l]=(0,a.useState)([]),[i,n]=(0,a.useState)(!0),[d,c]=(0,a.useState)(""),[o,m]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),[x,u]=(0,a.useState)(null),[g,y]=(0,a.useState)({search:"",role:"",isActive:""}),[j,v]=(0,a.useState)({email:"",password:"",firstName:"",lastName:"",roles:[],isActive:!0,emailVerified:!1});(0,a.useEffect)(()=>{b()},[g]);let b=async()=>{try{n(!0);let e=localStorage.getItem("accessToken"),t=new URLSearchParams;g.search&&t.append("search",g.search),g.role&&t.append("role",g.role),""!==g.isActive&&t.append("isActive",g.isActive);let a=await fetch(`/api/v1/admin/users?${t.toString()}`,{headers:e?{Authorization:`Bearer ${e}`}:{}}),s=await a.json();s.success?l(s.data.users):c(s.error?.message||"Failed to load users")}catch(e){c("An unexpected error occurred")}finally{n(!1)}},f=async e=>{e.preventDefault();try{let e=localStorage.getItem("accessToken"),t=await fetch("/api/v1/admin/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(j)}),a=await t.json();a.success?(m(!1),v({email:"",password:"",firstName:"",lastName:"",roles:[],isActive:!0,emailVerified:!1}),b()):c(a.error?.message||"Failed to create user")}catch(e){c("An unexpected error occurred")}},N=async e=>{if(e.preventDefault(),x)try{let e=localStorage.getItem("accessToken"),t={...j};t.password||delete t.password;let a=await fetch(`/api/v1/admin/users/${x.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)}),s=await a.json();s.success?(p(!1),u(null),b()):c(s.error?.message||"Failed to update user")}catch(e){c("An unexpected error occurred")}},A=async e=>{if(confirm("Are you sure you want to delete this user?"))try{let t=localStorage.getItem("accessToken"),a=await fetch(`/api/v1/admin/users/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),s=await a.json();s.success?b():c(s.error?.message||"Failed to delete user")}catch(e){c("An unexpected error occurred")}},C=async(e,t)=>{try{let a=localStorage.getItem("accessToken"),s=await fetch(`/api/v1/admin/users/${e}/activate?action=${t?"deactivate":"activate"}`,{method:"POST",headers:{Authorization:`Bearer ${a}`}}),r=await s.json();r.success?b():c(r.error?.message||"Failed to update user status")}catch(e){c("An unexpected error occurred")}},w=e=>{v(t=>({...t,roles:t.roles.includes(e)?t.roles.filter(t=>t!==e):[...t.roles,e]}))};return i?(0,t.jsx)("div",{style:{padding:"2rem"},children:"Loading users..."}):(0,t.jsxs)("div",{style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,t.jsx)("h1",{style:{margin:0},children:"User Management"}),(0,t.jsx)("button",{onClick:()=>{v({email:"",password:"",firstName:"",lastName:"",roles:[],isActive:!0,emailVerified:!1}),m(!0)},className:"btn btn-primary",children:"Create User"})]}),d&&(0,t.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--error)"},children:d}),(0,t.jsxs)("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[(0,t.jsx)("input",{type:"text",placeholder:"Search by email, name...",value:g.search,onChange:e=>y({...g,search:e.target.value}),className:"input",style:{flex:1,minWidth:"200px"}}),(0,t.jsxs)("select",{value:g.role,onChange:e=>y({...g,role:e.target.value}),className:"input",style:{minWidth:"150px"},children:[(0,t.jsx)("option",{value:"",children:"All Roles"}),Object.values(r.RoleName).map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),(0,t.jsxs)("select",{value:g.isActive,onChange:e=>y({...g,isActive:e.target.value}),className:"input",style:{minWidth:"150px"},children:[(0,t.jsx)("option",{value:"",children:"All Status"}),(0,t.jsx)("option",{value:"true",children:"Active"}),(0,t.jsx)("option",{value:"false",children:"Inactive"})]})]}),(0,t.jsx)("div",{className:"card",style:{overflowX:"auto"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Email"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Name"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Roles"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Status"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Verified"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Created"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"right"},children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[(0,t.jsx)("td",{style:{padding:"0.75rem"},children:e.email}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:e.firstName||e.lastName?`${e.firstName||""} ${e.lastName||""}`.trim():"-"}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:(0,t.jsx)("div",{style:{display:"flex",gap:"0.25rem",flexWrap:"wrap"},children:e.roles.map(e=>(0,t.jsx)("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:"var(--bg-secondary)",borderRadius:"0.25rem",fontSize:"0.875rem"},children:e},e))})}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:(0,t.jsx)("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:e.isActive?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",color:e.isActive?"rgb(34, 197, 94)":"rgb(239, 68, 68)",borderRadius:"0.25rem",fontSize:"0.875rem"},children:e.isActive?"Active":"Inactive"})}),(0,t.jsx)("td",{style:{padding:"0.75rem"},children:e.emailVerified?"✓":"✗"}),(0,t.jsx)("td",{style:{padding:"0.75rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:new Date(e.createdAt).toLocaleDateString()}),(0,t.jsx)("td",{style:{padding:"0.75rem",textAlign:"right"},children:(0,t.jsxs)("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[(0,t.jsx)("button",{onClick:()=>{u(e),v({email:e.email,password:"",firstName:e.firstName||"",lastName:e.lastName||"",roles:e.roles,isActive:e.isActive,emailVerified:e.emailVerified}),p(!0)},className:"btn btn-secondary",style:{padding:"0.25rem 0.5rem",fontSize:"0.875rem"},children:"Edit"}),(0,t.jsx)("button",{onClick:()=>C(e.id,e.isActive),className:"btn btn-secondary",style:{padding:"0.25rem 0.5rem",fontSize:"0.875rem"},children:e.isActive?"Deactivate":"Activate"}),(0,t.jsx)("button",{onClick:()=>A(e.id),className:"btn btn-secondary",style:{padding:"0.25rem 0.5rem",fontSize:"0.875rem",color:"var(--error)"},children:"Delete"})]})})]},e.id))})]})}),o&&(0,t.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,t.jsxs)("div",{className:"card",style:{width:"100%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto"},children:[(0,t.jsx)("h2",{style:{marginTop:0},children:"Create User"}),(0,t.jsxs)("form",{onSubmit:f,children:[(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{className:"label",children:"Email *"}),(0,t.jsx)("input",{type:"email",className:"input",value:j.email,onChange:e=>v({...j,email:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{className:"label",children:"Password *"}),(0,t.jsx)("input",{type:"password",className:"input",value:j.password,onChange:e=>v({...j,password:e.target.value}),required:!0,minLength:8})]}),(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{className:"label",children:"First Name"}),(0,t.jsx)("input",{type:"text",className:"input",value:j.firstName,onChange:e=>v({...j,firstName:e.target.value})})]}),(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{className:"label",children:"Last Name"}),(0,t.jsx)("input",{type:"text",className:"input",value:j.lastName,onChange:e=>v({...j,lastName:e.target.value})})]}),(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{className:"label",children:"Roles"}),(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Object.values(r.RoleName).map(e=>(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,t.jsx)("input",{type:"checkbox",checked:j.roles.includes(e),onChange:()=>w(e)}),e]},e))})]}),(0,t.jsx)("div",{style:{marginBottom:"1rem"},children:(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,t.jsx)("input",{type:"checkbox",checked:j.isActive,onChange:e=>v({...j,isActive:e.target.checked})}),"Active"]})}),(0,t.jsx)("div",{style:{marginBottom:"1.5rem"},children:(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,t.jsx)("input",{type:"checkbox",checked:j.emailVerified,onChange:e=>v({...j,emailVerified:e.target.checked})}),"Email Verified"]})}),(0,t.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>m(!1),children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Create User"})]})]})]})}),h&&x&&(0,t.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,t.jsxs)("div",{className:"card",style:{width:"100%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto"},children:[(0,t.jsx)("h2",{style:{marginTop:0},children:"Edit User"}),(0,t.jsxs)("form",{onSubmit:N,children:[(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{className:"label",children:"Email *"}),(0,t.jsx)("input",{type:"email",className:"input",value:j.email,onChange:e=>v({...j,email:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{className:"label",children:"Password (leave blank to keep current)"}),(0,t.jsx)("input",{type:"password",className:"input",value:j.password,onChange:e=>v({...j,password:e.target.value}),minLength:8})]}),(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{className:"label",children:"First Name"}),(0,t.jsx)("input",{type:"text",className:"input",value:j.firstName,onChange:e=>v({...j,firstName:e.target.value})})]}),(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{className:"label",children:"Last Name"}),(0,t.jsx)("input",{type:"text",className:"input",value:j.lastName,onChange:e=>v({...j,lastName:e.target.value})})]}),(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{className:"label",children:"Roles"}),(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Object.values(r.RoleName).map(e=>(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,t.jsx)("input",{type:"checkbox",checked:j.roles.includes(e),onChange:()=>w(e)}),e]},e))})]}),(0,t.jsx)("div",{style:{marginBottom:"1rem"},children:(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,t.jsx)("input",{type:"checkbox",checked:j.isActive,onChange:e=>v({...j,isActive:e.target.checked})}),"Active"]})}),(0,t.jsx)("div",{style:{marginBottom:"1.5rem"},children:(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,t.jsx)("input",{type:"checkbox",checked:j.emailVerified,onChange:e=>v({...j,emailVerified:e.target.checked})}),"Email Verified"]})}),(0,t.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{p(!1),u(null)},children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Update User"})]})]})]})})]})}e.s(["default",()=>l])}]);