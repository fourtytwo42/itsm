(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,332,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),s=e.i(22016);function i(){let e=(0,a.useParams)(),i=e?.slug,[o,n]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0),[d,m]=(0,r.useState)(""),[g,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{u(!!localStorage.getItem("accessToken")),p()},[i]);let p=async()=>{try{c(!0);let e=localStorage.getItem("accessToken"),t=localStorage.getItem("publicToken"),r={"Content-Type":"application/json"};e?r.Authorization=`Bearer ${e}`:t&&(r.Authorization=`Bearer ${t}`);let a=await fetch(`/api/v1/tenants/${i}/tickets`,{headers:r}),s=await a.json();s.success?n(s.data):m(s.error?.message||"Failed to load tickets")}catch(e){m("An unexpected error occurred")}finally{c(!1)}};return l?(0,t.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)("p",{children:"Loading tickets..."})}):(0,t.jsx)("div",{style:{minHeight:"100vh",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"},children:(0,t.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"2rem"},children:[(0,t.jsx)(s.default,{href:`/tenant/${i}`,style:{color:"var(--text-secondary)",textDecoration:"none",marginBottom:"2rem",display:"inline-block"},children:"â† Back"}),(0,t.jsx)("h1",{style:{fontSize:"2rem",marginBottom:"2rem"},children:"My Tickets"}),d&&(0,t.jsx)("div",{style:{padding:"1rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"8px",marginBottom:"1rem",color:"var(--error)"},children:d}),0===o.length?(0,t.jsxs)("div",{style:{textAlign:"center",padding:"4rem",color:"var(--text-secondary)"},children:[(0,t.jsx)("p",{children:"No tickets found."}),(0,t.jsx)(s.default,{href:`/tenant/${i}/submit`,style:{display:"inline-block",marginTop:"1rem",padding:"0.75rem 1.5rem",backgroundColor:"var(--accent-primary)",color:"white",textDecoration:"none",borderRadius:"8px"},children:"Submit a Ticket"})]}):(0,t.jsx)("div",{style:{display:"grid",gap:"1rem"},children:o.map(e=>(0,t.jsxs)(s.default,{href:`/tenant/${i}/tickets/${e.id}`,style:{padding:"1.5rem",backgroundColor:"var(--bg-secondary)",borderRadius:"8px",border:"1px solid var(--border-color)",textDecoration:"none",color:"var(--text-primary)",display:"block"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"0.5rem"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{style:{margin:0,marginBottom:"0.25rem"},children:e.subject}),(0,t.jsx)("p",{style:{margin:0,color:"var(--text-secondary)",fontSize:"0.875rem"},children:e.ticketNumber})]}),(0,t.jsx)("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:600,backgroundColor:"OPEN"===e.status||"NEW"===e.status?"rgba(59, 130, 246, 0.1)":"RESOLVED"===e.status||"CLOSED"===e.status?"rgba(16, 185, 129, 0.1)":"rgba(156, 163, 175, 0.1)",color:"OPEN"===e.status||"NEW"===e.status?"rgb(59, 130, 246)":"RESOLVED"===e.status||"CLOSED"===e.status?"rgb(16, 185, 129)":"rgb(156, 163, 175)"},children:e.status})]}),(0,t.jsxs)("p",{style:{margin:"0.5rem 0",color:"var(--text-secondary)",fontSize:"0.875rem"},children:[e.description.substring(0,150),"..."]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"1rem",color:"var(--text-secondary)",fontSize:"0.75rem",marginTop:"0.5rem"},children:[(0,t.jsxs)("span",{children:["Created: ",new Date(e.createdAt).toLocaleDateString()]}),e.category&&(0,t.jsxs)("span",{children:["Category: ",e.category]})]})]},e.id))})]})})}e.s(["default",()=>i])}]);