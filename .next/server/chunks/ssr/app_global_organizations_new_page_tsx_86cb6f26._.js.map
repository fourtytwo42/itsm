{"version":3,"sources":["../../../../app/global/organizations/new/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport Link from 'next/link'\n\nexport default function NewOrganizationPage() {\n  const router = useRouter()\n  const [formData, setFormData] = useState({\n    name: '',\n    slug: '',\n    description: '',\n    isActive: true,\n  })\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState('')\n  const [orgAdmin, setOrgAdmin] = useState<{ email: string; defaultPassword: string } | null>(null)\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setError('')\n    setLoading(true)\n\n    try {\n      const token = localStorage.getItem('accessToken')\n      const response = await fetch('/api/v1/global/organizations', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(formData),\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to create organization')\n      }\n\n      setOrgAdmin({\n        email: data.orgAdmin.email,\n        defaultPassword: data.orgAdmin.defaultPassword,\n      })\n    } catch (err: any) {\n      setError(err.message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleSlugChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const slug = e.target.value\n      .toLowerCase()\n      .replace(/[^a-z0-9-]/g, '-')\n      .replace(/-+/g, '-')\n      .replace(/^-|-$/g, '')\n    setFormData({ ...formData, slug })\n  }\n\n  if (orgAdmin) {\n    return (\n      <div style={{ padding: '2rem', maxWidth: '600px', margin: '0 auto' }}>\n        <div className=\"card\" style={{ padding: '2rem' }}>\n          <h1 style={{ marginBottom: '1rem' }}>Organization Created</h1>\n          <p style={{ marginBottom: '1.5rem' }}>\n            Organization <strong>{formData.name}</strong> has been created successfully.\n          </p>\n          <div style={{ backgroundColor: 'var(--bg-secondary)', padding: '1rem', borderRadius: '0.5rem', marginBottom: '1.5rem' }}>\n            <h3 style={{ marginBottom: '0.5rem' }}>Organization Admin Credentials</h3>\n            <p style={{ margin: 0, marginBottom: '0.5rem' }}>\n              <strong>Email:</strong> {orgAdmin.email}\n            </p>\n            <p style={{ margin: 0 }}>\n              <strong>Default Password:</strong> {orgAdmin.defaultPassword}\n            </p>\n            <p style={{ marginTop: '0.5rem', fontSize: '0.875rem', color: 'var(--text-secondary)' }}>\n              Please save these credentials. The admin will be required to change their password on first login.\n            </p>\n          </div>\n          <div style={{ display: 'flex', gap: '1rem' }}>\n            <Link href=\"/global/organizations\" className=\"btn btn-primary\">\n              View Organizations\n            </Link>\n            <button\n              className=\"btn\"\n              onClick={() => {\n                setOrgAdmin(null)\n                setFormData({ name: '', slug: '', description: '', isActive: true })\n              }}\n            >\n              Create Another\n            </button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div style={{ padding: '2rem', maxWidth: '600px', margin: '0 auto' }}>\n      <div style={{ marginBottom: '1.5rem' }}>\n        <Link href=\"/global/organizations\" className=\"btn\">\n          ‚Üê Back to Organizations\n        </Link>\n      </div>\n\n      <div className=\"card\" style={{ padding: '2rem' }}>\n        <h1 style={{ marginBottom: '1.5rem' }}>Create Organization</h1>\n\n        {error && (\n          <div\n            style={{\n              padding: '0.75rem',\n              backgroundColor: 'rgba(239, 68, 68, 0.1)',\n              border: '1px solid var(--error)',\n              borderRadius: '0.5rem',\n              marginBottom: '1rem',\n              color: 'var(--error)',\n            }}\n          >\n            {error}\n          </div>\n        )}\n\n        <form onSubmit={handleSubmit}>\n          <div style={{ marginBottom: '1rem' }}>\n            <label className=\"label\" htmlFor=\"name\">\n              Organization Name *\n            </label>\n            <input\n              id=\"name\"\n              type=\"text\"\n              className=\"input\"\n              value={formData.name}\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n              required\n              disabled={loading}\n            />\n          </div>\n\n          <div style={{ marginBottom: '1rem' }}>\n            <label className=\"label\" htmlFor=\"slug\">\n              Slug *\n            </label>\n            <input\n              id=\"slug\"\n              type=\"text\"\n              className=\"input\"\n              value={formData.slug}\n              onChange={handleSlugChange}\n              required\n              pattern=\"[a-z0-9-]+\"\n              disabled={loading}\n            />\n            <p style={{ fontSize: '0.875rem', color: 'var(--text-secondary)', marginTop: '0.25rem' }}>\n              Lowercase letters, numbers, and hyphens only. Used for organization admin email: admin@[slug].demo\n            </p>\n          </div>\n\n          <div style={{ marginBottom: '1rem' }}>\n            <label className=\"label\" htmlFor=\"description\">\n              Description\n            </label>\n            <textarea\n              id=\"description\"\n              className=\"input\"\n              value={formData.description}\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n              rows={3}\n              disabled={loading}\n            />\n          </div>\n\n          <div style={{ marginBottom: '1.5rem' }}>\n            <label style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n              <input\n                type=\"checkbox\"\n                checked={formData.isActive}\n                onChange={(e) => setFormData({ ...formData, isActive: e.target.checked })}\n                disabled={loading}\n              />\n              <span>Active</span>\n            </label>\n          </div>\n\n          <div style={{ display: 'flex', gap: '1rem' }}>\n            <button type=\"submit\" className=\"btn btn-primary\" disabled={loading}>\n              {loading ? 'Creating...' : 'Create Organization'}\n            </button>\n            <Link href=\"/global/organizations\" className=\"btn\">\n              Cancel\n            </Link>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}