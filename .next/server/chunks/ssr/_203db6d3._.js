module.exports=[84739,3735,a=>{"use strict";var b=a.i(72131);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))});a.s(["ChevronUpIcon",0,c],84739);let d=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))});a.s(["ChevronDownIcon",0,d],3735)},59486,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(29173),e=a.i(84739),f=a.i(3735);function g(){let[a,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)({}),[n,o]=(0,c.useState)({search:"",role:"",isActive:"",tenantId:""}),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)("createdAt"),[t,u]=(0,c.useState)("desc");(0,c.useEffect)(()=>{w(),v()},[n,r,t]),(0,c.useEffect)(()=>{a.length>0&&x()},[a]);let v=async()=>{try{let a=localStorage.getItem("accessToken"),b=await fetch("/api/v1/admin/tenants",{headers:a?{Authorization:`Bearer ${a}`}:{}}),c=await b.json();c.success&&q(c.data.tenants||c.data||[])}catch(a){console.error("Failed to load tenants:",a)}},w=async()=>{try{i(!0);let a=localStorage.getItem("accessToken"),b=new URLSearchParams;n.search&&b.append("search",n.search),n.role&&b.append("role",n.role),""!==n.isActive&&b.append("isActive",n.isActive),n.tenantId&&b.append("tenantId",n.tenantId),b.append("sort",r),b.append("order",t);let c=await fetch(`/api/v1/agent/users?${b.toString()}`,{headers:a?{Authorization:`Bearer ${a}`}:{}}),e=await c.json();if(e.success){let a=(e.data?.users||e.data||[]).map(a=>({...a,role:a.roles&&a.roles.length>0?a.roles[0]:d.RoleName.END_USER}));g(a)}else k(e.error?.message||"Failed to load users")}catch(a){k("An unexpected error occurred")}finally{i(!1)}},x=async()=>{let b=localStorage.getItem("accessToken"),c={},e=a.filter(a=>a.role!==d.RoleName.ADMIN&&(a.role===d.RoleName.AGENT||a.role===d.RoleName.IT_MANAGER||a.role===d.RoleName.END_USER));await Promise.all(e.map(async a=>{try{let d=await fetch(`/api/v1/agent/users/${a.id}/tenants`,{headers:b?{Authorization:`Bearer ${b}`}:{}}),e=await d.json();e.success&&(c[a.id]=e.data)}catch(b){console.error(`Failed to load tenant assignments for user ${a.id}:`,b)}})),m(c)},y=({field:a,label:c,align:d="left"})=>(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:d,fontWeight:600,fontSize:"0.875rem",color:"var(--text-secondary)",cursor:"pointer",userSelect:"none"},onClick:()=>{r===a?u("asc"===t?"desc":"asc"):(s(a),u("desc"))},children:(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",justifyContent:"right"===d?"flex-end":"center"===d?"center":"flex-start"},children:[c,r===a&&("asc"===t?(0,b.jsx)(e.ChevronUpIcon,{style:{width:"0.875rem",height:"0.875rem"}}):(0,b.jsx)(f.ChevronDownIcon,{style:{width:"0.875rem",height:"0.875rem"}}))]})});return h?(0,b.jsx)("div",{style:{padding:"2rem"},children:"Loading users..."}):(0,b.jsxs)("div",{style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[(0,b.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:(0,b.jsx)("h1",{style:{margin:0},children:"Users"})}),j&&(0,b.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--error)"},children:j}),(0,b.jsx)("div",{className:"card",style:{padding:"1rem",marginBottom:"1.5rem"},children:(0,b.jsxs)("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",alignItems:"center"},children:[(0,b.jsx)("input",{type:"text",placeholder:"Search by email, name...",value:n.search,onChange:a=>o({...n,search:a.target.value}),className:"input",style:{flex:1,minWidth:"250px",maxWidth:"400px"}}),(0,b.jsxs)("select",{value:n.role,onChange:a=>o({...n,role:a.target.value}),className:"input",style:{minWidth:"120px",maxWidth:"150px"},children:[(0,b.jsx)("option",{value:"",children:"All Roles"}),Object.values(d.RoleName).filter(a=>a!==d.RoleName.GLOBAL_ADMIN).map(a=>(0,b.jsx)("option",{value:a,children:a.replace("_"," ")},a))]}),(0,b.jsxs)("select",{value:n.isActive,onChange:a=>o({...n,isActive:a.target.value}),className:"input",style:{minWidth:"120px",maxWidth:"150px"},children:[(0,b.jsx)("option",{value:"",children:"All Status"}),(0,b.jsx)("option",{value:"true",children:"Active"}),(0,b.jsx)("option",{value:"false",children:"Inactive"})]}),(0,b.jsxs)("select",{value:n.tenantId,onChange:a=>o({...n,tenantId:a.target.value}),className:"input",style:{minWidth:"150px",maxWidth:"200px"},children:[(0,b.jsx)("option",{value:"",children:"All Tenants"}),p.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]})}),(0,b.jsx)("div",{className:"card",style:{overflowX:"auto",padding:0},children:0===a.length?(0,b.jsxs)("div",{style:{padding:"3rem",textAlign:"center",color:"var(--text-secondary)"},children:[(0,b.jsx)("p",{style:{margin:0,fontSize:"1rem"},children:"No users found"}),(0,b.jsx)("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.875rem"},children:"Try adjusting your filters"})]}):(0,b.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{style:{borderBottom:"2px solid var(--border-color)",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)(y,{field:"email",label:"Email"}),(0,b.jsx)(y,{field:"firstName",label:"Name"}),(0,b.jsx)(y,{field:"role",label:"Role"}),(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Tenants"}),(0,b.jsx)(y,{field:"isActive",label:"Status"}),(0,b.jsx)(y,{field:"emailVerified",label:"Verified",align:"center"}),(0,b.jsx)(y,{field:"createdAt",label:"Created"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-color)",transition:"background-color 0.15s ease"},onMouseEnter:a=>{a.currentTarget.style.backgroundColor="var(--bg-secondary)"},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="transparent"},children:[(0,b.jsx)("td",{style:{padding:"1rem",fontSize:"0.875rem"},children:(0,b.jsx)("div",{style:{fontWeight:500,color:"var(--text-primary)"},children:a.email})}),(0,b.jsx)("td",{style:{padding:"1rem",fontSize:"0.875rem",color:"var(--text-primary)"},children:a.firstName||a.lastName?`${a.firstName||""} ${a.lastName||""}`.trim():(0,b.jsx)("span",{style:{color:"var(--text-secondary)",fontStyle:"italic"},children:"-"})}),(0,b.jsx)("td",{style:{padding:"1rem"},children:(0,b.jsx)("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:"var(--bg-tertiary)",borderRadius:"4px",fontSize:"0.75rem",fontWeight:500,color:"var(--text-primary)"},children:a.role.replace("_"," ")})}),(0,b.jsx)("td",{style:{padding:"1rem",maxWidth:"200px"},children:a.role===d.RoleName.ADMIN?(0,b.jsx)("span",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)"},children:"All tenants"}):a.role===d.RoleName.AGENT||a.role===d.RoleName.END_USER||a.role===d.RoleName.IT_MANAGER?(0,b.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem"},children:l[a.id]&&l[a.id].length>0?(0,b.jsxs)(b.Fragment,{children:[l[a.id].slice(0,3).map(a=>(0,b.jsx)("span",{style:{padding:"0.1875rem 0.5rem",backgroundColor:"var(--bg-tertiary)",borderRadius:"4px",fontSize:"0.75rem",color:"var(--text-primary)",whiteSpace:"nowrap"},children:a.tenant.name},a.id)),l[a.id].length>3&&(0,b.jsxs)("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",alignSelf:"center"},children:["+",l[a.id].length-3]})]}):(0,b.jsx)("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",fontStyle:"italic"},children:"No tenants"})}):(0,b.jsx)("span",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)"},children:"-"})}),(0,b.jsx)("td",{style:{padding:"1rem"},children:(0,b.jsx)("span",{style:{padding:"0.25rem 0.625rem",backgroundColor:a.isActive?"rgba(34, 197, 94, 0.15)":"rgba(239, 68, 68, 0.15)",color:a.isActive?"rgb(34, 197, 94)":"rgb(239, 68, 68)",borderRadius:"4px",fontSize:"0.75rem",fontWeight:500,display:"inline-block"},children:a.isActive?"Active":"Inactive"})}),(0,b.jsx)("td",{style:{padding:"1rem",textAlign:"center"},children:(0,b.jsx)("span",{style:{fontSize:"1rem",color:a.emailVerified?"rgb(34, 197, 94)":"var(--text-secondary)",fontWeight:a.emailVerified?600:400},children:a.emailVerified?"✓":"✗"})}),(0,b.jsx)("td",{style:{padding:"1rem",fontSize:"0.8125rem",color:"var(--text-secondary)"},children:new Date(a.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]},a.id))})]})})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=_203db6d3._.js.map