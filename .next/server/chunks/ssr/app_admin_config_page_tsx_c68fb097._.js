module.exports=[84293,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(89329);let f=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}),g=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))});var h=a.i(3471);function i(){let a=(0,d.useRouter)(),[e,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(!0),[i,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)("general");(0,c.useEffect)(()=>{let b=localStorage.getItem("user"),c=localStorage.getItem("accessToken");if(!b||!c)return void a.push("/login");try{let c=JSON.parse(b);if(f(c),!c.roles.includes("ADMIN"))return void a.push("/dashboard");q()}catch(b){a.push("/login")}finally{h(!1)}},[a]);let q=async()=>{try{let a=localStorage.getItem("accessToken"),b=await fetch("/api/v1/admin/config",{headers:{Authorization:`Bearer ${a}`}});if(!b.ok)throw Error("Failed to load configuration");let c=await b.json();c.success&&n(c.data.config)}catch(a){console.error("Error loading config:",a)}},r=async()=>{if(m)try{l(!0);let a=localStorage.getItem("accessToken");if(!(await fetch("/api/v1/admin/config",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({config:m})})).ok)throw Error("Failed to save configuration");alert("Configuration saved successfully!")}catch(a){console.error("Error saving config:",a),alert("Failed to save configuration")}finally{l(!1)}},s=a=>{m&&n({...m,...a})};return g?(0,b.jsx)("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading..."}):e&&m?(0,b.jsx)("div",{style:{minHeight:"100vh",padding:"2rem"},children:(0,b.jsxs)("div",{className:"container",children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,b.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold"},children:"System Configuration"}),(0,b.jsx)("button",{className:"btn btn-primary",onClick:r,disabled:i,children:i?"Saving...":"Save Changes"})]}),(0,b.jsxs)("div",{className:"card",style:{marginBottom:"2rem"},children:[(0,b.jsx)("div",{style:{display:"flex",gap:"1rem",borderBottom:"1px solid var(--border-color)",marginBottom:"1rem"},children:["general","auth","email","files","branding","tickets","custom-fields","ticket-types"].map(a=>(0,b.jsx)("button",{onClick:()=>p(a),style:{padding:"0.75rem 1.5rem",border:"none",background:"none",borderBottom:o===a?"2px solid var(--primary-color)":"2px solid transparent",cursor:"pointer",textTransform:"capitalize"},children:a.replace("-"," ")},a))}),"general"===o&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{style:{marginBottom:"1rem"},children:"General Settings"}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Organization Name"}),(0,b.jsx)("input",{type:"text",value:m.organizationName,onChange:a=>s({organizationName:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"checkbox",checked:m.maintenanceMode,onChange:a=>s({maintenanceMode:a.target.checked})}),"Maintenance Mode"]})}),m.maintenanceMode&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Maintenance Message"}),(0,b.jsx)("textarea",{value:m.maintenanceMessage||"",onChange:a=>s({maintenanceMessage:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",minHeight:"100px"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Session Timeout (minutes)"}),(0,b.jsx)("input",{type:"number",value:m.sessionTimeout,onChange:a=>s({sessionTimeout:parseInt(a.target.value)||1440}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]})]})]}),"auth"===o&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{style:{marginBottom:"1rem"},children:"Authentication Settings"}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,b.jsx)("div",{children:(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"checkbox",checked:m.registrationEnabled,onChange:a=>s({registrationEnabled:a.target.checked})}),"Enable User Registration"]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"checkbox",checked:m.passwordResetEnabled,onChange:a=>s({passwordResetEnabled:a.target.checked})}),"Enable Password Reset"]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"checkbox",checked:m.ssoEnabled,onChange:a=>s({ssoEnabled:a.target.checked})}),"Enable SSO"]})}),m.ssoEnabled&&(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"SSO Provider"}),(0,b.jsxs)("select",{value:m.ssoProvider||"oauth2",onChange:a=>s({ssoProvider:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"},children:[(0,b.jsx)("option",{value:"oauth2",children:"OAuth2"}),(0,b.jsx)("option",{value:"saml",children:"SAML"})]})]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"checkbox",checked:m.ldapEnabled,onChange:a=>s({ldapEnabled:a.target.checked})}),"Enable LDAP/Active Directory"]})})]})]}),"email"===o&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{style:{marginBottom:"1rem"},children:"Email Settings"}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,b.jsx)("div",{children:(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"checkbox",checked:m.emailNotificationsEnabled,onChange:a=>s({emailNotificationsEnabled:a.target.checked})}),"Enable Email Notifications"]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"From Address"}),(0,b.jsx)("input",{type:"email",value:m.emailFromAddress,onChange:a=>s({emailFromAddress:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"From Name"}),(0,b.jsx)("input",{type:"text",value:m.emailFromName,onChange:a=>s({emailFromName:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]})]})]}),"files"===o&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{style:{marginBottom:"1rem"},children:"File Upload Settings"}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Max File Size (bytes)"}),(0,b.jsx)("input",{type:"number",value:m.maxFileSize,onChange:a=>s({maxFileSize:parseInt(a.target.value)||0x6400000}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}}),(0,b.jsxs)("small",{style:{color:"var(--text-secondary)"},children:["Current: ",(m.maxFileSize/1024/1024).toFixed(2)," MB"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Allowed File Types (comma-separated, * for all)"}),(0,b.jsx)("input",{type:"text",value:m.allowedFileTypes.join(", "),onChange:a=>s({allowedFileTypes:a.target.value.split(",").map(a=>a.trim())}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]})]})]}),"branding"===o&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{style:{marginBottom:"1rem"},children:"Branding"}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Logo URL"}),(0,b.jsx)("input",{type:"url",value:m.logoUrl||"",onChange:a=>s({logoUrl:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Primary Color (hex)"}),(0,b.jsx)("input",{type:"color",value:m.primaryColor||"#3b82f6",onChange:a=>s({primaryColor:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Secondary Color (hex)"}),(0,b.jsx)("input",{type:"color",value:m.secondaryColor||"#8b5cf6",onChange:a=>s({secondaryColor:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Favicon URL"}),(0,b.jsx)("input",{type:"url",value:m.faviconUrl||"",onChange:a=>s({faviconUrl:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]})]})]}),"tickets"===o&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{style:{marginBottom:"1rem"},children:"Ticket Settings"}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Default Ticket Priority"}),(0,b.jsxs)("select",{value:m.defaultTicketPriority,onChange:a=>s({defaultTicketPriority:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"},children:[(0,b.jsx)("option",{value:"LOW",children:"Low"}),(0,b.jsx)("option",{value:"MEDIUM",children:"Medium"}),(0,b.jsx)("option",{value:"HIGH",children:"High"}),(0,b.jsx)("option",{value:"CRITICAL",children:"Critical"})]})]}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"checkbox",checked:m.autoAssignEnabled,onChange:a=>s({autoAssignEnabled:a.target.checked})}),"Enable Auto-Assignment"]})}),m.autoAssignEnabled&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Auto-Assignment Method"}),(0,b.jsxs)("select",{value:m.autoAssignMethod||"round-robin",onChange:a=>s({autoAssignMethod:a.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"},children:[(0,b.jsx)("option",{value:"round-robin",children:"Round Robin"}),(0,b.jsx)("option",{value:"least-busy",children:"Least Busy"}),(0,b.jsx)("option",{value:"random",children:"Random"})]})]})]})]}),"custom-fields"===o&&(0,b.jsx)(j,{}),"ticket-types"===o&&(0,b.jsx)(k,{})]})]})}):null}function j(){let[a,d]=(0,c.useState)([]),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)("ticket"),[s,t]=(0,c.useState)({name:"",label:"",type:"text",required:!1,defaultValue:"",options:[],order:0});(0,c.useEffect)(()=>{u()},[q]);let u=async()=>{try{j(!0);let a=localStorage.getItem("accessToken"),b=await fetch(`/api/v1/admin/config/custom-fields?entityType=${q}&includeInactive=true`,{headers:{Authorization:`Bearer ${a}`}}),c=await b.json();c.success?d(c.data.fields):l(c.error?.message||"Failed to load custom fields")}catch(a){l("An unexpected error occurred")}finally{j(!1)}},v=async a=>{a.preventDefault();try{let a=localStorage.getItem("accessToken"),b={...s,entityType:q,options:["select","checkbox"].includes(s.type)&&s.options.length>0?s.options:null,...o&&{active:!1!==o.active}},c=await fetch("/api/v1/admin/config/custom-fields",{method:o?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(o?{id:o.id,...b}:b)}),d=await c.json();d.success?(n(!1),p(null),t({name:"",label:"",type:"text",required:!1,defaultValue:"",options:[],order:0}),u(),l("")):l(d.error?.message||"Failed to save custom field")}catch(a){l("An unexpected error occurred")}},w=async a=>{if(confirm("Are you sure you want to delete this custom field?"))try{let b=localStorage.getItem("accessToken"),c=await fetch(`/api/v1/admin/config/custom-fields?id=${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}}),d=await c.json();d.success?u():l(d.error?.message||"Failed to delete custom field")}catch(a){l("An unexpected error occurred")}};return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,b.jsxs)("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[(0,b.jsx)("h2",{style:{margin:0},children:"Custom Fields"}),(0,b.jsx)("select",{value:q,onChange:a=>r(a.target.value),className:"input",style:{padding:"0.5rem",minWidth:"150px"},children:[{value:"ticket",label:"Ticket"},{value:"asset",label:"Asset"},{value:"change",label:"Change Request"},{value:"user",label:"User"}].map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)("button",{onClick:()=>{p(null),t({name:"",label:"",type:"text",required:!1,defaultValue:"",options:[],order:a.length}),n(!0)},className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,b.jsx)(f,{className:"w-5 h-5"}),"Add Custom Field"]})]}),k&&(0,b.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--error)"},children:k}),i?(0,b.jsx)("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading custom fields..."}):0===a.length?(0,b.jsxs)("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:["No custom fields defined for ",q,'s. Click "Add Custom Field" to create one.']}):(0,b.jsx)("div",{className:"card",style:{overflowX:"auto",padding:0},children:(0,b.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{style:{borderBottom:"2px solid var(--border-color)",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Label"}),(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Type"}),(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Required"}),(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Default Value"}),(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Order"}),(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Status"}),(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"right",fontWeight:600,fontSize:"0.875rem"},children:"Actions"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[(0,b.jsx)("td",{style:{padding:"1rem"},children:a.label}),(0,b.jsx)("td",{style:{padding:"1rem",textTransform:"capitalize"},children:a.type}),(0,b.jsx)("td",{style:{padding:"1rem"},children:(0,b.jsx)("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:a.required?"rgba(34, 197, 94, 0.15)":"var(--bg-tertiary)",color:a.required?"rgb(34, 197, 94)":"var(--text-secondary)",borderRadius:"4px",fontSize:"0.75rem"},children:a.required?"Yes":"No"})}),(0,b.jsx)("td",{style:{padding:"1rem",color:"var(--text-secondary)"},children:a.defaultValue||"-"}),(0,b.jsx)("td",{style:{padding:"1rem"},children:a.order}),(0,b.jsx)("td",{style:{padding:"1rem"},children:(0,b.jsx)("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:a.active?"rgba(34, 197, 94, 0.15)":"rgba(239, 68, 68, 0.15)",color:a.active?"rgb(34, 197, 94)":"rgb(239, 68, 68)",borderRadius:"4px",fontSize:"0.75rem"},children:a.active?"Active":"Inactive"})}),(0,b.jsx)("td",{style:{padding:"1rem",textAlign:"right"},children:(0,b.jsxs)("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[(0,b.jsx)("button",{onClick:()=>{p({...a,active:!1!==a.active}),t({name:a.name,label:a.label,type:a.type,required:a.required,defaultValue:a.defaultValue||"",options:a.options&&Array.isArray(a.options)?a.options:[],order:a.order}),n(!0)},className:"btn btn-secondary",style:{padding:"0.375rem 0.75rem",fontSize:"0.8125rem"},title:"Edit",children:(0,b.jsx)(g,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>w(a.id),className:"btn btn-secondary",style:{padding:"0.375rem 0.75rem",fontSize:"0.8125rem",color:"var(--error)"},title:"Delete",children:(0,b.jsx)(h.TrashIcon,{className:"w-4 h-4"})})]})})]},a.id))})]})}),m&&(0,b.jsx)("div",{className:"modal-overlay",children:(0,b.jsxs)("div",{className:"modal-content",style:{maxWidth:"600px"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,b.jsx)("h2",{style:{margin:0},children:o?"Edit Custom Field":"Add Custom Field"}),(0,b.jsx)("button",{onClick:()=>n(!1),className:"icon-button",children:(0,b.jsx)(e.XMarkIcon,{className:"w-6 h-6"})})]}),(0,b.jsxs)("form",{onSubmit:v,children:[(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",children:"Field Name (Internal) *"}),(0,b.jsx)("input",{type:"text",className:"input",value:s.name,onChange:a=>t({...s,name:a.target.value.toLowerCase().replace(/\s+/g,"_")}),placeholder:"e.g., custom_field_name",required:!0,disabled:!!o}),(0,b.jsx)("small",{style:{color:"var(--text-secondary)"},children:"Internal identifier (lowercase, underscores only)"})]}),(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",children:"Field Label (Display) *"}),(0,b.jsx)("input",{type:"text",className:"input",value:s.label,onChange:a=>t({...s,label:a.target.value}),placeholder:"e.g., Custom Field Name",required:!0})]}),(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",children:"Field Type *"}),(0,b.jsx)("select",{className:"input",value:s.type,onChange:a=>t({...s,type:a.target.value,options:[]}),required:!0,children:[{value:"text",label:"Text"},{value:"textarea",label:"Textarea"},{value:"number",label:"Number"},{value:"date",label:"Date"},{value:"select",label:"Select (Dropdown)"},{value:"checkbox",label:"Checkbox"}].map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))})]}),["select","checkbox"].includes(s.type)&&(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",children:"Options (one per line) *"}),(0,b.jsx)("textarea",{className:"input",value:s.options.join("\n"),onChange:a=>t({...s,options:a.target.value.split("\n").filter(a=>a.trim())}),placeholder:"Option 1 Option 2 Option 3",rows:4,required:!0}),(0,b.jsx)("small",{style:{color:"var(--text-secondary)"},children:"Enter each option on a new line"})]}),(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",children:"Default Value"}),(0,b.jsx)("input",{type:"number"===s.type?"number":"date"===s.type?"date":"text",className:"input",value:s.defaultValue,onChange:a=>t({...s,defaultValue:a.target.value}),placeholder:"Optional default value"})]}),(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",children:"Display Order"}),(0,b.jsx)("input",{type:"number",className:"input",value:s.order,onChange:a=>t({...s,order:parseInt(a.target.value)||0}),min:"0"})]}),(0,b.jsx)("div",{style:{marginBottom:"1rem"},children:(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,b.jsx)("input",{type:"checkbox",checked:s.required,onChange:a=>t({...s,required:a.target.checked})}),(0,b.jsx)("span",{children:"Required Field"})]})}),o&&(0,b.jsx)("div",{style:{marginBottom:"1.5rem"},children:(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,b.jsx)("input",{type:"checkbox",checked:!1!==o.active,onChange:a=>p({...o,active:a.target.checked})}),(0,b.jsx)("span",{children:"Active"})]})}),(0,b.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[(0,b.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>n(!1),children:"Cancel"}),(0,b.jsxs)("button",{type:"submit",className:"btn btn-primary",children:[o?"Update":"Create"," Field"]})]})]})]})})]})}function k(){let[a,d]=(0,c.useState)([]),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)({name:"",description:"",icon:"",color:"#3b82f6",active:!0});(0,c.useEffect)(()=>{s()},[]);let s=async()=>{try{j(!0);let a=localStorage.getItem("accessToken"),b=await fetch("/api/v1/admin/config/ticket-types?includeInactive=true",{headers:{Authorization:`Bearer ${a}`}}),c=await b.json();c.success?d(c.data.types):l(c.error?.message||"Failed to load ticket types")}catch(a){l("An unexpected error occurred")}finally{j(!1)}},t=async a=>{a.preventDefault();try{let a=localStorage.getItem("accessToken"),b=await fetch("/api/v1/admin/config/ticket-types",{method:o?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(o?{id:o.id,...q}:q)}),c=await b.json();c.success?(n(!1),p(null),r({name:"",description:"",icon:"",color:"#3b82f6",active:!0}),s(),l("")):l(c.error?.message||"Failed to save ticket type")}catch(a){l("An unexpected error occurred")}},u=async a=>{if(confirm("Are you sure you want to delete this ticket type?"))try{let b=localStorage.getItem("accessToken"),c=await fetch(`/api/v1/admin/config/ticket-types?id=${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}}),d=await c.json();d.success?s():l(d.error?.message||"Failed to delete ticket type")}catch(a){l("An unexpected error occurred")}};return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,b.jsx)("h2",{style:{margin:0},children:"Ticket Types"}),(0,b.jsxs)("button",{onClick:()=>{p(null),r({name:"",description:"",icon:"",color:"#3b82f6",active:!0}),n(!0)},className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,b.jsx)(f,{className:"w-5 h-5"}),"Add Ticket Type"]})]}),k&&(0,b.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--error)"},children:k}),i?(0,b.jsx)("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading ticket types..."}):0===a.length?(0,b.jsx)("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:'No ticket types defined. Click "Add Ticket Type" to create one.'}):(0,b.jsx)("div",{className:"card",style:{overflowX:"auto",padding:0},children:(0,b.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{style:{borderBottom:"2px solid var(--border-color)",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Name"}),(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Description"}),(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Icon"}),(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Color"}),(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Status"}),(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"right",fontWeight:600,fontSize:"0.875rem"},children:"Actions"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[(0,b.jsx)("td",{style:{padding:"1rem",fontWeight:500},children:a.name}),(0,b.jsx)("td",{style:{padding:"1rem",color:"var(--text-secondary)"},children:a.description||"-"}),(0,b.jsx)("td",{style:{padding:"1rem"},children:a.icon||"-"}),(0,b.jsx)("td",{style:{padding:"1rem"},children:a.color&&(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,b.jsx)("div",{style:{width:"24px",height:"24px",borderRadius:"4px",backgroundColor:a.color,border:"1px solid var(--border-color)"}}),(0,b.jsx)("span",{style:{fontSize:"0.875rem"},children:a.color})]})}),(0,b.jsx)("td",{style:{padding:"1rem"},children:(0,b.jsx)("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:a.active?"rgba(34, 197, 94, 0.15)":"rgba(239, 68, 68, 0.15)",color:a.active?"rgb(34, 197, 94)":"rgb(239, 68, 68)",borderRadius:"4px",fontSize:"0.75rem"},children:a.active?"Active":"Inactive"})}),(0,b.jsx)("td",{style:{padding:"1rem",textAlign:"right"},children:(0,b.jsxs)("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[(0,b.jsx)("button",{onClick:()=>{p(a),r({name:a.name,description:a.description||"",icon:a.icon||"",color:a.color||"#3b82f6",active:!1!==a.active}),n(!0)},className:"btn btn-secondary",style:{padding:"0.375rem 0.75rem",fontSize:"0.8125rem"},title:"Edit",children:(0,b.jsx)(g,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>u(a.id),className:"btn btn-secondary",style:{padding:"0.375rem 0.75rem",fontSize:"0.8125rem",color:"var(--error)"},title:"Delete",children:(0,b.jsx)(h.TrashIcon,{className:"w-4 h-4"})})]})})]},a.id))})]})}),m&&(0,b.jsx)("div",{className:"modal-overlay",children:(0,b.jsxs)("div",{className:"modal-content",style:{maxWidth:"500px"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,b.jsx)("h2",{style:{margin:0},children:o?"Edit Ticket Type":"Add Ticket Type"}),(0,b.jsx)("button",{onClick:()=>n(!1),className:"icon-button",children:(0,b.jsx)(e.XMarkIcon,{className:"w-6 h-6"})})]}),(0,b.jsxs)("form",{onSubmit:t,children:[(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",children:"Name *"}),(0,b.jsx)("input",{type:"text",className:"input",value:q.name,onChange:a=>r({...q,name:a.target.value}),placeholder:"e.g., Incident, Request, Problem",required:!0,disabled:!!o})]}),(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",children:"Description"}),(0,b.jsx)("textarea",{className:"input",value:q.description,onChange:a=>r({...q,description:a.target.value}),placeholder:"Brief description of this ticket type",rows:3})]}),(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",children:"Icon (Identifier)"}),(0,b.jsx)("input",{type:"text",className:"input",value:q.icon,onChange:a=>r({...q,icon:a.target.value}),placeholder:"e.g., bug, question, exclamation"}),(0,b.jsx)("small",{style:{color:"var(--text-secondary)"},children:"Icon identifier for UI display"})]}),(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",children:"Color"}),(0,b.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,b.jsx)("input",{type:"color",className:"input",value:q.color,onChange:a=>r({...q,color:a.target.value}),style:{width:"80px",height:"40px",padding:"0.25rem"}}),(0,b.jsx)("input",{type:"text",className:"input",value:q.color,onChange:a=>r({...q,color:a.target.value}),placeholder:"#3b82f6",style:{flex:1}})]})]}),o&&(0,b.jsx)("div",{style:{marginBottom:"1.5rem"},children:(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,b.jsx)("input",{type:"checkbox",checked:q.active,onChange:a=>r({...q,active:a.target.checked})}),(0,b.jsx)("span",{children:"Active"})]})}),(0,b.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[(0,b.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>n(!1),children:"Cancel"}),(0,b.jsxs)("button",{type:"submit",className:"btn btn-primary",children:[o?"Update":"Create"," Type"]})]})]})]})})]})}a.s(["default",()=>i],84293)}];

//# sourceMappingURL=app_admin_config_page_tsx_c68fb097._.js.map