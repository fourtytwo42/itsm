module.exports=[96954,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);let e=["USER_CREATED","USER_UPDATED","USER_DELETED","USER_ACTIVATED","USER_DEACTIVATED","USER_PASSWORD_RESET","USER_ROLE_CHANGED","ORGANIZATION_CREATED","ORGANIZATION_UPDATED","ORGANIZATION_DELETED","TENANT_CREATED","TENANT_UPDATED","TENANT_DELETED","TENANT_USER_ASSIGNED","TENANT_USER_UNASSIGNED","TICKET_CREATED","TICKET_UPDATED","TICKET_DELETED","TICKET_ASSIGNED","TICKET_STATUS_CHANGED","TICKET_PRIORITY_CHANGED","TICKET_COMMENT_ADDED","KB_ARTICLE_CREATED","KB_ARTICLE_UPDATED","KB_ARTICLE_DELETED","ASSET_CREATED","ASSET_UPDATED","ASSET_DELETED","ASSET_ASSIGNED","CHANGE_CREATED","CHANGE_UPDATED","CHANGE_DELETED","CHANGE_APPROVED","CHANGE_REJECTED","PERMISSION_GRANTED","PERMISSION_REVOKED"];function f(){let a=(0,d.useSearchParams)().get("organizationId"),[f,g]=(0,c.useState)(null),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)("");(0,c.useEffect)(()=>{p()},[a]);let p=async()=>{try{let b=localStorage.getItem("accessToken"),c=new URLSearchParams;a&&c.append("organizationId",a);let d=await fetch(`/api/v1/organizations/audit/config?${c.toString()}`,{headers:{Authorization:`Bearer ${b}`}});if(!d.ok)throw Error("Failed to fetch audit config");let e=await d.json();g(e)}catch(a){m(a.message)}finally{i(!1)}},q=async b=>{if(b.preventDefault(),f){k(!0),m(""),o("");try{let b=localStorage.getItem("accessToken"),c=await fetch("/api/v1/organizations/audit/config",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({organizationId:a||f.organizationId,enabled:f.enabled,events:f.events,retentionDays:f.retentionDays||null})}),d=await c.json();if(!c.ok)throw Error(d.error||"Failed to update audit config");o("Audit configuration updated successfully"),g(d)}catch(a){m(a.message)}finally{k(!1)}}};return h?(0,b.jsx)("div",{children:"Loading audit configuration..."}):f?(0,b.jsxs)("div",{style:{padding:"2rem",maxWidth:"1000px",margin:"0 auto"},children:[(0,b.jsx)("h1",{style:{marginBottom:"2rem"},children:"Audit Configuration"}),l&&(0,b.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--error)"},children:l}),n&&(0,b.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(34, 197, 94, 0.1)",border:"1px solid var(--success)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--success)"},children:n}),(0,b.jsx)("div",{className:"card",style:{padding:"2rem"},children:(0,b.jsxs)("form",{onSubmit:q,children:[(0,b.jsx)("div",{style:{marginBottom:"1.5rem"},children:(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,b.jsx)("input",{type:"checkbox",checked:f.enabled,onChange:a=>g({...f,enabled:a.target.checked}),disabled:j}),(0,b.jsx)("span",{children:"Enable Audit Logging"})]})}),(0,b.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,b.jsx)("label",{className:"label",htmlFor:"retentionDays",children:"Retention Days (leave empty for forever)"}),(0,b.jsx)("input",{id:"retentionDays",type:"number",className:"input",value:f.retentionDays||"",onChange:a=>g({...f,retentionDays:a.target.value?parseInt(a.target.value):void 0}),min:"1",disabled:j})]}),(0,b.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,b.jsx)("h3",{style:{marginBottom:"1rem"},children:"Events to Track"}),(0,b.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"0.5rem",maxHeight:"400px",overflowY:"auto",padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"0.5rem"},children:e.map(a=>(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,b.jsx)("input",{type:"checkbox",checked:f.events.includes(a),onChange:()=>(a=>{if(!f)return;let b=f.events.includes(a)?f.events.filter(b=>b!==a):[...f.events,a];g({...f,events:b})})(a),disabled:j||!f.enabled}),(0,b.jsx)("span",{style:{fontSize:"0.875rem"},children:a})]},a))})]}),(0,b.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:j,children:j?"Saving...":"Save Configuration"})]})})]}):(0,b.jsx)("div",{children:"Audit configuration not found"})}function g(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{children:"Loading audit configuration..."}),children:(0,b.jsx)(f,{})})}a.s(["default",()=>g])}];

//# sourceMappingURL=app_organization_audit_config_page_tsx_daee8042._.js.map