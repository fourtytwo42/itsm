{"version":3,"sources":["../../../../components/OrganizationContext.tsx","../../../../app/kb/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport Link from 'next/link'\n\ninterface Organization {\n  id: string\n  name: string\n  slug: string\n  logo?: string\n}\n\nexport default function OrganizationContext() {\n  const [organization, setOrganization] = useState<Organization | null>(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    const fetchOrganization = async () => {\n      try {\n        const token = localStorage.getItem('accessToken')\n        if (!token) {\n          setLoading(false)\n          return\n        }\n\n        const response = await fetch('/api/v1/organizations/me', {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        })\n\n        if (response.ok) {\n          const data = await response.json()\n          setOrganization(data.organization)\n        }\n      } catch (err) {\n        // Silently fail - organization context is optional\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchOrganization()\n  }, [])\n\n  if (loading || !organization) {\n    return null\n  }\n\n  return (\n    <div\n      style={{\n        padding: '0.5rem 1rem',\n        backgroundColor: 'var(--bg-secondary)',\n        borderBottom: '1px solid var(--border)',\n        display: 'flex',\n        alignItems: 'center',\n        gap: '0.75rem',\n        fontSize: '0.875rem',\n      }}\n    >\n      {organization.logo && (\n        <img\n          src={organization.logo}\n          alt={organization.name}\n          style={{ width: '24px', height: '24px', objectFit: 'contain' }}\n        />\n      )}\n      <span style={{ color: 'var(--text-secondary)' }}>Organization:</span>\n      <Link\n        href=\"/organization/settings\"\n        style={{\n          color: 'var(--accent-primary)',\n          textDecoration: 'none',\n          fontWeight: 500,\n        }}\n      >\n        {organization.name}\n      </Link>\n    </div>\n  )\n}\n\n","'use client'\n\nimport Link from 'next/link'\nimport { useEffect, useState } from 'react'\nimport OrganizationContext from '@/components/OrganizationContext'\n\ninterface Article {\n  id: string\n  slug: string\n  title: string\n  tags: string[]\n  createdAt: string\n}\n\nexport default function KnowledgeBasePage() {\n  const [articles, setArticles] = useState<Article[]>([])\n  const [query, setQuery] = useState('')\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState('')\n\n  const loadArticles = async () => {\n    setLoading(true)\n    setError('')\n    try {\n      const res = query.trim()\n        ? await fetch('/api/v1/kb/search', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ query }),\n          })\n        : await fetch('/api/v1/kb')\n\n      const data = await res.json()\n      if (!data.success) {\n        setError('Failed to load articles')\n        return\n      }\n      setArticles(data.data)\n    } catch (err) {\n      setError('Failed to load articles')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    loadArticles()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const onSearch = async (e: React.FormEvent) => {\n    e.preventDefault()\n    await loadArticles()\n  }\n\n  return (\n    <div className=\"container\" style={{ padding: '2rem', display: 'grid', gap: '1.5rem' }}>\n      <OrganizationContext />\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginTop: '1rem' }}>\n        <h1 style={{ fontSize: '2rem', fontWeight: 'bold' }}>Knowledge Base</h1>\n      </div>\n\n      <form onSubmit={onSearch} style={{ display: 'flex', gap: '0.5rem' }}>\n        <input\n          className=\"input\"\n          placeholder=\"Search articles...\"\n          value={query}\n          onChange={(e) => setQuery(e.target.value)}\n        />\n        <button className=\"btn btn-primary\" type=\"submit\">\n          Search\n        </button>\n      </form>\n\n      {loading && <p>Loading articles...</p>}\n      {error && <p style={{ color: 'var(--error)' }}>{error}</p>}\n\n      {!loading && !error && (\n        <div style={{ display: 'grid', gap: '1rem' }}>\n          {articles.map((article) => (\n            <Link key={article.id} href={`/kb/${article.slug}`} className=\"card\" style={{ textDecoration: 'none', color: 'inherit' }}>\n              <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '0.25rem' }}>\n                <h3 style={{ margin: 0 }}>{article.title}</h3>\n                <span style={{ color: 'var(--text-tertiary)', fontSize: '0.85rem' }}>\n                  {new Date(article.createdAt).toLocaleDateString()}\n                </span>\n              </div>\n              <div style={{ display: 'flex', gap: '0.5rem', flexWrap: 'wrap', color: 'var(--text-tertiary)', fontSize: '0.85rem' }}>\n                {article.tags.map((tag) => (\n                  <span key={tag} style={{ border: '1px solid var(--border-color)', borderRadius: '0.5rem', padding: '0.15rem 0.5rem' }}>\n                    #{tag}\n                  </span>\n                ))}\n              </div>\n            </Link>\n          ))}\n          {articles.length === 0 && <p>No articles found.</p>}\n        </div>\n      )}\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OASe,SAAS,IACtB,GAAM,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAsB,MAChE,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,SA+BvC,CA7BA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KA0BR,CAzB0B,UACxB,GAAI,CACF,IAAM,EAAQ,aAAa,OAAO,CAAC,eACnC,GAAI,CAAC,EAAO,YACV,GAAW,GAIb,IAAM,EAAW,MAAM,MAAM,2BAA4B,CACvD,QAAS,CACP,cAAe,CAAC,OAAO,EAAE,EAAA,CAAO,AAClC,CACF,GAEA,GAAI,EAAS,EAAE,CAAE,CACf,IAAM,EAAO,MAAM,EAAS,IAAI,GAChC,EAAgB,EAAK,YAAY,CACnC,CACF,CAAE,MAAO,EAAK,CAEd,QAAU,CACR,GAAW,EACb,EACF,GAGF,EAAG,EAAE,EAED,GAAW,CAAC,GACP,KAIP,CAAA,EAAA,EAAA,CAL4B,GAK5B,EAAC,MAAA,CACC,MAAO,CACL,QAAS,cACT,gBAAiB,sBACjB,aAAc,0BACd,QAAS,OACT,WAAY,SACZ,IAAK,UACL,SAAU,UACZ,YAEC,EAAa,IAAI,EAChB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EAAa,IAAI,CACtB,IAAK,EAAa,IAAI,CACtB,MAAO,CAAE,MAAO,OAAQ,OAAQ,OAAQ,UAAW,SAAU,IAGjE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,MAAO,CAAE,MAAO,uBAAwB,WAAG,kBACjD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,yBACL,MAAO,CACL,MAAO,wBACP,eAAgB,OAChB,WAAY,GACd,WAEC,EAAa,IAAI,KAI1B,iEC/EA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAUe,SAAS,IACtB,GAAM,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAY,EAAE,EAChD,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7B,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAE7B,EAAe,UACnB,GAAW,GACX,EAAS,IACT,GAAI,CACF,IAAM,EAAM,EAAM,IAAI,GAClB,MAAM,MAAM,oBAAqB,CAC/B,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,OAAE,CAAM,EAC/B,GACA,MAAM,MAAM,cAEV,EAAO,MAAM,EAAI,IAAI,GAC3B,GAAI,CAAC,EAAK,OAAO,CAAE,YACjB,EAAS,2BAGX,EAAY,EAAK,IAAI,CACvB,CAAE,MAAO,EAAK,CACZ,EAAS,0BACX,QAAU,CACR,GAAW,EACb,CACF,EAEA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAEF,EAAG,EAAE,EAEL,IAAM,EAAW,MAAO,IACtB,EAAE,cAAc,GAChB,MAAM,GACR,EAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,YAAY,MAAO,CAAE,QAAS,OAAQ,QAAS,OAAQ,IAAK,QAAS,YAClF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAmB,CAAA,CAAA,GACpB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,eAAgB,gBAAiB,WAAY,SAAU,UAAW,MAAO,WACtG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,MAAO,CAAE,SAAU,OAAQ,WAAY,MAAO,WAAG,qBAGvD,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAU,MAAO,CAAE,QAAS,OAAQ,IAAK,QAAS,YAChE,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,UAAU,QACV,YAAY,qBACZ,MAAO,EACP,SAAU,AAAC,GAAM,EAAS,EAAE,MAAM,CAAC,KAAK,IAE1C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,kBAAkB,KAAK,kBAAS,cAKnD,GAAW,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,wBACd,GAAS,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,MAAO,CAAE,MAAO,cAAe,WAAI,IAE/C,CAAC,GAAW,CAAC,GACZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,IAAK,MAAO,YACxC,EAAS,GAAG,CAAC,AAAC,GACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAkB,KAAM,CAAC,IAAI,EAAE,EAAQ,IAAI,CAAA,CAAE,CAAE,UAAU,OAAO,MAAO,CAAE,eAAgB,OAAQ,MAAO,SAAU,YACrH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,eAAgB,gBAAiB,aAAc,SAAU,YACtF,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,MAAO,CAAE,OAAQ,CAAE,WAAI,EAAQ,KAAK,GACxC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,MAAO,CAAE,MAAO,uBAAwB,SAAU,SAAU,WAC/D,IAAI,KAAK,EAAQ,SAAS,EAAE,kBAAkB,QAGnD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,IAAK,SAAU,SAAU,OAAQ,MAAO,uBAAwB,SAAU,SAAU,WAChH,EAAQ,IAAI,CAAC,GAAG,CAAC,AAAC,GACjB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAe,MAAO,CAAE,OAAQ,gCAAiC,aAAc,SAAU,QAAS,gBAAiB,YAAG,IACnH,IADO,QATN,EAAQ,EAAE,GAgBF,IAApB,EAAS,MAAM,EAAU,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,4BAKvC"}