{"version":3,"sources":["../../../../app/manager/tenants/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport Link from 'next/link'\n\ninterface Tenant {\n  id: string\n  name: string\n  slug: string\n  logo?: string\n  description?: string\n  requiresLogin: boolean\n  isActive: boolean\n  createdAt: string\n  _count?: {\n    tickets: number\n    assignments: number\n  }\n}\n\nexport default function ManagerTenantsPage() {\n  const router = useRouter()\n  const [tenants, setTenants] = useState<Tenant[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState('')\n  const [filters, setFilters] = useState({\n    search: '',\n    isActive: '',\n  })\n\n  useEffect(() => {\n    loadTenants()\n  }, [filters])\n\n  const loadTenants = async () => {\n    try {\n      setLoading(true)\n      const token = localStorage.getItem('accessToken')\n      const params = new URLSearchParams()\n      if (filters.search) params.append('search', filters.search)\n      if (filters.isActive !== '') params.append('isActive', filters.isActive)\n\n      const response = await fetch(`/api/v1/manager/tenants?${params.toString()}`, {\n        headers: token ? { Authorization: `Bearer ${token}` } : {},\n      })\n\n      const data = await response.json()\n\n      if (data.success) {\n        setTenants(data.data.tenants || data.data)\n      } else {\n        setError(data.error?.message || 'Failed to load tenants')\n      }\n    } catch (err) {\n      setError('An unexpected error occurred')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  if (loading) {\n    return (\n      <div style={{ padding: '2rem' }}>\n        <p>Loading tenants...</p>\n      </div>\n    )\n  }\n\n  return (\n    <div style={{ padding: '2rem', maxWidth: '1400px', margin: '0 auto' }}>\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '2rem' }}>\n        <h1 style={{ fontSize: '2rem', margin: 0 }}>My Tenants</h1>\n        <button\n          onClick={() => router.push('/manager/tenants/new')}\n          style={{\n            padding: '0.75rem 1.5rem',\n            backgroundColor: 'var(--accent-primary)',\n            color: 'white',\n            border: 'none',\n            borderRadius: '0.5rem',\n            cursor: 'pointer',\n            fontSize: '1rem',\n          }}\n        >\n          Create Tenant\n        </button>\n      </div>\n\n      {error && (\n        <div\n          style={{\n            padding: '1rem',\n            backgroundColor: 'var(--error-bg)',\n            color: 'var(--error-text)',\n            borderRadius: '0.5rem',\n            marginBottom: '1rem',\n          }}\n        >\n          {error}\n        </div>\n      )}\n\n      <div style={{ display: 'flex', gap: '1rem', marginBottom: '2rem' }}>\n        <input\n          type=\"text\"\n          placeholder=\"Search tenants...\"\n          value={filters.search}\n          onChange={(e) => setFilters({ ...filters, search: e.target.value })}\n          style={{\n            flex: 1,\n            padding: '0.75rem',\n            border: '1px solid var(--border-color)',\n            borderRadius: '0.5rem',\n            backgroundColor: 'var(--bg-secondary)',\n            color: 'var(--text-primary)',\n          }}\n        />\n        <select\n          value={filters.isActive}\n          onChange={(e) => setFilters({ ...filters, isActive: e.target.value })}\n          style={{\n            padding: '0.75rem',\n            border: '1px solid var(--border-color)',\n            borderRadius: '0.5rem',\n            backgroundColor: 'var(--bg-secondary)',\n            color: 'var(--text-primary)',\n          }}\n        >\n          <option value=\"\">All Status</option>\n          <option value=\"true\">Active</option>\n          <option value=\"false\">Inactive</option>\n        </select>\n      </div>\n\n      {tenants.length === 0 ? (\n        <div style={{ textAlign: 'center', padding: '3rem', color: 'var(--text-secondary)' }}>\n          <p>No tenants found. Create your first tenant to get started.</p>\n        </div>\n      ) : (\n        <div\n          style={{\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))',\n            gap: '1.5rem',\n          }}\n        >\n          {tenants.map((tenant) => (\n            <div\n              key={tenant.id}\n              style={{\n                padding: '1.5rem',\n                backgroundColor: 'var(--bg-secondary)',\n                borderRadius: '0.5rem',\n                border: '1px solid var(--border-color)',\n                display: 'flex',\n                flexDirection: 'column',\n                gap: '1rem',\n              }}\n            >\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start' }}>\n                <div>\n                  <h3 style={{ margin: 0, fontSize: '1.25rem', marginBottom: '0.5rem' }}>{tenant.name}</h3>\n                  <p style={{ margin: 0, color: 'var(--text-secondary)', fontSize: '0.875rem' }}>\n                    {tenant.slug}\n                  </p>\n                </div>\n                <span\n                  style={{\n                    padding: '0.25rem 0.75rem',\n                    borderRadius: '1rem',\n                    fontSize: '0.75rem',\n                    backgroundColor: tenant.isActive ? 'var(--success-bg)' : 'var(--error-bg)',\n                    color: tenant.isActive ? 'var(--success-text)' : 'var(--error-text)',\n                  }}\n                >\n                  {tenant.isActive ? 'Active' : 'Inactive'}\n                </span>\n              </div>\n\n              {tenant.description && (\n                <p style={{ margin: 0, color: 'var(--text-secondary)', fontSize: '0.875rem' }}>\n                  {tenant.description}\n                </p>\n              )}\n\n              {tenant._count && (\n                <div style={{ display: 'flex', gap: '1rem', fontSize: '0.875rem', color: 'var(--text-secondary)' }}>\n                  <span>{tenant._count.tickets || 0} tickets</span>\n                  <span>{tenant._count.assignments || 0} assignments</span>\n                </div>\n              )}\n\n              <div style={{ display: 'flex', gap: '0.5rem', marginTop: 'auto' }}>\n                <Link\n                  href={`/manager/tenants/${tenant.id}`}\n                  style={{\n                    flex: 1,\n                    padding: '0.5rem',\n                    textAlign: 'center',\n                    backgroundColor: 'var(--accent-primary)',\n                    color: 'white',\n                    textDecoration: 'none',\n                    borderRadius: '0.5rem',\n                    fontSize: '0.875rem',\n                  }}\n                >\n                  Manage\n                </Link>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}