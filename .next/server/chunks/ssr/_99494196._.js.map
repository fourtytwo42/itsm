{"version":3,"sources":["../../../../components/OrganizationContext.tsx","../../../../app/tickets/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport Link from 'next/link'\n\ninterface Organization {\n  id: string\n  name: string\n  slug: string\n  logo?: string\n}\n\nexport default function OrganizationContext() {\n  const [organization, setOrganization] = useState<Organization | null>(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    const fetchOrganization = async () => {\n      try {\n        const token = localStorage.getItem('accessToken')\n        if (!token) {\n          setLoading(false)\n          return\n        }\n\n        const response = await fetch('/api/v1/organizations/me', {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        })\n\n        if (response.ok) {\n          const data = await response.json()\n          setOrganization(data.organization)\n        }\n      } catch (err) {\n        // Silently fail - organization context is optional\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchOrganization()\n  }, [])\n\n  if (loading || !organization) {\n    return null\n  }\n\n  return (\n    <div\n      style={{\n        padding: '0.5rem 1rem',\n        backgroundColor: 'var(--bg-secondary)',\n        borderBottom: '1px solid var(--border)',\n        display: 'flex',\n        alignItems: 'center',\n        gap: '0.75rem',\n        fontSize: '0.875rem',\n      }}\n    >\n      {organization.logo && (\n        <img\n          src={organization.logo}\n          alt={organization.name}\n          style={{ width: '24px', height: '24px', objectFit: 'contain' }}\n        />\n      )}\n      <span style={{ color: 'var(--text-secondary)' }}>Organization:</span>\n      <Link\n        href=\"/organization/settings\"\n        style={{\n          color: 'var(--accent-primary)',\n          textDecoration: 'none',\n          fontWeight: 500,\n        }}\n      >\n        {organization.name}\n      </Link>\n    </div>\n  )\n}\n\n","'use client'\n\nimport Link from 'next/link'\nimport { useEffect, useState } from 'react'\nimport OrganizationContext from '@/components/OrganizationContext'\n\ninterface Ticket {\n  id: string\n  ticketNumber: string\n  subject: string\n  status: string\n  priority: string\n  createdAt: string\n}\n\nexport default function TicketsPage() {\n  const [tickets, setTickets] = useState<Ticket[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState('')\n\n  useEffect(() => {\n    const fetchTickets = async () => {\n      try {\n        const res = await fetch('/api/v1/tickets')\n        const data = await res.json()\n        if (!data.success) {\n          setError('Failed to load tickets')\n          return\n        }\n        setTickets(data.data)\n      } catch (err) {\n        setError('Failed to load tickets')\n      } finally {\n        setLoading(false)\n      }\n    }\n    fetchTickets()\n  }, [])\n\n  return (\n    <div className=\"container\" style={{ padding: '2rem' }}>\n      <OrganizationContext />\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1.5rem', marginTop: '1rem' }}>\n        <h1 style={{ fontSize: '2rem', fontWeight: 'bold' }}>Tickets</h1>\n        <Link href=\"/tickets/new\" className=\"btn btn-primary\">\n          New Ticket\n        </Link>\n      </div>\n\n      {loading && <p>Loading tickets...</p>}\n      {error && <p style={{ color: 'var(--error)' }}>{error}</p>}\n\n      {!loading && !error && (\n        <div style={{ display: 'grid', gap: '1rem' }}>\n          {tickets.map((ticket) => (\n            <Link key={ticket.id} href={`/tickets/${ticket.id}`} className=\"card\" style={{ textDecoration: 'none', color: 'inherit' }}>\n              <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '0.5rem' }}>\n                <span style={{ fontWeight: 600 }}>{ticket.ticketNumber}</span>\n                <span style={{ color: 'var(--text-secondary)' }}>{new Date(ticket.createdAt).toLocaleString()}</span>\n              </div>\n              <h3 style={{ marginBottom: '0.25rem' }}>{ticket.subject}</h3>\n              <div style={{ display: 'flex', gap: '0.75rem', color: 'var(--text-secondary)', fontSize: '0.9rem' }}>\n                <span>Status: {ticket.status}</span>\n                <span>Priority: {ticket.priority}</span>\n              </div>\n            </Link>\n          ))}\n          {tickets.length === 0 && <p>No tickets yet.</p>}\n        </div>\n      )}\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}