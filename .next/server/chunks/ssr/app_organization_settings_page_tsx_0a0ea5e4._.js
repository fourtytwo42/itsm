module.exports=[25398,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(){(0,d.useRouter)();let[a,e]=(0,c.useState)(null),[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(null);(0,c.useEffect)(()=>{r()},[]);let r=async()=>{try{let a=localStorage.getItem("accessToken"),b=await fetch("/api/v1/organizations/me",{headers:{Authorization:`Bearer ${a}`}});if(!b.ok)throw Error("Failed to fetch organization");let c=await b.json();e(c.organization),c.organization?.logo&&q(c.organization.logo)}catch(a){k(a.message)}finally{g(!1)}},s=async()=>{if(n&&a){i(!0),k(""),m("");try{let b=localStorage.getItem("accessToken"),c=new FormData;c.append("file",n),c.append("organizationId",a.id);let d=await fetch("/api/v1/organizations/upload-logo",{method:"POST",headers:{Authorization:`Bearer ${b}`},body:c}),f=await d.json();if(!d.ok)throw Error(f.error||"Failed to upload logo");m("Logo uploaded successfully"),o(null),f.logoUrl&&(q(f.logoUrl),e({...a,logo:f.logoUrl}))}catch(a){k(a.message)}finally{i(!1)}}},t=async b=>{if(b.preventDefault(),a){i(!0),k(""),m("");try{let b=localStorage.getItem("accessToken"),c=await fetch(`/api/v1/global/organizations/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({name:a.name,description:a.description})}),d=await c.json();if(!c.ok)throw Error(d.error||"Failed to update organization");m("Organization updated successfully"),e(d)}catch(a){k(a.message)}finally{i(!1)}}};return f?(0,b.jsx)("div",{children:"Loading organization settings..."}):a?(0,b.jsxs)("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto"},children:[(0,b.jsx)("h1",{style:{marginBottom:"2rem"},children:"Organization Settings"}),j&&(0,b.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--error)"},children:j}),l&&(0,b.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(34, 197, 94, 0.1)",border:"1px solid var(--success)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--success)"},children:l}),(0,b.jsxs)("div",{className:"card",style:{padding:"2rem",marginBottom:"2rem"},children:[(0,b.jsx)("h2",{style:{marginBottom:"1.5rem"},children:"Logo"}),(0,b.jsxs)("div",{style:{display:"flex",gap:"1.5rem",alignItems:"flex-start"},children:[p&&(0,b.jsx)("img",{src:p,alt:"Organization logo",style:{width:"120px",height:"120px",objectFit:"contain",borderRadius:"0.5rem",border:"1px solid var(--border)"}}),(0,b.jsxs)("div",{style:{flex:1},children:[(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];if(b){o(b);let a=new FileReader;a.onloadend=()=>{q(a.result)},a.readAsDataURL(b)}},style:{marginBottom:"1rem"},disabled:h}),n&&(0,b.jsx)("button",{type:"button",className:"btn btn-primary",onClick:s,disabled:h,children:h?"Uploading...":"Upload Logo"})]})]})]}),(0,b.jsxs)("div",{className:"card",style:{padding:"2rem"},children:[(0,b.jsx)("h2",{style:{marginBottom:"1.5rem"},children:"Organization Details"}),(0,b.jsxs)("form",{onSubmit:t,children:[(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",htmlFor:"name",children:"Organization Name"}),(0,b.jsx)("input",{id:"name",type:"text",className:"input",value:a.name,onChange:b=>e({...a,name:b.target.value}),required:!0,disabled:h})]}),(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",htmlFor:"slug",children:"Slug"}),(0,b.jsx)("input",{id:"slug",type:"text",className:"input",value:a.slug,disabled:!0,style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)"}}),(0,b.jsx)("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:"Slug cannot be changed after creation"})]}),(0,b.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,b.jsx)("label",{className:"label",htmlFor:"description",children:"Description"}),(0,b.jsx)("textarea",{id:"description",className:"input",value:a.description||"",onChange:b=>e({...a,description:b.target.value}),rows:4,disabled:h})]}),(0,b.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:h,children:h?"Saving...":"Save Changes"})]})]})]}):(0,b.jsx)("div",{children:"Organization not found"})}a.s(["default",()=>e])}];

//# sourceMappingURL=app_organization_settings_page_tsx_0a0ea5e4._.js.map