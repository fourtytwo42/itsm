(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,13467,e=>{"use strict";var t=e.i(43476),r=e.i(71645),l=e.i(18566),i=e.i(27217);let a=r.forwardRef(function({title:e,titleId:t,...l},i){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},l),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}),n=r.forwardRef(function({title:e,titleId:t,...l},i){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},l),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))});var s=e.i(60759);function o(){let e=(0,l.useRouter)(),[i,a]=(0,r.useState)(null),[n,s]=(0,r.useState)(!0),[o,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),[u,x]=(0,r.useState)("general");(0,r.useEffect)(()=>{let t=localStorage.getItem("user"),r=localStorage.getItem("accessToken");if(!t||!r)return void e.push("/login");try{let r=JSON.parse(t);if(a(r),!r.roles.includes("ADMIN"))return void e.push("/dashboard");g()}catch(t){e.push("/login")}finally{s(!1)}},[e]);let g=async()=>{try{let e=localStorage.getItem("accessToken"),t=await fetch("/api/v1/admin/config",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error("Failed to load configuration");let r=await t.json();r.success&&p(r.data.config)}catch(e){console.error("Error loading config:",e)}},y=async()=>{if(h)try{m(!0);let e=localStorage.getItem("accessToken");if(!(await fetch("/api/v1/admin/config",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({config:h})})).ok)throw Error("Failed to save configuration");alert("Configuration saved successfully!")}catch(e){console.error("Error saving config:",e),alert("Failed to save configuration")}finally{m(!1)}},j=e=>{h&&p({...h,...e})};return n?(0,t.jsx)("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading..."}):i&&h?(0,t.jsx)("div",{style:{minHeight:"100vh",padding:"2rem"},children:(0,t.jsxs)("div",{className:"container",children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,t.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold"},children:"System Configuration"}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:y,disabled:o,children:o?"Saving...":"Save Changes"})]}),(0,t.jsxs)("div",{className:"card",style:{marginBottom:"2rem"},children:[(0,t.jsx)("div",{style:{display:"flex",gap:"1rem",borderBottom:"1px solid var(--border-color)",marginBottom:"1rem"},children:["general","auth","email","files","branding","tickets","custom-fields","ticket-types"].map(e=>(0,t.jsx)("button",{onClick:()=>x(e),style:{padding:"0.75rem 1.5rem",border:"none",background:"none",borderBottom:u===e?"2px solid var(--primary-color)":"2px solid transparent",cursor:"pointer",textTransform:"capitalize"},children:e.replace("-"," ")},e))}),"general"===u&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{style:{marginBottom:"1rem"},children:"General Settings"}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Organization Name"}),(0,t.jsx)("input",{type:"text",value:h.organizationName,onChange:e=>j({organizationName:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"checkbox",checked:h.maintenanceMode,onChange:e=>j({maintenanceMode:e.target.checked})}),"Maintenance Mode"]})}),h.maintenanceMode&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Maintenance Message"}),(0,t.jsx)("textarea",{value:h.maintenanceMessage||"",onChange:e=>j({maintenanceMessage:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",minHeight:"100px"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Session Timeout (minutes)"}),(0,t.jsx)("input",{type:"number",value:h.sessionTimeout,onChange:e=>j({sessionTimeout:parseInt(e.target.value)||1440}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]})]})]}),"auth"===u&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{style:{marginBottom:"1rem"},children:"Authentication Settings"}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,t.jsx)("div",{children:(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"checkbox",checked:h.registrationEnabled,onChange:e=>j({registrationEnabled:e.target.checked})}),"Enable User Registration"]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"checkbox",checked:h.passwordResetEnabled,onChange:e=>j({passwordResetEnabled:e.target.checked})}),"Enable Password Reset"]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"checkbox",checked:h.ssoEnabled,onChange:e=>j({ssoEnabled:e.target.checked})}),"Enable SSO"]})}),h.ssoEnabled&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"SSO Provider"}),(0,t.jsxs)("select",{value:h.ssoProvider||"oauth2",onChange:e=>j({ssoProvider:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"},children:[(0,t.jsx)("option",{value:"oauth2",children:"OAuth2"}),(0,t.jsx)("option",{value:"saml",children:"SAML"})]})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"checkbox",checked:h.ldapEnabled,onChange:e=>j({ldapEnabled:e.target.checked})}),"Enable LDAP/Active Directory"]})})]})]}),"email"===u&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{style:{marginBottom:"1rem"},children:"Email Settings"}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,t.jsx)("div",{children:(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"checkbox",checked:h.emailNotificationsEnabled,onChange:e=>j({emailNotificationsEnabled:e.target.checked})}),"Enable Email Notifications"]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"From Address"}),(0,t.jsx)("input",{type:"email",value:h.emailFromAddress,onChange:e=>j({emailFromAddress:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"From Name"}),(0,t.jsx)("input",{type:"text",value:h.emailFromName,onChange:e=>j({emailFromName:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]})]})]}),"files"===u&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{style:{marginBottom:"1rem"},children:"File Upload Settings"}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Max File Size (bytes)"}),(0,t.jsx)("input",{type:"number",value:h.maxFileSize,onChange:e=>j({maxFileSize:parseInt(e.target.value)||0x6400000}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}}),(0,t.jsxs)("small",{style:{color:"var(--text-secondary)"},children:["Current: ",(h.maxFileSize/1024/1024).toFixed(2)," MB"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Allowed File Types (comma-separated, * for all)"}),(0,t.jsx)("input",{type:"text",value:h.allowedFileTypes.join(", "),onChange:e=>j({allowedFileTypes:e.target.value.split(",").map(e=>e.trim())}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]})]})]}),"branding"===u&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{style:{marginBottom:"1rem"},children:"Branding"}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Logo URL"}),(0,t.jsx)("input",{type:"url",value:h.logoUrl||"",onChange:e=>j({logoUrl:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Primary Color (hex)"}),(0,t.jsx)("input",{type:"color",value:h.primaryColor||"#3b82f6",onChange:e=>j({primaryColor:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Secondary Color (hex)"}),(0,t.jsx)("input",{type:"color",value:h.secondaryColor||"#8b5cf6",onChange:e=>j({secondaryColor:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Favicon URL"}),(0,t.jsx)("input",{type:"url",value:h.faviconUrl||"",onChange:e=>j({faviconUrl:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]})]})]}),"tickets"===u&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{style:{marginBottom:"1rem"},children:"Ticket Settings"}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Default Ticket Priority"}),(0,t.jsxs)("select",{value:h.defaultTicketPriority,onChange:e=>j({defaultTicketPriority:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"},children:[(0,t.jsx)("option",{value:"LOW",children:"Low"}),(0,t.jsx)("option",{value:"MEDIUM",children:"Medium"}),(0,t.jsx)("option",{value:"HIGH",children:"High"}),(0,t.jsx)("option",{value:"CRITICAL",children:"Critical"})]})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"checkbox",checked:h.autoAssignEnabled,onChange:e=>j({autoAssignEnabled:e.target.checked})}),"Enable Auto-Assignment"]})}),h.autoAssignEnabled&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Auto-Assignment Method"}),(0,t.jsxs)("select",{value:h.autoAssignMethod||"round-robin",onChange:e=>j({autoAssignMethod:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"},children:[(0,t.jsx)("option",{value:"round-robin",children:"Round Robin"}),(0,t.jsx)("option",{value:"least-busy",children:"Least Busy"}),(0,t.jsx)("option",{value:"random",children:"Random"})]})]})]})]}),"custom-fields"===u&&(0,t.jsx)(d,{}),"ticket-types"===u&&(0,t.jsx)(c,{})]})]})}):null}function d(){let[e,l]=(0,r.useState)([]),[o,d]=(0,r.useState)(!0),[c,m]=(0,r.useState)(""),[h,p]=(0,r.useState)(!1),[u,x]=(0,r.useState)(null),[g,y]=(0,r.useState)("ticket"),[j,v]=(0,r.useState)({name:"",label:"",type:"text",required:!1,defaultValue:"",options:[],order:0});(0,r.useEffect)(()=>{b()},[g]);let b=async()=>{try{d(!0);let e=localStorage.getItem("accessToken"),t=await fetch(`/api/v1/admin/config/custom-fields?entityType=${g}&includeInactive=true`,{headers:{Authorization:`Bearer ${e}`}}),r=await t.json();r.success?l(r.data.fields):m(r.error?.message||"Failed to load custom fields")}catch(e){m("An unexpected error occurred")}finally{d(!1)}},f=async e=>{e.preventDefault();try{let e=localStorage.getItem("accessToken"),t={...j,entityType:g,options:["select","checkbox"].includes(j.type)&&j.options.length>0?j.options:null,...u&&{active:!1!==u.active}},r=await fetch("/api/v1/admin/config/custom-fields",{method:u?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(u?{id:u.id,...t}:t)}),l=await r.json();l.success?(p(!1),x(null),v({name:"",label:"",type:"text",required:!1,defaultValue:"",options:[],order:0}),b(),m("")):m(l.error?.message||"Failed to save custom field")}catch(e){m("An unexpected error occurred")}},k=async e=>{if(confirm("Are you sure you want to delete this custom field?"))try{let t=localStorage.getItem("accessToken"),r=await fetch(`/api/v1/admin/config/custom-fields?id=${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),l=await r.json();l.success?b():m(l.error?.message||"Failed to delete custom field")}catch(e){m("An unexpected error occurred")}};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,t.jsxs)("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[(0,t.jsx)("h2",{style:{margin:0},children:"Custom Fields"}),(0,t.jsx)("select",{value:g,onChange:e=>y(e.target.value),className:"input",style:{padding:"0.5rem",minWidth:"150px"},children:[{value:"ticket",label:"Ticket"},{value:"asset",label:"Asset"},{value:"change",label:"Change Request"},{value:"user",label:"User"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("button",{onClick:()=>{x(null),v({name:"",label:"",type:"text",required:!1,defaultValue:"",options:[],order:e.length}),p(!0)},className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,t.jsx)(a,{className:"w-5 h-5"}),"Add Custom Field"]})]}),c&&(0,t.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--error)"},children:c}),o?(0,t.jsx)("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading custom fields..."}):0===e.length?(0,t.jsxs)("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:["No custom fields defined for ",g,'s. Click "Add Custom Field" to create one.']}):(0,t.jsx)("div",{className:"card",style:{overflowX:"auto",padding:0},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{borderBottom:"2px solid var(--border-color)",backgroundColor:"var(--bg-secondary)"},children:[(0,t.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Label"}),(0,t.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Type"}),(0,t.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Required"}),(0,t.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Default Value"}),(0,t.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Order"}),(0,t.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Status"}),(0,t.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"right",fontWeight:600,fontSize:"0.875rem"},children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[(0,t.jsx)("td",{style:{padding:"1rem"},children:e.label}),(0,t.jsx)("td",{style:{padding:"1rem",textTransform:"capitalize"},children:e.type}),(0,t.jsx)("td",{style:{padding:"1rem"},children:(0,t.jsx)("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:e.required?"rgba(34, 197, 94, 0.15)":"var(--bg-tertiary)",color:e.required?"rgb(34, 197, 94)":"var(--text-secondary)",borderRadius:"4px",fontSize:"0.75rem"},children:e.required?"Yes":"No"})}),(0,t.jsx)("td",{style:{padding:"1rem",color:"var(--text-secondary)"},children:e.defaultValue||"-"}),(0,t.jsx)("td",{style:{padding:"1rem"},children:e.order}),(0,t.jsx)("td",{style:{padding:"1rem"},children:(0,t.jsx)("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:e.active?"rgba(34, 197, 94, 0.15)":"rgba(239, 68, 68, 0.15)",color:e.active?"rgb(34, 197, 94)":"rgb(239, 68, 68)",borderRadius:"4px",fontSize:"0.75rem"},children:e.active?"Active":"Inactive"})}),(0,t.jsx)("td",{style:{padding:"1rem",textAlign:"right"},children:(0,t.jsxs)("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[(0,t.jsx)("button",{onClick:()=>{x({...e,active:!1!==e.active}),v({name:e.name,label:e.label,type:e.type,required:e.required,defaultValue:e.defaultValue||"",options:e.options&&Array.isArray(e.options)?e.options:[],order:e.order}),p(!0)},className:"btn btn-secondary",style:{padding:"0.375rem 0.75rem",fontSize:"0.8125rem"},title:"Edit",children:(0,t.jsx)(n,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>k(e.id),className:"btn btn-secondary",style:{padding:"0.375rem 0.75rem",fontSize:"0.8125rem",color:"var(--error)"},title:"Delete",children:(0,t.jsx)(s.TrashIcon,{className:"w-4 h-4"})})]})})]},e.id))})]})}),h&&(0,t.jsx)("div",{className:"modal-overlay",children:(0,t.jsxs)("div",{className:"modal-content",style:{maxWidth:"600px"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,t.jsx)("h2",{style:{margin:0},children:u?"Edit Custom Field":"Add Custom Field"}),(0,t.jsx)("button",{onClick:()=>p(!1),className:"icon-button",children:(0,t.jsx)(i.XMarkIcon,{className:"w-6 h-6"})})]}),(0,t.jsxs)("form",{onSubmit:f,children:[(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{className:"label",children:"Field Name (Internal) *"}),(0,t.jsx)("input",{type:"text",className:"input",value:j.name,onChange:e=>v({...j,name:e.target.value.toLowerCase().replace(/\s+/g,"_")}),placeholder:"e.g., custom_field_name",required:!0,disabled:!!u}),(0,t.jsx)("small",{style:{color:"var(--text-secondary)"},children:"Internal identifier (lowercase, underscores only)"})]}),(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{className:"label",children:"Field Label (Display) *"}),(0,t.jsx)("input",{type:"text",className:"input",value:j.label,onChange:e=>v({...j,label:e.target.value}),placeholder:"e.g., Custom Field Name",required:!0})]}),(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{className:"label",children:"Field Type *"}),(0,t.jsx)("select",{className:"input",value:j.type,onChange:e=>v({...j,type:e.target.value,options:[]}),required:!0,children:[{value:"text",label:"Text"},{value:"textarea",label:"Textarea"},{value:"number",label:"Number"},{value:"date",label:"Date"},{value:"select",label:"Select (Dropdown)"},{value:"checkbox",label:"Checkbox"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),["select","checkbox"].includes(j.type)&&(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{className:"label",children:"Options (one per line) *"}),(0,t.jsx)("textarea",{className:"input",value:j.options.join("\n"),onChange:e=>v({...j,options:e.target.value.split("\n").filter(e=>e.trim())}),placeholder:"Option 1 Option 2 Option 3",rows:4,required:!0}),(0,t.jsx)("small",{style:{color:"var(--text-secondary)"},children:"Enter each option on a new line"})]}),(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{className:"label",children:"Default Value"}),(0,t.jsx)("input",{type:"number"===j.type?"number":"date"===j.type?"date":"text",className:"input",value:j.defaultValue,onChange:e=>v({...j,defaultValue:e.target.value}),placeholder:"Optional default value"})]}),(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{className:"label",children:"Display Order"}),(0,t.jsx)("input",{type:"number",className:"input",value:j.order,onChange:e=>v({...j,order:parseInt(e.target.value)||0}),min:"0"})]}),(0,t.jsx)("div",{style:{marginBottom:"1rem"},children:(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,t.jsx)("input",{type:"checkbox",checked:j.required,onChange:e=>v({...j,required:e.target.checked})}),(0,t.jsx)("span",{children:"Required Field"})]})}),u&&(0,t.jsx)("div",{style:{marginBottom:"1.5rem"},children:(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,t.jsx)("input",{type:"checkbox",checked:!1!==u.active,onChange:e=>x({...u,active:e.target.checked})}),(0,t.jsx)("span",{children:"Active"})]})}),(0,t.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>p(!1),children:"Cancel"}),(0,t.jsxs)("button",{type:"submit",className:"btn btn-primary",children:[u?"Update":"Create"," Field"]})]})]})]})})]})}function c(){let[e,l]=(0,r.useState)([]),[o,d]=(0,r.useState)(!0),[c,m]=(0,r.useState)(""),[h,p]=(0,r.useState)(!1),[u,x]=(0,r.useState)(null),[g,y]=(0,r.useState)({name:"",description:"",icon:"",color:"#3b82f6",active:!0});(0,r.useEffect)(()=>{j()},[]);let j=async()=>{try{d(!0);let e=localStorage.getItem("accessToken"),t=await fetch("/api/v1/admin/config/ticket-types?includeInactive=true",{headers:{Authorization:`Bearer ${e}`}}),r=await t.json();r.success?l(r.data.types):m(r.error?.message||"Failed to load ticket types")}catch(e){m("An unexpected error occurred")}finally{d(!1)}},v=async e=>{e.preventDefault();try{let e=localStorage.getItem("accessToken"),t=await fetch("/api/v1/admin/config/ticket-types",{method:u?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(u?{id:u.id,...g}:g)}),r=await t.json();r.success?(p(!1),x(null),y({name:"",description:"",icon:"",color:"#3b82f6",active:!0}),j(),m("")):m(r.error?.message||"Failed to save ticket type")}catch(e){m("An unexpected error occurred")}},b=async e=>{if(confirm("Are you sure you want to delete this ticket type?"))try{let t=localStorage.getItem("accessToken"),r=await fetch(`/api/v1/admin/config/ticket-types?id=${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),l=await r.json();l.success?j():m(l.error?.message||"Failed to delete ticket type")}catch(e){m("An unexpected error occurred")}};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,t.jsx)("h2",{style:{margin:0},children:"Ticket Types"}),(0,t.jsxs)("button",{onClick:()=>{x(null),y({name:"",description:"",icon:"",color:"#3b82f6",active:!0}),p(!0)},className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,t.jsx)(a,{className:"w-5 h-5"}),"Add Ticket Type"]})]}),c&&(0,t.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--error)"},children:c}),o?(0,t.jsx)("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading ticket types..."}):0===e.length?(0,t.jsx)("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:'No ticket types defined. Click "Add Ticket Type" to create one.'}):(0,t.jsx)("div",{className:"card",style:{overflowX:"auto",padding:0},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{borderBottom:"2px solid var(--border-color)",backgroundColor:"var(--bg-secondary)"},children:[(0,t.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Name"}),(0,t.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Description"}),(0,t.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Icon"}),(0,t.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Color"}),(0,t.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem"},children:"Status"}),(0,t.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"right",fontWeight:600,fontSize:"0.875rem"},children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[(0,t.jsx)("td",{style:{padding:"1rem",fontWeight:500},children:e.name}),(0,t.jsx)("td",{style:{padding:"1rem",color:"var(--text-secondary)"},children:e.description||"-"}),(0,t.jsx)("td",{style:{padding:"1rem"},children:e.icon||"-"}),(0,t.jsx)("td",{style:{padding:"1rem"},children:e.color&&(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,t.jsx)("div",{style:{width:"24px",height:"24px",borderRadius:"4px",backgroundColor:e.color,border:"1px solid var(--border-color)"}}),(0,t.jsx)("span",{style:{fontSize:"0.875rem"},children:e.color})]})}),(0,t.jsx)("td",{style:{padding:"1rem"},children:(0,t.jsx)("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:e.active?"rgba(34, 197, 94, 0.15)":"rgba(239, 68, 68, 0.15)",color:e.active?"rgb(34, 197, 94)":"rgb(239, 68, 68)",borderRadius:"4px",fontSize:"0.75rem"},children:e.active?"Active":"Inactive"})}),(0,t.jsx)("td",{style:{padding:"1rem",textAlign:"right"},children:(0,t.jsxs)("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[(0,t.jsx)("button",{onClick:()=>{x(e),y({name:e.name,description:e.description||"",icon:e.icon||"",color:e.color||"#3b82f6",active:!1!==e.active}),p(!0)},className:"btn btn-secondary",style:{padding:"0.375rem 0.75rem",fontSize:"0.8125rem"},title:"Edit",children:(0,t.jsx)(n,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>b(e.id),className:"btn btn-secondary",style:{padding:"0.375rem 0.75rem",fontSize:"0.8125rem",color:"var(--error)"},title:"Delete",children:(0,t.jsx)(s.TrashIcon,{className:"w-4 h-4"})})]})})]},e.id))})]})}),h&&(0,t.jsx)("div",{className:"modal-overlay",children:(0,t.jsxs)("div",{className:"modal-content",style:{maxWidth:"500px"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,t.jsx)("h2",{style:{margin:0},children:u?"Edit Ticket Type":"Add Ticket Type"}),(0,t.jsx)("button",{onClick:()=>p(!1),className:"icon-button",children:(0,t.jsx)(i.XMarkIcon,{className:"w-6 h-6"})})]}),(0,t.jsxs)("form",{onSubmit:v,children:[(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{className:"label",children:"Name *"}),(0,t.jsx)("input",{type:"text",className:"input",value:g.name,onChange:e=>y({...g,name:e.target.value}),placeholder:"e.g., Incident, Request, Problem",required:!0,disabled:!!u})]}),(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{className:"label",children:"Description"}),(0,t.jsx)("textarea",{className:"input",value:g.description,onChange:e=>y({...g,description:e.target.value}),placeholder:"Brief description of this ticket type",rows:3})]}),(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{className:"label",children:"Icon (Identifier)"}),(0,t.jsx)("input",{type:"text",className:"input",value:g.icon,onChange:e=>y({...g,icon:e.target.value}),placeholder:"e.g., bug, question, exclamation"}),(0,t.jsx)("small",{style:{color:"var(--text-secondary)"},children:"Icon identifier for UI display"})]}),(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{className:"label",children:"Color"}),(0,t.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,t.jsx)("input",{type:"color",className:"input",value:g.color,onChange:e=>y({...g,color:e.target.value}),style:{width:"80px",height:"40px",padding:"0.25rem"}}),(0,t.jsx)("input",{type:"text",className:"input",value:g.color,onChange:e=>y({...g,color:e.target.value}),placeholder:"#3b82f6",style:{flex:1}})]})]}),u&&(0,t.jsx)("div",{style:{marginBottom:"1.5rem"},children:(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,t.jsx)("input",{type:"checkbox",checked:g.active,onChange:e=>y({...g,active:e.target.checked})}),(0,t.jsx)("span",{children:"Active"})]})}),(0,t.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>p(!1),children:"Cancel"}),(0,t.jsxs)("button",{type:"submit",className:"btn btn-primary",children:[u?"Update":"Create"," Type"]})]})]})]})})]})}e.s(["default",()=>o],13467)}]);