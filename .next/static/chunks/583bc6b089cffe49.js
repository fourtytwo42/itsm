(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94268,e=>{"use strict";var t=e.i(18050),a=e.i(71645),r=e.i(18566);function s(){let e=(0,r.useSearchParams)().get("organizationId"),[s,i]=(0,a.useState)([]),[n,l]=(0,a.useState)(!0),[d,o]=(0,a.useState)(""),[c,p]=(0,a.useState)(1),[m,y]=(0,a.useState)(1),[h,g]=(0,a.useState)({eventType:"",entityType:"",startDate:"",endDate:""});(0,a.useEffect)(()=>{x()},[c,h,e]);let x=async()=>{try{let t=localStorage.getItem("accessToken"),a=new URLSearchParams({page:c.toString(),limit:"50"});e&&a.append("organizationId",e),h.eventType&&a.append("eventType",h.eventType),h.entityType&&a.append("entityType",h.entityType),h.startDate&&a.append("startDate",h.startDate),h.endDate&&a.append("endDate",h.endDate);let r=await fetch(`/api/v1/organizations/audit?${a.toString()}`,{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw Error("Failed to fetch audit logs");let s=await r.json();i(s.logs),y(s.pagination.totalPages)}catch(e){o(e.message)}finally{l(!1)}},u=(e,t)=>{g({...h,[e]:t}),p(1)};return n?(0,t.jsx)("div",{children:"Loading audit logs..."}):(0,t.jsxs)("div",{style:{padding:"2rem"},children:[(0,t.jsx)("h1",{style:{marginBottom:"2rem"},children:"Audit Logs"}),d&&(0,t.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--error)"},children:d}),(0,t.jsxs)("div",{className:"card",style:{padding:"1.5rem",marginBottom:"1.5rem"},children:[(0,t.jsx)("h3",{style:{marginBottom:"1rem"},children:"Filters"}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",htmlFor:"eventType",children:"Event Type"}),(0,t.jsx)("input",{id:"eventType",type:"text",className:"input",value:h.eventType,onChange:e=>u("eventType",e.target.value),placeholder:"e.g., USER_CREATED"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",htmlFor:"entityType",children:"Entity Type"}),(0,t.jsx)("input",{id:"entityType",type:"text",className:"input",value:h.entityType,onChange:e=>u("entityType",e.target.value),placeholder:"e.g., User, Ticket"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",htmlFor:"startDate",children:"Start Date"}),(0,t.jsx)("input",{id:"startDate",type:"date",className:"input",value:h.startDate,onChange:e=>u("startDate",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",htmlFor:"endDate",children:"End Date"}),(0,t.jsx)("input",{id:"endDate",type:"date",className:"input",value:h.endDate,onChange:e=>u("endDate",e.target.value)})]})]})]}),(0,t.jsxs)("div",{className:"card",style:{padding:"1.5rem"},children:[(0,t.jsx)("div",{style:{overflowX:"auto"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{borderBottom:"1px solid var(--border)"},children:[(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Date"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Event"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Entity"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"User"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Description"}),(0,t.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"IP Address"})]})}),(0,t.jsx)("tbody",{children:s.map(e=>(0,t.jsxs)("tr",{style:{borderBottom:"1px solid var(--border)"},children:[(0,t.jsx)("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:new Date(e.createdAt).toLocaleString()}),(0,t.jsx)("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:(0,t.jsx)("code",{style:{fontSize:"0.75rem"},children:e.eventType})}),(0,t.jsxs)("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:[e.entityType,e.entityId&&(0,t.jsxs)("span",{style:{color:"var(--text-secondary)",marginLeft:"0.5rem"},children:["(",e.entityId.slice(0,8),"...)"]})]}),(0,t.jsxs)("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:[e.user.firstName," ",e.user.lastName,(0,t.jsx)("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:e.userEmail})]}),(0,t.jsx)("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:e.description}),(0,t.jsx)("td",{style:{padding:"0.75rem",fontSize:"0.875rem",fontFamily:"monospace"},children:e.ipAddress||"-"})]},e.id))})]})}),0===s.length&&(0,t.jsx)("div",{style:{textAlign:"center",padding:"3rem",color:"var(--text-secondary)"},children:"No audit logs found"}),m>1&&(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem",marginTop:"1.5rem"},children:[(0,t.jsx)("button",{className:"btn",onClick:()=>p(e=>Math.max(1,e-1)),disabled:1===c,children:"Previous"}),(0,t.jsxs)("span",{style:{display:"flex",alignItems:"center",padding:"0 1rem"},children:["Page ",c," of ",m]}),(0,t.jsx)("button",{className:"btn",onClick:()=>p(e=>Math.min(m,e+1)),disabled:c===m,children:"Next"})]})]})]})}function i(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{children:"Loading audit logs..."}),children:(0,t.jsx)(s,{})})}e.s(["default",()=>i])}]);