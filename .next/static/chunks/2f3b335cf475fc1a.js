(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70374,e=>{"use strict";var r=e.i(18050),t=e.i(71645),i=e.i(18566);function a(){let e=(0,i.useRouter)(),a=(0,t.useRef)(null),[o,l]=(0,t.useState)(!1),[n,s]=(0,t.useState)(!1),[d,c]=(0,t.useState)(""),[p,g]=(0,t.useState)(null),[m,u]=(0,t.useState)({name:"",slug:"",description:"",logo:"",requiresLogin:!1,isActive:!0}),y=async r=>{r.preventDefault(),l(!0),c("");try{let r=localStorage.getItem("accessToken"),t=await fetch("/api/v1/admin/tenants",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(m)}),i=await t.json();i.success?e.push(`/admin/tenants/${i.data.id}`):c(i.error?.message||"Failed to create tenant")}catch(e){c("An unexpected error occurred")}finally{l(!1)}},x=async e=>{let r=e.target.files?.[0];if(!r)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(r.type))return void c("Invalid file type. Only images (JPEG, PNG, GIF, WebP) are allowed.");if(r.size>5242880)return void c("File size exceeds 5MB limit.");let t=new FileReader;t.onload=e=>{g(e.target?.result)},t.readAsDataURL(r),s(!0),c("");try{let e=new FormData;e.append("file",r);let t=localStorage.getItem("accessToken"),i=await fetch("/api/v1/admin/tenants/upload-logo",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:e}),a=await i.json();a.success?u({...m,logo:a.data.url}):(c(a.error?.message||"Failed to upload logo"),g(null))}catch(e){c("Failed to upload logo"),g(null)}finally{s(!1)}};return(0,r.jsxs)("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto"},children:[(0,r.jsx)("h1",{style:{fontSize:"2rem",marginBottom:"2rem"},children:"Create New Tenant"}),d&&(0,r.jsx)("div",{style:{padding:"1rem",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"var(--error)",borderRadius:"8px",marginBottom:"1.5rem"},children:d}),(0,r.jsxs)("form",{onSubmit:y,style:{display:"grid",gap:"1.5rem"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Tenant Name *"}),(0,r.jsx)("input",{type:"text",required:!0,value:m.name,onChange:e=>{let r=e.target.value;u({...m,name:r,slug:r.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")})},style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Slug *"}),(0,r.jsx)("input",{type:"text",required:!0,value:m.slug,onChange:e=>u({...m,slug:e.target.value}),pattern:"[a-z0-9-]+",style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}}),(0,r.jsx)("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:"URL-friendly identifier (lowercase letters, numbers, and hyphens only)"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Description"}),(0,r.jsx)("textarea",{value:m.description,onChange:e=>u({...m,description:e.target.value}),rows:4,style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Logo"}),(0,r.jsx)("input",{ref:a,type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:x,disabled:n,style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",cursor:n?"not-allowed":"pointer",opacity:n?.6:1}}),(0,r.jsx)("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:"Upload an image file (JPEG, PNG, GIF, WebP). Max size: 5MB"}),p&&(0,r.jsxs)("div",{style:{marginTop:"1rem",position:"relative",display:"inline-block"},children:[(0,r.jsx)("img",{src:p,alt:"Logo preview",style:{maxWidth:"200px",maxHeight:"200px",borderRadius:"8px",border:"1px solid var(--border-color)",padding:"0.5rem",backgroundColor:"var(--bg-secondary)"}}),(0,r.jsx)("button",{type:"button",onClick:()=>{g(null),u({...m,logo:""}),a.current&&(a.current.value="")},style:{position:"absolute",top:"0.5rem",right:"0.5rem",padding:"0.25rem 0.5rem",backgroundColor:"rgba(239, 68, 68, 0.9)",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem"},children:"Remove"})]})]}),(0,r.jsx)("div",{style:{display:"flex",gap:"2rem"},children:(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,r.jsx)("input",{type:"checkbox",checked:m.requiresLogin,onChange:e=>u({...m,requiresLogin:e.target.checked}),style:{width:"18px",height:"18px"}}),(0,r.jsx)("span",{children:"Require login to submit tickets"})]})}),(0,r.jsx)("div",{style:{display:"flex",gap:"2rem"},children:(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,r.jsx)("input",{type:"checkbox",checked:m.isActive,onChange:e=>u({...m,isActive:e.target.checked}),style:{width:"18px",height:"18px"}}),(0,r.jsx)("span",{children:"Active"})]})}),(0,r.jsxs)("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[(0,r.jsx)("button",{type:"submit",disabled:o,style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--accent-primary)",color:"white",border:"none",borderRadius:"8px",cursor:o?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:600,opacity:o?.6:1},children:o?"Creating...":"Create Tenant"}),(0,r.jsx)("button",{type:"button",onClick:()=>e.back(),style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem"},children:"Cancel"})]})]})]})}e.s(["default",()=>a])}]);