module.exports=[59530,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(){let a=(0,d.useRouter)(),e=(0,c.useRef)(null),[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)({name:"",slug:"",description:"",logo:"",requiresLogin:!1,isActive:!0}),p=async b=>{b.preventDefault(),g(!0),k("");try{let b=localStorage.getItem("accessToken"),c=await fetch("/api/v1/manager/tenants",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify(n)}),d=await c.json();d.success?a.push(`/manager/tenants/${d.data.tenant.id||d.data.id}`):k(d.error?.message||"Failed to create tenant")}catch(a){k("An unexpected error occurred")}finally{g(!1)}},q=async a=>{let b=a.target.files?.[0];if(!b)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(b.type))return void k("Invalid file type. Only images (JPEG, PNG, GIF, WebP) are allowed.");if(b.size>5242880)return void k("File size exceeds 5MB limit.");let c=new FileReader;c.onload=a=>{m(a.target?.result)},c.readAsDataURL(b),i(!0),k("");try{let a=new FormData;a.append("file",b);let c=localStorage.getItem("accessToken"),d=await fetch("/api/v1/admin/tenants/upload-logo",{method:"POST",headers:{Authorization:`Bearer ${c}`},body:a}),e=await d.json();e.success?o({...n,logo:e.data.url}):(k(e.error?.message||"Failed to upload logo"),m(null))}catch(a){k("Failed to upload logo"),m(null)}finally{i(!1)}};return(0,b.jsxs)("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto"},children:[(0,b.jsx)("h1",{style:{fontSize:"2rem",marginBottom:"2rem"},children:"Create New Tenant"}),j&&(0,b.jsx)("div",{style:{padding:"1rem",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"var(--error)",borderRadius:"8px",marginBottom:"1.5rem"},children:j}),(0,b.jsxs)("form",{onSubmit:p,style:{display:"grid",gap:"1.5rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Tenant Name *"}),(0,b.jsx)("input",{type:"text",required:!0,value:n.name,onChange:a=>{let b=a.target.value;o({...n,name:b,slug:b.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")})},style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Slug *"}),(0,b.jsx)("input",{type:"text",required:!0,value:n.slug,onChange:a=>o({...n,slug:a.target.value}),pattern:"[a-z0-9-]+",style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}}),(0,b.jsx)("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:"URL-friendly identifier (lowercase letters, numbers, and hyphens only)"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Description"}),(0,b.jsx)("textarea",{value:n.description,onChange:a=>o({...n,description:a.target.value}),rows:4,style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Logo"}),(0,b.jsx)("input",{ref:e,type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:q,disabled:h,style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",cursor:h?"not-allowed":"pointer",opacity:h?.6:1}}),(0,b.jsx)("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:"Upload an image file (JPEG, PNG, GIF, WebP). Max size: 5MB"}),l&&(0,b.jsxs)("div",{style:{marginTop:"1rem",position:"relative",display:"inline-block"},children:[(0,b.jsx)("img",{src:l,alt:"Logo preview",style:{maxWidth:"200px",maxHeight:"200px",borderRadius:"8px",border:"1px solid var(--border-color)",padding:"0.5rem",backgroundColor:"var(--bg-secondary)"}}),(0,b.jsx)("button",{type:"button",onClick:()=>{m(null),o({...n,logo:""}),e.current&&(e.current.value="")},style:{position:"absolute",top:"0.5rem",right:"0.5rem",padding:"0.25rem 0.5rem",backgroundColor:"rgba(239, 68, 68, 0.9)",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem"},children:"Remove"})]})]}),(0,b.jsx)("div",{style:{display:"flex",gap:"2rem"},children:(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,b.jsx)("input",{type:"checkbox",checked:n.requiresLogin,onChange:a=>o({...n,requiresLogin:a.target.checked}),style:{width:"18px",height:"18px"}}),(0,b.jsx)("span",{children:"Require login to submit tickets"})]})}),(0,b.jsx)("div",{style:{display:"flex",gap:"2rem"},children:(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,b.jsx)("input",{type:"checkbox",checked:n.isActive,onChange:a=>o({...n,isActive:a.target.checked}),style:{width:"18px",height:"18px"}}),(0,b.jsx)("span",{children:"Active"})]})}),(0,b.jsxs)("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[(0,b.jsx)("button",{type:"submit",disabled:f,style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--accent-primary)",color:"white",border:"none",borderRadius:"8px",cursor:f?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:600,opacity:f?.6:1},children:f?"Creating...":"Create Tenant"}),(0,b.jsx)("button",{type:"button",onClick:()=>a.back(),style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem"},children:"Cancel"})]})]})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=app_manager_tenants_new_page_tsx_b910cebd._.js.map