module.exports=[47468,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(29173);function f(){(0,d.useRouter)();let[a,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)({search:"",role:"",isActive:""}),[s,t]=(0,c.useState)({email:"",password:"",firstName:"",lastName:"",roles:[],isActive:!0,emailVerified:!1});(0,c.useEffect)(()=>{u()},[q]);let u=async()=>{try{h(!0);let a=localStorage.getItem("accessToken"),b=new URLSearchParams;q.search&&b.append("search",q.search),q.role&&b.append("role",q.role),""!==q.isActive&&b.append("isActive",q.isActive);let c=await fetch(`/api/v1/admin/users?${b.toString()}`,{headers:a?{Authorization:`Bearer ${a}`}:{}}),d=await c.json();d.success?f(d.data.users):j(d.error?.message||"Failed to load users")}catch(a){j("An unexpected error occurred")}finally{h(!1)}},v=async a=>{a.preventDefault();try{let a=localStorage.getItem("accessToken"),b=await fetch("/api/v1/admin/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(s)}),c=await b.json();c.success?(l(!1),t({email:"",password:"",firstName:"",lastName:"",roles:[],isActive:!0,emailVerified:!1}),u()):j(c.error?.message||"Failed to create user")}catch(a){j("An unexpected error occurred")}},w=async a=>{if(a.preventDefault(),o)try{let a=localStorage.getItem("accessToken"),b={...s};b.password||delete b.password;let c=await fetch(`/api/v1/admin/users/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(b)}),d=await c.json();d.success?(n(!1),p(null),u()):j(d.error?.message||"Failed to update user")}catch(a){j("An unexpected error occurred")}},x=async a=>{if(confirm("Are you sure you want to delete this user?"))try{let b=localStorage.getItem("accessToken"),c=await fetch(`/api/v1/admin/users/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}}),d=await c.json();d.success?u():j(d.error?.message||"Failed to delete user")}catch(a){j("An unexpected error occurred")}},y=async(a,b)=>{try{let c=localStorage.getItem("accessToken"),d=await fetch(`/api/v1/admin/users/${a}/activate?action=${b?"deactivate":"activate"}`,{method:"POST",headers:{Authorization:`Bearer ${c}`}}),e=await d.json();e.success?u():j(e.error?.message||"Failed to update user status")}catch(a){j("An unexpected error occurred")}},z=a=>{t(b=>({...b,roles:b.roles.includes(a)?b.roles.filter(b=>b!==a):[...b.roles,a]}))};return g?(0,b.jsx)("div",{style:{padding:"2rem"},children:"Loading users..."}):(0,b.jsxs)("div",{style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,b.jsx)("h1",{style:{margin:0},children:"User Management"}),(0,b.jsx)("button",{onClick:()=>{t({email:"",password:"",firstName:"",lastName:"",roles:[],isActive:!0,emailVerified:!1}),l(!0)},className:"btn btn-primary",children:"Create User"})]}),i&&(0,b.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--error)"},children:i}),(0,b.jsxs)("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[(0,b.jsx)("input",{type:"text",placeholder:"Search by email, name...",value:q.search,onChange:a=>r({...q,search:a.target.value}),className:"input",style:{flex:1,minWidth:"200px"}}),(0,b.jsxs)("select",{value:q.role,onChange:a=>r({...q,role:a.target.value}),className:"input",style:{minWidth:"150px"},children:[(0,b.jsx)("option",{value:"",children:"All Roles"}),Object.values(e.RoleName).map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),(0,b.jsxs)("select",{value:q.isActive,onChange:a=>r({...q,isActive:a.target.value}),className:"input",style:{minWidth:"150px"},children:[(0,b.jsx)("option",{value:"",children:"All Status"}),(0,b.jsx)("option",{value:"true",children:"Active"}),(0,b.jsx)("option",{value:"false",children:"Inactive"})]})]}),(0,b.jsx)("div",{className:"card",style:{overflowX:"auto"},children:(0,b.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[(0,b.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Email"}),(0,b.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Name"}),(0,b.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Roles"}),(0,b.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Status"}),(0,b.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Verified"}),(0,b.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Created"}),(0,b.jsx)("th",{style:{padding:"0.75rem",textAlign:"right"},children:"Actions"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[(0,b.jsx)("td",{style:{padding:"0.75rem"},children:a.email}),(0,b.jsx)("td",{style:{padding:"0.75rem"},children:a.firstName||a.lastName?`${a.firstName||""} ${a.lastName||""}`.trim():"-"}),(0,b.jsx)("td",{style:{padding:"0.75rem"},children:(0,b.jsx)("div",{style:{display:"flex",gap:"0.25rem",flexWrap:"wrap"},children:a.roles.map(a=>(0,b.jsx)("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:"var(--bg-secondary)",borderRadius:"0.25rem",fontSize:"0.875rem"},children:a},a))})}),(0,b.jsx)("td",{style:{padding:"0.75rem"},children:(0,b.jsx)("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:a.isActive?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",color:a.isActive?"rgb(34, 197, 94)":"rgb(239, 68, 68)",borderRadius:"0.25rem",fontSize:"0.875rem"},children:a.isActive?"Active":"Inactive"})}),(0,b.jsx)("td",{style:{padding:"0.75rem"},children:a.emailVerified?"✓":"✗"}),(0,b.jsx)("td",{style:{padding:"0.75rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:new Date(a.createdAt).toLocaleDateString()}),(0,b.jsx)("td",{style:{padding:"0.75rem",textAlign:"right"},children:(0,b.jsxs)("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[(0,b.jsx)("button",{onClick:()=>{p(a),t({email:a.email,password:"",firstName:a.firstName||"",lastName:a.lastName||"",roles:a.roles,isActive:a.isActive,emailVerified:a.emailVerified}),n(!0)},className:"btn btn-secondary",style:{padding:"0.25rem 0.5rem",fontSize:"0.875rem"},children:"Edit"}),(0,b.jsx)("button",{onClick:()=>y(a.id,a.isActive),className:"btn btn-secondary",style:{padding:"0.25rem 0.5rem",fontSize:"0.875rem"},children:a.isActive?"Deactivate":"Activate"}),(0,b.jsx)("button",{onClick:()=>x(a.id),className:"btn btn-secondary",style:{padding:"0.25rem 0.5rem",fontSize:"0.875rem",color:"var(--error)"},children:"Delete"})]})})]},a.id))})]})}),k&&(0,b.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,b.jsxs)("div",{className:"card",style:{width:"100%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto"},children:[(0,b.jsx)("h2",{style:{marginTop:0},children:"Create User"}),(0,b.jsxs)("form",{onSubmit:v,children:[(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",children:"Email *"}),(0,b.jsx)("input",{type:"email",className:"input",value:s.email,onChange:a=>t({...s,email:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",children:"Password *"}),(0,b.jsx)("input",{type:"password",className:"input",value:s.password,onChange:a=>t({...s,password:a.target.value}),required:!0,minLength:8})]}),(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",children:"First Name"}),(0,b.jsx)("input",{type:"text",className:"input",value:s.firstName,onChange:a=>t({...s,firstName:a.target.value})})]}),(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",children:"Last Name"}),(0,b.jsx)("input",{type:"text",className:"input",value:s.lastName,onChange:a=>t({...s,lastName:a.target.value})})]}),(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",children:"Roles"}),(0,b.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Object.values(e.RoleName).map(a=>(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,b.jsx)("input",{type:"checkbox",checked:s.roles.includes(a),onChange:()=>z(a)}),a]},a))})]}),(0,b.jsx)("div",{style:{marginBottom:"1rem"},children:(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,b.jsx)("input",{type:"checkbox",checked:s.isActive,onChange:a=>t({...s,isActive:a.target.checked})}),"Active"]})}),(0,b.jsx)("div",{style:{marginBottom:"1.5rem"},children:(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,b.jsx)("input",{type:"checkbox",checked:s.emailVerified,onChange:a=>t({...s,emailVerified:a.target.checked})}),"Email Verified"]})}),(0,b.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[(0,b.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Create User"})]})]})]})}),m&&o&&(0,b.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,b.jsxs)("div",{className:"card",style:{width:"100%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto"},children:[(0,b.jsx)("h2",{style:{marginTop:0},children:"Edit User"}),(0,b.jsxs)("form",{onSubmit:w,children:[(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",children:"Email *"}),(0,b.jsx)("input",{type:"email",className:"input",value:s.email,onChange:a=>t({...s,email:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",children:"Password (leave blank to keep current)"}),(0,b.jsx)("input",{type:"password",className:"input",value:s.password,onChange:a=>t({...s,password:a.target.value}),minLength:8})]}),(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",children:"First Name"}),(0,b.jsx)("input",{type:"text",className:"input",value:s.firstName,onChange:a=>t({...s,firstName:a.target.value})})]}),(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",children:"Last Name"}),(0,b.jsx)("input",{type:"text",className:"input",value:s.lastName,onChange:a=>t({...s,lastName:a.target.value})})]}),(0,b.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,b.jsx)("label",{className:"label",children:"Roles"}),(0,b.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Object.values(e.RoleName).map(a=>(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,b.jsx)("input",{type:"checkbox",checked:s.roles.includes(a),onChange:()=>z(a)}),a]},a))})]}),(0,b.jsx)("div",{style:{marginBottom:"1rem"},children:(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,b.jsx)("input",{type:"checkbox",checked:s.isActive,onChange:a=>t({...s,isActive:a.target.checked})}),"Active"]})}),(0,b.jsx)("div",{style:{marginBottom:"1.5rem"},children:(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,b.jsx)("input",{type:"checkbox",checked:s.emailVerified,onChange:a=>t({...s,emailVerified:a.target.checked})}),"Email Verified"]})}),(0,b.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[(0,b.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{n(!1),p(null)},children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Update User"})]})]})]})})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=app_admin_users_page_tsx_4f85054f._.js.map