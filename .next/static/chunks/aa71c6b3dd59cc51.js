(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,13467,e=>{"use strict";var i=e.i(43476),n=e.i(71645),t=e.i(18566);function l(){let e=(0,t.useRouter)(),[l,a]=(0,n.useState)(null),[r,s]=(0,n.useState)(!0),[o,d]=(0,n.useState)(!1),[c,h]=(0,n.useState)(null),[m,g]=(0,n.useState)("general");(0,n.useEffect)(()=>{let i=localStorage.getItem("user"),n=localStorage.getItem("accessToken");if(!i||!n)return void e.push("/login");try{let n=JSON.parse(i);if(a(n),!n.roles.includes("ADMIN"))return void e.push("/dashboard");x()}catch(i){e.push("/login")}finally{s(!1)}},[e]);let x=async()=>{try{let e=localStorage.getItem("accessToken"),i=await fetch("/api/v1/admin/config",{headers:{Authorization:`Bearer ${e}`}});if(!i.ok)throw Error("Failed to load configuration");let n=await i.json();n.success&&h(n.data.config)}catch(e){console.error("Error loading config:",e)}},u=async()=>{if(c)try{d(!0);let e=localStorage.getItem("accessToken");if(!(await fetch("/api/v1/admin/config",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({config:c})})).ok)throw Error("Failed to save configuration");alert("Configuration saved successfully!")}catch(e){console.error("Error saving config:",e),alert("Failed to save configuration")}finally{d(!1)}},p=e=>{c&&h({...c,...e})};return r?(0,i.jsx)("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading..."}):l&&c?(0,i.jsx)("div",{style:{minHeight:"100vh",padding:"2rem"},children:(0,i.jsxs)("div",{className:"container",children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,i.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold"},children:"System Configuration"}),(0,i.jsx)("button",{className:"btn btn-primary",onClick:u,disabled:o,children:o?"Saving...":"Save Changes"})]}),(0,i.jsxs)("div",{className:"card",style:{marginBottom:"2rem"},children:[(0,i.jsx)("div",{style:{display:"flex",gap:"1rem",borderBottom:"1px solid var(--border-color)",marginBottom:"1rem"},children:["general","auth","email","files","branding","tickets","custom-fields","ticket-types"].map(e=>(0,i.jsx)("button",{onClick:()=>g(e),style:{padding:"0.75rem 1.5rem",border:"none",background:"none",borderBottom:m===e?"2px solid var(--primary-color)":"2px solid transparent",cursor:"pointer",textTransform:"capitalize"},children:e.replace("-"," ")},e))}),"general"===m&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{style:{marginBottom:"1rem"},children:"General Settings"}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Organization Name"}),(0,i.jsx)("input",{type:"text",value:c.organizationName,onChange:e=>p({organizationName:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]}),(0,i.jsx)("div",{children:(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:c.maintenanceMode,onChange:e=>p({maintenanceMode:e.target.checked})}),"Maintenance Mode"]})}),c.maintenanceMode&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Maintenance Message"}),(0,i.jsx)("textarea",{value:c.maintenanceMessage||"",onChange:e=>p({maintenanceMessage:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",minHeight:"100px"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Session Timeout (minutes)"}),(0,i.jsx)("input",{type:"number",value:c.sessionTimeout,onChange:e=>p({sessionTimeout:parseInt(e.target.value)||1440}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]})]})]}),"auth"===m&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{style:{marginBottom:"1rem"},children:"Authentication Settings"}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,i.jsx)("div",{children:(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:c.registrationEnabled,onChange:e=>p({registrationEnabled:e.target.checked})}),"Enable User Registration"]})}),(0,i.jsx)("div",{children:(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:c.passwordResetEnabled,onChange:e=>p({passwordResetEnabled:e.target.checked})}),"Enable Password Reset"]})}),(0,i.jsx)("div",{children:(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:c.ssoEnabled,onChange:e=>p({ssoEnabled:e.target.checked})}),"Enable SSO"]})}),c.ssoEnabled&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"SSO Provider"}),(0,i.jsxs)("select",{value:c.ssoProvider||"oauth2",onChange:e=>p({ssoProvider:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"},children:[(0,i.jsx)("option",{value:"oauth2",children:"OAuth2"}),(0,i.jsx)("option",{value:"saml",children:"SAML"})]})]})}),(0,i.jsx)("div",{children:(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:c.ldapEnabled,onChange:e=>p({ldapEnabled:e.target.checked})}),"Enable LDAP/Active Directory"]})})]})]}),"email"===m&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{style:{marginBottom:"1rem"},children:"Email Settings"}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,i.jsx)("div",{children:(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:c.emailNotificationsEnabled,onChange:e=>p({emailNotificationsEnabled:e.target.checked})}),"Enable Email Notifications"]})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"From Address"}),(0,i.jsx)("input",{type:"email",value:c.emailFromAddress,onChange:e=>p({emailFromAddress:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"From Name"}),(0,i.jsx)("input",{type:"text",value:c.emailFromName,onChange:e=>p({emailFromName:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]})]})]}),"files"===m&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{style:{marginBottom:"1rem"},children:"File Upload Settings"}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Max File Size (bytes)"}),(0,i.jsx)("input",{type:"number",value:c.maxFileSize,onChange:e=>p({maxFileSize:parseInt(e.target.value)||0x6400000}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}}),(0,i.jsxs)("small",{style:{color:"var(--text-secondary)"},children:["Current: ",(c.maxFileSize/1024/1024).toFixed(2)," MB"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Allowed File Types (comma-separated, * for all)"}),(0,i.jsx)("input",{type:"text",value:c.allowedFileTypes.join(", "),onChange:e=>p({allowedFileTypes:e.target.value.split(",").map(e=>e.trim())}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]})]})]}),"branding"===m&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{style:{marginBottom:"1rem"},children:"Branding"}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Logo URL"}),(0,i.jsx)("input",{type:"url",value:c.logoUrl||"",onChange:e=>p({logoUrl:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Primary Color (hex)"}),(0,i.jsx)("input",{type:"color",value:c.primaryColor||"#3b82f6",onChange:e=>p({primaryColor:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Secondary Color (hex)"}),(0,i.jsx)("input",{type:"color",value:c.secondaryColor||"#8b5cf6",onChange:e=>p({secondaryColor:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Favicon URL"}),(0,i.jsx)("input",{type:"url",value:c.faviconUrl||"",onChange:e=>p({faviconUrl:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"}})]})]})]}),"tickets"===m&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{style:{marginBottom:"1rem"},children:"Ticket Settings"}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Default Ticket Priority"}),(0,i.jsxs)("select",{value:c.defaultTicketPriority,onChange:e=>p({defaultTicketPriority:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"},children:[(0,i.jsx)("option",{value:"LOW",children:"Low"}),(0,i.jsx)("option",{value:"MEDIUM",children:"Medium"}),(0,i.jsx)("option",{value:"HIGH",children:"High"}),(0,i.jsx)("option",{value:"CRITICAL",children:"Critical"})]})]}),(0,i.jsx)("div",{children:(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:c.autoAssignEnabled,onChange:e=>p({autoAssignEnabled:e.target.checked})}),"Enable Auto-Assignment"]})}),c.autoAssignEnabled&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Auto-Assignment Method"}),(0,i.jsxs)("select",{value:c.autoAssignMethod||"round-robin",onChange:e=>p({autoAssignMethod:e.target.value}),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem"},children:[(0,i.jsx)("option",{value:"round-robin",children:"Round Robin"}),(0,i.jsx)("option",{value:"least-busy",children:"Least Busy"}),(0,i.jsx)("option",{value:"random",children:"Random"})]})]})]})]}),"custom-fields"===m&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{style:{marginBottom:"1rem"},children:"Custom Fields"}),(0,i.jsx)("p",{style:{color:"var(--text-secondary)",marginBottom:"1rem"},children:"Custom fields functionality will be available in the next update."})]}),"ticket-types"===m&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{style:{marginBottom:"1rem"},children:"Ticket Types"}),(0,i.jsx)("p",{style:{color:"var(--text-secondary)",marginBottom:"1rem"},children:"Ticket types functionality will be available in the next update."})]})]})]})}):null}e.s(["default",()=>l])}]);