{"version":3,"sources":["../../../../app/tenant/%5Bslug%5D/page.tsx","../../../../components/TenantChatWidget.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useParams, useRouter } from 'next/navigation'\nimport Link from 'next/link'\nimport TenantChatWidget from '@/components/TenantChatWidget'\n\ninterface Tenant {\n  id: string\n  name: string\n  slug: string\n  logo?: string\n  description?: string\n  requiresLogin: boolean\n  categories: string[]\n  kbArticles: Array<{\n    id: string\n    title: string\n    slug: string\n  }>\n  customFields: Array<{\n    id: string\n    label: string\n    fieldType: string\n    required: boolean\n    options?: string[]\n    placeholder?: string\n  }>\n}\n\nexport default function TenantPage() {\n  const params = useParams()\n  const router = useRouter()\n  const slug = params?.slug as string\n\n  const [tenant, setTenant] = useState<Tenant | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState('')\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\n  const [tickets, setTickets] = useState<any[]>([])\n  const [loadingTickets, setLoadingTickets] = useState(false)\n  const [publicToken, setPublicToken] = useState<string | null>(null)\n\n  useEffect(() => {\n    // Check if user is authenticated\n    const token = localStorage.getItem('accessToken')\n    setIsAuthenticated(!!token)\n\n    // Get or create public token if not logged in\n    if (!token) {\n      const storedPublicToken = localStorage.getItem('publicToken')\n      if (storedPublicToken) {\n        setPublicToken(storedPublicToken)\n      } else {\n        // Generate new public token\n        generatePublicToken()\n      }\n    }\n\n    loadTenant()\n  }, [slug])\n\n  useEffect(() => {\n    // Load tickets when tenant or auth state changes\n    if (tenant) {\n      loadTickets()\n    }\n  }, [tenant, isAuthenticated, publicToken])\n\n  const generatePublicToken = async (tenantId?: string) => {\n    try {\n      const response = await fetch('/api/v1/public/token', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ tenantId: tenantId || null }),\n      })\n      const data = await response.json()\n      if (data.success) {\n        localStorage.setItem('publicToken', data.data.token)\n        localStorage.setItem('publicTokenId', data.data.publicId)\n        setPublicToken(data.data.token)\n      }\n    } catch (err) {\n      // Silently fail\n    }\n  }\n\n  useEffect(() => {\n    // Update public token with tenant ID after tenant loads\n    if (tenant && !isAuthenticated) {\n      if (!publicToken) {\n        generatePublicToken(tenant.id)\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tenant?.id, isAuthenticated])\n\n  const loadTenant = async () => {\n    try {\n      setLoading(true)\n      const response = await fetch(`/api/v1/tenants/${slug}`)\n      const data = await response.json()\n\n      if (data.success) {\n        setTenant(data.data)\n\n        // Check if login is required\n        if (data.data.requiresLogin && !isAuthenticated) {\n          router.push(`/login?redirect=/tenant/${slug}`)\n        }\n      } else {\n        setError(data.error?.message || 'Tenant not found')\n      }\n    } catch (err) {\n      setError('Failed to load tenant')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const loadTickets = async () => {\n    try {\n      setLoadingTickets(true)\n      const token = localStorage.getItem('accessToken')\n      const publicTokenToUse = publicToken || localStorage.getItem('publicToken')\n      \n      const headers: Record<string, string> = {\n        'Content-Type': 'application/json',\n      }\n      \n      if (token) {\n        headers['Authorization'] = `Bearer ${token}`\n      } else if (publicTokenToUse) {\n        headers['Authorization'] = `Bearer ${publicTokenToUse}`\n      }\n\n      const response = await fetch(`/api/v1/tenants/${slug}/tickets`, {\n        headers,\n      })\n      const data = await response.json()\n\n      if (data.success) {\n        setTickets(data.data)\n        // Store tickets in localStorage for offline access\n        if (data.data.length > 0) {\n          localStorage.setItem(`tickets_${slug}`, JSON.stringify(data.data))\n        }\n      }\n    } catch (err) {\n      // Try to load from localStorage as fallback\n      const storedTickets = localStorage.getItem(`tickets_${slug}`)\n      if (storedTickets) {\n        try {\n          setTickets(JSON.parse(storedTickets))\n        } catch (e) {\n          // Invalid stored data\n        }\n      }\n    } finally {\n      setLoadingTickets(false)\n    }\n  }\n\n  if (loading) {\n    return (\n      <div style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n        <p>Loading...</p>\n      </div>\n    )\n  }\n\n  if (error || !tenant) {\n    return (\n      <div style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n        <div style={{ textAlign: 'center' }}>\n          <h1 style={{ fontSize: '2rem', marginBottom: '1rem' }}>Tenant Not Found</h1>\n          <p style={{ color: 'var(--text-secondary)' }}>{error || 'The tenant you are looking for does not exist.'}</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div style={{ minHeight: '100vh', backgroundColor: 'var(--bg-primary)', color: 'var(--text-primary)' }}>\n      {/* Header */}\n      <header\n        style={{\n          padding: '2rem',\n          borderBottom: '1px solid var(--border-color)',\n          backgroundColor: 'var(--bg-secondary)',\n        }}\n      >\n        <div style={{ maxWidth: '1200px', margin: '0 auto', display: 'flex', alignItems: 'center', gap: '1rem' }}>\n          {tenant.logo && (\n            <img src={tenant.logo} alt={tenant.name} style={{ width: '64px', height: '64px', borderRadius: '8px' }} />\n          )}\n          <div>\n            <h1 style={{ fontSize: '2rem', margin: 0 }}>{tenant.name}</h1>\n            {tenant.description && <p style={{ color: 'var(--text-secondary)', marginTop: '0.5rem' }}>{tenant.description}</p>}\n          </div>\n        </div>\n      </header>\n\n      {/* Navigation */}\n      <nav\n        style={{\n          padding: '1rem 2rem',\n          borderBottom: '1px solid var(--border-color)',\n          backgroundColor: 'var(--bg-secondary)',\n        }}\n      >\n        <div style={{ maxWidth: '1200px', margin: '0 auto', display: 'flex', gap: '2rem' }}>\n          <Link\n            href={`/tenant/${slug}`}\n            style={{\n              color: 'var(--accent-primary)',\n              textDecoration: 'none',\n              fontWeight: 600,\n            }}\n          >\n            Home\n          </Link>\n          <Link\n            href={`/tenant/${slug}/kb`}\n            style={{\n              color: 'var(--text-primary)',\n              textDecoration: 'none',\n            }}\n          >\n            Knowledge Base\n          </Link>\n          <Link\n            href={`/tenant/${slug}/submit`}\n            style={{\n              color: 'var(--text-primary)',\n              textDecoration: 'none',\n            }}\n          >\n            Submit Ticket\n          </Link>\n        </div>\n      </nav>\n\n      {/* Main Content */}\n      <main style={{ maxWidth: '1200px', margin: '0 auto', padding: '2rem' }}>\n        <div>\n          {/* Left Column */}\n          <div>\n            <h2 style={{ fontSize: '1.5rem', marginBottom: '1rem' }}>Welcome to {tenant.name} Support</h2>\n            <p style={{ color: 'var(--text-secondary)', marginBottom: '2rem' }}>\n              We're here to help! Browse our knowledge base or submit a support ticket.\n            </p>\n\n            {/* Quick Actions */}\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem', marginBottom: '2rem' }}>\n              <Link\n                href={`/tenant/${slug}/submit`}\n                style={{\n                  padding: '1.5rem',\n                  backgroundColor: 'var(--bg-secondary)',\n                  borderRadius: '8px',\n                  border: '1px solid var(--border-color)',\n                  textDecoration: 'none',\n                  color: 'var(--text-primary)',\n                  display: 'block',\n                }}\n              >\n                <h3 style={{ margin: 0, marginBottom: '0.5rem' }}>Submit a Ticket</h3>\n                <p style={{ margin: 0, color: 'var(--text-secondary)', fontSize: '0.875rem' }}>\n                  Get help with your issue\n                </p>\n              </Link>\n              <Link\n                href={`/tenant/${slug}/kb`}\n                style={{\n                  padding: '1.5rem',\n                  backgroundColor: 'var(--bg-secondary)',\n                  borderRadius: '8px',\n                  border: '1px solid var(--border-color)',\n                  textDecoration: 'none',\n                  color: 'var(--text-primary)',\n                  display: 'block',\n                }}\n              >\n                <h3 style={{ margin: 0, marginBottom: '0.5rem' }}>Knowledge Base</h3>\n                <p style={{ margin: 0, color: 'var(--text-secondary)', fontSize: '0.875rem' }}>\n                  Browse articles and FAQs\n                </p>\n              </Link>\n            </div>\n\n            {/* My Tickets (if logged in or has public token) */}\n            {(isAuthenticated || publicToken || localStorage.getItem('publicToken')) && (\n              <div style={{ marginBottom: '2rem' }}>\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>\n                  <h3 style={{ fontSize: '1.25rem', margin: 0 }}>My Tickets</h3>\n                  {tickets.length > 5 && (\n                    <Link\n                      href={`/tenant/${slug}/tickets`}\n                      style={{\n                        fontSize: '0.875rem',\n                        color: 'var(--accent-primary)',\n                        textDecoration: 'none',\n                      }}\n                    >\n                      View All\n                    </Link>\n                  )}\n                </div>\n                {loadingTickets ? (\n                  <p style={{ color: 'var(--text-secondary)' }}>Loading tickets...</p>\n                ) : tickets.length > 0 ? (\n                  <div style={{ display: 'grid', gap: '1rem' }}>\n                    {tickets.slice(0, 5).map((ticket) => (\n                      <Link\n                        key={ticket.id}\n                        href={`/tenant/${slug}/tickets/${ticket.id}`}\n                        style={{\n                          padding: '1rem',\n                          backgroundColor: 'var(--bg-secondary)',\n                          borderRadius: '8px',\n                          border: '1px solid var(--border-color)',\n                          textDecoration: 'none',\n                          color: 'var(--text-primary)',\n                          display: 'block',\n                        }}\n                      >\n                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '0.5rem' }}>\n                          <span style={{ fontWeight: 600 }}>{ticket.ticketNumber}</span>\n                          <span\n                            style={{\n                              padding: '0.25rem 0.75rem',\n                              borderRadius: '12px',\n                              fontSize: '0.75rem',\n                              fontWeight: 600,\n                              backgroundColor:\n                                ticket.status === 'OPEN' || ticket.status === 'NEW'\n                                  ? 'rgba(59, 130, 246, 0.1)'\n                                  : ticket.status === 'RESOLVED' || ticket.status === 'CLOSED'\n                                  ? 'rgba(16, 185, 129, 0.1)'\n                                  : 'rgba(156, 163, 175, 0.1)',\n                              color:\n                                ticket.status === 'OPEN' || ticket.status === 'NEW'\n                                  ? 'rgb(59, 130, 246)'\n                                  : ticket.status === 'RESOLVED' || ticket.status === 'CLOSED'\n                                  ? 'rgb(16, 185, 129)'\n                                  : 'rgb(156, 163, 175)',\n                            }}\n                          >\n                            {ticket.status}\n                          </span>\n                        </div>\n                        <h4 style={{ margin: 0, marginBottom: '0.25rem' }}>{ticket.subject}</h4>\n                        <p style={{ margin: 0, color: 'var(--text-secondary)', fontSize: '0.875rem' }}>\n                          {new Date(ticket.createdAt).toLocaleDateString()}\n                        </p>\n                      </Link>\n                    ))}\n                  </div>\n                ) : (\n                  <p style={{ color: 'var(--text-secondary)' }}>No tickets yet. Submit a ticket to get started!</p>\n                )}\n              </div>\n            )}\n\n            {/* Recent KB Articles */}\n            {tenant.kbArticles.length > 0 && (\n              <div>\n                <h3 style={{ fontSize: '1.25rem', marginBottom: '1rem' }}>Popular Articles</h3>\n                <div style={{ display: 'grid', gap: '1rem' }}>\n                  {tenant.kbArticles.slice(0, 5).map((article) => (\n                    <Link\n                      key={article.id}\n                      href={`/tenant/${slug}/kb/${article.id}`}\n                      style={{\n                        padding: '1rem',\n                        backgroundColor: 'var(--bg-secondary)',\n                        borderRadius: '8px',\n                        border: '1px solid var(--border-color)',\n                        textDecoration: 'none',\n                        color: 'var(--text-primary)',\n                        display: 'block',\n                      }}\n                    >\n                      {article.title}\n                    </Link>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </main>\n      \n      {/* Chat Widget - Fixed position */}\n      <TenantChatWidget tenantId={tenant.id} />\n    </div>\n  )\n}\n\n","'use client'\n\nimport { useState, useRef, useEffect } from 'react'\nimport { PaperAirplaneIcon, XMarkIcon } from '@heroicons/react/24/outline'\n\ninterface Message {\n  role: 'user' | 'assistant'\n  content: string\n}\n\ninterface TenantChatWidgetProps {\n  tenantId: string\n}\n\nexport default function TenantChatWidget({ tenantId }: TenantChatWidgetProps) {\n  const [isOpen, setIsOpen] = useState(false)\n  const [messages, setMessages] = useState<Message[]>([\n    {\n      role: 'assistant',\n      content: 'Hello! I can help you find answers in our knowledge base or create a support ticket. How can I assist you today?',\n    },\n  ])\n  const [input, setInput] = useState('')\n  const [loading, setLoading] = useState(false)\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }\n\n  useEffect(() => {\n    scrollToBottom()\n  }, [messages])\n\n  const handleSend = async () => {\n    if (!input.trim() || loading) return\n\n    const userMessage: Message = { role: 'user', content: input }\n    setMessages((prev) => [...prev, userMessage])\n    setInput('')\n    setLoading(true)\n\n    try {\n      const token = localStorage.getItem('accessToken')\n      const response = await fetch('/api/v1/ai/chat', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token && { Authorization: `Bearer ${token}` }),\n        },\n        body: JSON.stringify({\n          messages: [...messages, userMessage].map((m) => ({\n            role: m.role,\n            content: m.content,\n          })),\n          tenantId,\n        }),\n      })\n\n      const data = await response.json()\n\n      if (data.success) {\n        setMessages((prev) => [\n          ...prev,\n          {\n            role: 'assistant',\n            content: data.data.response,\n          },\n        ])\n      } else {\n        setMessages((prev) => [\n          ...prev,\n          {\n            role: 'assistant',\n            content: 'Sorry, I encountered an error. Please try again.',\n          },\n        ])\n      }\n    } catch (error) {\n      setMessages((prev) => [\n        ...prev,\n        {\n          role: 'assistant',\n          content: 'Sorry, I encountered an error. Please try again.',\n        },\n      ])\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div\n      style={{\n        position: 'fixed',\n        bottom: '2rem',\n        right: '2rem',\n        zIndex: 1000,\n      }}\n    >\n      {isOpen ? (\n        <div\n          style={{\n            width: '400px',\n            height: '600px',\n            backgroundColor: 'var(--bg-secondary)',\n            border: '1px solid var(--border-color)',\n            borderRadius: '12px',\n            boxShadow: '0 4px 24px rgba(0, 0, 0, 0.3)',\n            display: 'flex',\n            flexDirection: 'column',\n          }}\n        >\n          {/* Header */}\n          <div\n            style={{\n              padding: '1rem',\n              borderBottom: '1px solid var(--border-color)',\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n            }}\n          >\n            <h3 style={{ margin: 0, fontSize: '1rem', fontWeight: 600 }}>Support Chat</h3>\n            <button\n              onClick={() => setIsOpen(false)}\n              style={{\n                background: 'none',\n                border: 'none',\n                cursor: 'pointer',\n                color: 'var(--text-primary)',\n                padding: '0.25rem',\n              }}\n            >\n              <XMarkIcon className=\"w-5 h-5\" />\n            </button>\n          </div>\n\n          {/* Messages */}\n          <div\n            style={{\n              flex: 1,\n              overflowY: 'auto',\n              padding: '1rem',\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '1rem',\n            }}\n          >\n            {messages.map((msg, idx) => (\n              <div\n                key={idx}\n                style={{\n                  alignSelf: msg.role === 'user' ? 'flex-end' : 'flex-start',\n                  maxWidth: '80%',\n                  padding: '0.75rem 1rem',\n                  borderRadius: '12px',\n                  backgroundColor: msg.role === 'user' ? 'var(--accent-primary)' : 'var(--bg-tertiary)',\n                  color: msg.role === 'user' ? 'white' : 'var(--text-primary)',\n                }}\n              >\n                {msg.content}\n              </div>\n            ))}\n            {loading && (\n              <div\n                style={{\n                  alignSelf: 'flex-start',\n                  padding: '0.75rem 1rem',\n                  borderRadius: '12px',\n                  backgroundColor: 'var(--bg-tertiary)',\n                  color: 'var(--text-secondary)',\n                }}\n              >\n                Thinking...\n              </div>\n            )}\n            <div ref={messagesEndRef} />\n          </div>\n\n          {/* Input */}\n          <div\n            style={{\n              padding: '1rem',\n              borderTop: '1px solid var(--border-color)',\n              display: 'flex',\n              gap: '0.5rem',\n            }}\n          >\n            <input\n              type=\"text\"\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              onKeyPress={(e) => {\n                if (e.key === 'Enter' && !e.shiftKey) {\n                  e.preventDefault()\n                  handleSend()\n                }\n              }}\n              placeholder=\"Type your message...\"\n              disabled={loading}\n              style={{\n                flex: 1,\n                padding: '0.75rem',\n                borderRadius: '8px',\n                border: '1px solid var(--border-color)',\n                backgroundColor: 'var(--bg-primary)',\n                color: 'var(--text-primary)',\n              }}\n            />\n            <button\n              onClick={handleSend}\n              disabled={loading || !input.trim()}\n              style={{\n                padding: '0.75rem',\n                backgroundColor: 'var(--accent-primary)',\n                color: 'white',\n                border: 'none',\n                borderRadius: '8px',\n                cursor: loading || !input.trim() ? 'not-allowed' : 'pointer',\n                opacity: loading || !input.trim() ? 0.6 : 1,\n              }}\n            >\n              <PaperAirplaneIcon className=\"w-5 h-5\" />\n            </button>\n          </div>\n        </div>\n      ) : (\n        <button\n          onClick={() => setIsOpen(true)}\n          style={{\n            width: '64px',\n            height: '64px',\n            borderRadius: '50%',\n            backgroundColor: 'var(--accent-primary)',\n            color: 'white',\n            border: 'none',\n            cursor: 'pointer',\n            boxShadow: '0 4px 12px rgba(0, 0, 0, 0.3)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n          }}\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            strokeWidth={2}\n            stroke=\"currentColor\"\n            style={{ width: '24px', height: '24px' }}\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z\"\n            />\n          </svg>\n        </button>\n      )}\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}