module.exports=[44822,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246);function f(){let a=(0,d.useRouter)(),[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)({}),[p,q]=(0,c.useState)({name:"",type:"HARDWARE",customAssetTypeId:"",category:"",manufacturer:"",model:"",serialNumber:"",status:"ACTIVE",location:"",building:"",floor:"",room:"",purchaseDate:"",purchasePrice:"",warrantyExpiry:""});(0,c.useEffect)(()=>{r()},[p.type]),(0,c.useEffect)(()=>{if(p.customAssetTypeId){let a=j.find(a=>a.id===p.customAssetTypeId);if(m(a||null),a){let b={};a.customFields.forEach(a=>{a.defaultValue&&(b[a.fieldName]=a.defaultValue)}),o(b)}}else m(null),o({})},[p.customAssetTypeId,j]);let r=async()=>{try{let a=localStorage.getItem("accessToken"),b=await fetch(`/api/v1/admin/asset-types?baseType=${p.type}`,{headers:a?{Authorization:`Bearer ${a}`}:{}}),c=await b.json();c.success&&k(c.data.assetTypes)}catch(a){}},s=async b=>{b.preventDefault(),i(""),g(!0);try{let b=localStorage.getItem("accessToken"),c=await fetch("/api/v1/assets",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({...p,customAssetTypeId:p.customAssetTypeId||void 0,purchaseDate:p.purchaseDate?new Date(p.purchaseDate).toISOString():void 0,purchasePrice:p.purchasePrice?parseFloat(p.purchasePrice):void 0,warrantyExpiry:p.warrantyExpiry?new Date(p.warrantyExpiry).toISOString():void 0,customFields:Object.keys(n).length>0?n:void 0})}),d=await c.json();d.success?a.push(`/assets/${d.data.asset.id}`):(i(d.error?.message||"Failed to create asset"),g(!1))}catch(a){i("An unexpected error occurred"),g(!1)}};return(0,b.jsxs)("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto"},children:[(0,b.jsx)("div",{style:{marginBottom:"2rem"},children:(0,b.jsx)(e.default,{href:"/assets",style:{color:"var(--accent-primary)",textDecoration:"none"},children:"â† Back to Assets"})}),(0,b.jsx)("h1",{style:{marginBottom:"2rem"},children:"Create New Asset"}),h&&(0,b.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--error)"},children:h}),(0,b.jsxs)("form",{onSubmit:s,style:{display:"grid",gap:"1.5rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:["Name ",(0,b.jsx)("span",{style:{color:"var(--error)"},children:"*"})]}),(0,b.jsx)("input",{type:"text",className:"input",value:p.name,onChange:a=>q({...p,name:a.target.value}),required:!0,disabled:f})]}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:["Base Type ",(0,b.jsx)("span",{style:{color:"var(--error)"},children:"*"})]}),(0,b.jsxs)("select",{className:"input",value:p.type,onChange:a=>{q({...p,type:a.target.value,customAssetTypeId:""}),m(null),o({})},required:!0,disabled:f,children:[(0,b.jsx)("option",{value:"HARDWARE",children:"Hardware"}),(0,b.jsx)("option",{value:"SOFTWARE",children:"Software"}),(0,b.jsx)("option",{value:"NETWORK_DEVICE",children:"Network Device"}),(0,b.jsx)("option",{value:"CLOUD_RESOURCE",children:"Cloud Resource"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Status"}),(0,b.jsxs)("select",{className:"input",value:p.status,onChange:a=>q({...p,status:a.target.value}),disabled:f,children:[(0,b.jsx)("option",{value:"ACTIVE",children:"Active"}),(0,b.jsx)("option",{value:"INACTIVE",children:"Inactive"}),(0,b.jsx)("option",{value:"RETIRED",children:"Retired"}),(0,b.jsx)("option",{value:"MAINTENANCE",children:"Maintenance"})]})]})]}),j.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Asset Type (Optional)"}),(0,b.jsxs)("select",{className:"input",value:p.customAssetTypeId,onChange:a=>q({...p,customAssetTypeId:a.target.value}),disabled:f,children:[(0,b.jsx)("option",{value:"",children:"None (Use base type only)"}),j.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),l&&l.customFields.length>0&&(0,b.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsxs)("h3",{style:{marginTop:0,marginBottom:"1rem"},children:["Custom Fields for ",l.name]}),(0,b.jsx)("div",{style:{display:"grid",gap:"1rem"},children:l.customFields.sort((a,b)=>a.order-b.order).map(a=>(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:[a.label,a.required&&(0,b.jsx)("span",{style:{color:"var(--error)"},children:" *"})]}),"text"===a.fieldType&&(0,b.jsx)("input",{type:"text",className:"input",value:n[a.fieldName]||"",onChange:b=>o({...n,[a.fieldName]:b.target.value}),required:a.required,placeholder:a.placeholder,disabled:f}),"textarea"===a.fieldType&&(0,b.jsx)("textarea",{className:"input",value:n[a.fieldName]||"",onChange:b=>o({...n,[a.fieldName]:b.target.value}),required:a.required,placeholder:a.placeholder,rows:3,disabled:f}),"number"===a.fieldType&&(0,b.jsx)("input",{type:"number",className:"input",value:n[a.fieldName]||"",onChange:b=>o({...n,[a.fieldName]:b.target.value}),required:a.required,placeholder:a.placeholder,disabled:f}),"date"===a.fieldType&&(0,b.jsx)("input",{type:"date",className:"input",value:n[a.fieldName]||"",onChange:b=>o({...n,[a.fieldName]:b.target.value}),required:a.required,disabled:f}),"select"===a.fieldType&&(0,b.jsxs)("select",{className:"input",value:n[a.fieldName]||"",onChange:b=>o({...n,[a.fieldName]:b.target.value}),required:a.required,disabled:f,children:[(0,b.jsx)("option",{value:"",children:"Select..."}),Array.isArray(a.options)&&a.options.map((a,c)=>(0,b.jsx)("option",{value:a,children:a},c))]}),"checkbox"===a.fieldType&&(0,b.jsx)("div",{children:Array.isArray(a.options)&&a.options.map((c,d)=>(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[(0,b.jsx)("input",{type:"checkbox",checked:!!Array.isArray(n[a.fieldName])&&n[a.fieldName].includes(c),onChange:b=>{let d=Array.isArray(n[a.fieldName])?n[a.fieldName]:[],e=b.target.checked?[...d,c]:d.filter(a=>a!==c);o({...n,[a.fieldName]:e})},disabled:f}),c]},d))})]},a.id))})]}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Category"}),(0,b.jsx)("input",{type:"text",className:"input",value:p.category,onChange:a=>q({...p,category:a.target.value}),disabled:f})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Manufacturer"}),(0,b.jsx)("input",{type:"text",className:"input",value:p.manufacturer,onChange:a=>q({...p,manufacturer:a.target.value}),disabled:f})]})]}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Model"}),(0,b.jsx)("input",{type:"text",className:"input",value:p.model,onChange:a=>q({...p,model:a.target.value}),disabled:f})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Serial Number"}),(0,b.jsx)("input",{type:"text",className:"input",value:p.serialNumber,onChange:a=>q({...p,serialNumber:a.target.value}),disabled:f})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Location"}),(0,b.jsx)("input",{type:"text",className:"input",value:p.location,onChange:a=>q({...p,location:a.target.value}),disabled:f})]}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Building"}),(0,b.jsx)("input",{type:"text",className:"input",value:p.building,onChange:a=>q({...p,building:a.target.value}),disabled:f})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Floor"}),(0,b.jsx)("input",{type:"text",className:"input",value:p.floor,onChange:a=>q({...p,floor:a.target.value}),disabled:f})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Room"}),(0,b.jsx)("input",{type:"text",className:"input",value:p.room,onChange:a=>q({...p,room:a.target.value}),disabled:f})]})]}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Purchase Date"}),(0,b.jsx)("input",{type:"datetime-local",className:"input",value:p.purchaseDate,onChange:a=>q({...p,purchaseDate:a.target.value}),disabled:f})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Purchase Price"}),(0,b.jsx)("input",{type:"number",step:"0.01",className:"input",value:p.purchasePrice,onChange:a=>q({...p,purchasePrice:a.target.value}),disabled:f})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Warranty Expiry"}),(0,b.jsx)("input",{type:"datetime-local",className:"input",value:p.warrantyExpiry,onChange:a=>q({...p,warrantyExpiry:a.target.value}),disabled:f})]})]}),(0,b.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[(0,b.jsx)(e.default,{href:"/assets",style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)"},children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:f,children:f?"Creating...":"Create Asset"})]})]})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=app_assets_new_page_tsx_d0d690f9._.js.map