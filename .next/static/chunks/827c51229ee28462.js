(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78928,r=>{"use strict";var e=r.i(43476),o=r.i(71645),t=r.i(22016);function a(){let[r,a]=(0,o.useState)(null),[d,i]=(0,o.useState)(null),[s,n]=(0,o.useState)(!0);(0,o.useEffect)(()=>{l()},[]);let l=async()=>{try{n(!0);let r=localStorage.getItem("accessToken"),[e,o]=await Promise.all([fetch("/api/v1/analytics/metrics",{headers:r?{Authorization:`Bearer ${r}`}:{}}),fetch("/api/v1/analytics/mttr",{headers:r?{Authorization:`Bearer ${r}`}:{}})]),t=await e.json(),d=await o.json();t.success&&a(t.data.metrics),d.success&&i(d.data.mttr)}catch(r){console.error("Failed to load dashboard data:",r)}finally{n(!1)}},c=async r=>{try{let e=localStorage.getItem("accessToken"),o=await fetch(`/api/v1/analytics/export?type=${r}&format=csv`,{headers:e?{Authorization:`Bearer ${e}`}:{}}),t=await o.blob(),a=window.URL.createObjectURL(t),d=document.createElement("a");d.href=a,d.download=`${r}-report-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(d),d.click(),window.URL.revokeObjectURL(a),document.body.removeChild(d)}catch(r){console.error("Failed to export report:",r)}};return s?(0,e.jsx)("div",{style:{padding:"2rem"},children:"Loading dashboard..."}):(0,e.jsxs)("div",{style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,e.jsx)("h1",{style:{margin:0},children:"Dashboard"}),(0,e.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,e.jsx)("button",{onClick:()=>c("tickets"),style:{padding:"0.5rem 1rem",backgroundColor:"var(--accent-primary)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Export Tickets CSV"}),(0,e.jsx)(t.default,{href:"/reports",style:{padding:"0.5rem 1rem",backgroundColor:"var(--accent-primary)",color:"white",textDecoration:"none",borderRadius:"6px"},children:"View Reports"})]})]}),r&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[(0,e.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,e.jsx)("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Total Tickets"}),(0,e.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:r.totalTickets})]}),(0,e.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,e.jsx)("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Open Tickets"}),(0,e.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"orange"},children:r.openTickets})]}),(0,e.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,e.jsx)("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Resolved Tickets"}),(0,e.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"green"},children:r.resolvedTickets})]}),(0,e.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,e.jsx)("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"SLA Compliance"}),(0,e.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:r.slaCompliance>=90?"green":r.slaCompliance>=75?"orange":"red"},children:[r.slaCompliance.toFixed(1),"%"]})]}),null!==d&&(0,e.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,e.jsx)("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"MTTR (Minutes)"}),(0,e.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:d})]}),(0,e.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,e.jsx)("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Avg Resolution Time"}),(0,e.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:[r.averageResolutionTime," min"]})]})]}),(0,e.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem",marginBottom:"2rem"},children:[(0,e.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,e.jsx)("h2",{style:{marginTop:0,marginBottom:"1rem"},children:"Tickets by Priority"}),(0,e.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Object.entries(r.ticketsByPriority).map(([r,o])=>(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,e.jsxs)("span",{children:[r,":"]}),(0,e.jsx)("strong",{children:o})]},r))})]}),(0,e.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,e.jsx)("h2",{style:{marginTop:0,marginBottom:"1rem"},children:"Tickets by Status"}),(0,e.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Object.entries(r.ticketsByStatus).map(([r,o])=>(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,e.jsxs)("span",{children:[r,":"]}),(0,e.jsx)("strong",{children:o})]},r))})]})]})]}),(0,e.jsxs)("div",{style:{marginTop:"2rem"},children:[(0,e.jsx)("h2",{style:{marginBottom:"1rem"},children:"Quick Links"}),(0,e.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[(0,e.jsx)(t.default,{href:"/tickets",style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)"},children:"View Tickets"}),(0,e.jsx)(t.default,{href:"/assets",style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)"},children:"View Assets"}),(0,e.jsx)(t.default,{href:"/changes",style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)"},children:"View Changes"}),(0,e.jsx)(t.default,{href:"/kb",style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)"},children:"Knowledge Base"}),(0,e.jsx)(t.default,{href:"/admin/sla",style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)"},children:"SLA Management"}),(0,e.jsx)(t.default,{href:"/admin/config",style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)"},children:"Configuration"}),(0,e.jsx)(t.default,{href:"/admin/users",style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)"},children:"User Management"})]})]})]})}r.s(["default",()=>a])}]);