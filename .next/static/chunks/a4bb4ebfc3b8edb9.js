(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,38573,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566);function r(){let e=(0,a.useParams)(),r=e?.id,[i,n]=(0,s.useState)(null),[l,o]=(0,s.useState)(!0),[d,c]=(0,s.useState)(""),[m,y]=(0,s.useState)(""),[h,p]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=async()=>{try{let e=await fetch(`/api/v1/tickets/${r}`),t=await e.json();if(!t.success)return void c("Failed to load ticket");n(t.data)}catch(e){c("Failed to load ticket")}finally{o(!1)}};r&&e()},[r]);let u=async()=>{if(m.trim()){p(!0),c("");try{let e=localStorage.getItem("accessToken"),t=await fetch(`/api/v1/tickets/${r}`,{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify({body:m})}),s=await t.json();if(!s.success){c(s.error?.message||"Failed to add comment"),p(!1);return}n(e=>e?{...e,comments:[...e.comments,{...s.data,author:s.data.author}]}:e),y("")}catch(e){c("Failed to add comment")}finally{p(!1)}}};return l?(0,t.jsx)("div",{className:"container",style:{padding:"2rem"},children:"Loading ticket..."}):d?(0,t.jsx)("div",{className:"container",style:{padding:"2rem",color:"var(--error)"},children:d}):i?(0,t.jsxs)("div",{className:"container",style:{padding:"2rem",display:"grid",gap:"1.5rem"},children:[(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,t.jsx)("span",{style:{fontWeight:600},children:i.ticketNumber}),(0,t.jsx)("span",{style:{color:"var(--text-secondary)"},children:new Date(i.createdAt).toLocaleString()})]}),(0,t.jsx)("h1",{style:{marginBottom:"0.5rem"},children:i.subject}),(0,t.jsx)("p",{style:{color:"var(--text-secondary)",marginBottom:"0.75rem"},children:i.description}),(0,t.jsxs)("div",{style:{display:"flex",gap:"0.75rem",color:"var(--text-secondary)",fontSize:"0.9rem"},children:[(0,t.jsxs)("span",{children:["Status: ",i.status]}),(0,t.jsxs)("span",{children:["Priority: ",i.priority]})]})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h3",{style:{marginBottom:"0.75rem"},children:"Comments"}),(0,t.jsxs)("div",{style:{display:"grid",gap:"0.5rem",marginBottom:"1rem"},children:[0===i.comments.length&&(0,t.jsx)("p",{style:{color:"var(--text-secondary)"},children:"No comments yet."}),i.comments.map(e=>(0,t.jsxs)("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.5rem",padding:"0.75rem"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[(0,t.jsx)("span",{style:{fontWeight:500},children:e.author?.email??"Unknown"}),(0,t.jsx)("span",{style:{color:"var(--text-tertiary)",fontSize:"0.85rem"},children:new Date(e.createdAt).toLocaleString()})]}),(0,t.jsx)("p",{children:e.body})]},e.id))]}),(0,t.jsxs)("div",{style:{display:"grid",gap:"0.5rem"},children:[(0,t.jsx)("textarea",{className:"input",rows:3,placeholder:"Add a comment",value:m,onChange:e=>y(e.target.value),disabled:h}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:u,disabled:h,children:h?"Adding...":"Add Comment"}),d&&(0,t.jsx)("p",{style:{color:"var(--error)"},children:d})]})]})]}):null}e.s(["default",()=>r])}]);