(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48937,e=>{"use strict";var r=e.i(18050),a=e.i(71645),t=e.i(18566);function i(){let e=(0,t.useRouter)(),i=(0,t.useParams)(),o=i?.id,[s,n]=(0,a.useState)(null),[d,l]=(0,a.useState)(!0),[c,g]=(0,a.useState)(!1),[m,u]=(0,a.useState)(""),[p,h]=(0,a.useState)(null),[y,b]=(0,a.useState)({email:"",firstName:"",lastName:"",isActive:!0});(0,a.useEffect)(()=>{x()},[o]);let x=async()=>{try{l(!0);let e=localStorage.getItem("accessToken"),r=await fetch(`/api/v1/manager/agents/${o}`,{headers:e?{Authorization:`Bearer ${e}`}:{}}),a=await r.json();a.success?(n(a.data.agent||a.data),b({email:a.data.agent?.email||a.data.email,firstName:a.data.agent?.firstName||a.data.firstName||"",lastName:a.data.agent?.lastName||a.data.lastName||"",isActive:a.data.agent?.isActive??a.data.isActive??!0})):u(a.error?.message||"Failed to load agent")}catch(e){u("An unexpected error occurred")}finally{l(!1)}},v=async()=>{g(!0),u("");try{let e=localStorage.getItem("accessToken"),r=await fetch(`/api/v1/manager/agents/${o}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(y)}),a=await r.json();a.success?x():u(a.error?.message||"Failed to update agent")}catch(e){u("An unexpected error occurred")}finally{g(!1)}},f=async()=>{if(confirm("Are you sure you want to reset this agent's password? A temporary password will be generated."))try{let e=localStorage.getItem("accessToken"),r=await fetch(`/api/v1/manager/agents/${o}/reset-password`,{method:"POST",headers:{Authorization:`Bearer ${e}`}}),a=await r.json();a.success?h(a.data.temporaryPassword):u(a.error?.message||"Failed to reset password")}catch(e){u("An unexpected error occurred")}},j=async()=>{if(confirm(`Are you sure you want to ${y.isActive?"disable":"enable"} this agent?`))try{let e=localStorage.getItem("accessToken"),r=await fetch(`/api/v1/manager/agents/${o}/disable`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({disabled:y.isActive})}),a=await r.json();a.success?(b({...y,isActive:!y.isActive}),x()):u(a.error?.message||"Failed to update agent")}catch(e){u("An unexpected error occurred")}},w=async()=>{if(confirm("Are you sure you want to delete this agent? This action cannot be undone."))try{let r=localStorage.getItem("accessToken"),a=await fetch(`/api/v1/manager/agents/${o}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`}}),t=await a.json();t.success?e.push("/manager/agents"):u(t.error?.message||"Failed to delete agent")}catch(e){u("An unexpected error occurred")}};return d?(0,r.jsx)("div",{style:{padding:"2rem"},children:(0,r.jsx)("p",{children:"Loading agent..."})}):s?(0,r.jsxs)("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,r.jsx)("h1",{style:{fontSize:"2rem",margin:0},children:"Manage Agent"}),(0,r.jsx)("button",{onClick:()=>e.back(),style:{padding:"0.5rem 1rem",backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",border:"none",borderRadius:"0.5rem",cursor:"pointer"},children:"Back"})]}),m&&(0,r.jsx)("div",{style:{padding:"1rem",backgroundColor:"var(--error-bg)",color:"var(--error-text)",borderRadius:"0.5rem",marginBottom:"1rem"},children:m}),p&&(0,r.jsxs)("div",{style:{padding:"1rem",backgroundColor:"var(--success-bg)",color:"var(--success-text)",borderRadius:"0.5rem",marginBottom:"1rem"},children:[(0,r.jsx)("p",{style:{margin:0,fontWeight:600},children:"Temporary Password Generated:"}),(0,r.jsx)("p",{style:{margin:"0.5rem 0 0 0",fontFamily:"monospace",fontSize:"1.25rem"},children:p}),(0,r.jsx)("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.875rem"},children:"Share this password with the agent. They should change it after logging in."})]}),(0,r.jsxs)("div",{style:{display:"grid",gap:"1.5rem",marginBottom:"2rem"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Email"}),(0,r.jsx)("input",{type:"email",value:y.email,onChange:e=>b({...y,email:e.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"First Name"}),(0,r.jsx)("input",{type:"text",value:y.firstName,onChange:e=>b({...y,firstName:e.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Last Name"}),(0,r.jsx)("input",{type:"text",value:y.lastName,onChange:e=>b({...y,lastName:e.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"}})]})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,r.jsx)("input",{type:"checkbox",checked:y.isActive,onChange:e=>b({...y,isActive:e.target.checked}),style:{width:"18px",height:"18px"}}),(0,r.jsx)("span",{children:"Active"})]})})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[(0,r.jsx)("button",{onClick:v,disabled:c,style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--accent-primary)",color:"white",border:"none",borderRadius:"8px",cursor:c?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:600,opacity:c?.6:1},children:c?"Saving...":"Save Changes"}),(0,r.jsx)("button",{onClick:f,style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--warning-bg)",color:"var(--warning-text)",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem"},children:"Reset Password"}),(0,r.jsx)("button",{onClick:j,style:{padding:"0.75rem 1.5rem",backgroundColor:y.isActive?"var(--warning-bg)":"var(--success-bg)",color:y.isActive?"var(--warning-text)":"var(--success-text)",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem"},children:y.isActive?"Disable":"Enable"}),(0,r.jsx)("button",{onClick:w,style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--error-bg)",color:"var(--error-text)",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem"},children:"Delete Agent"})]})]}):(0,r.jsx)("div",{style:{padding:"2rem"},children:(0,r.jsx)("p",{children:"Agent not found"})})}e.s(["default",()=>i])}]);