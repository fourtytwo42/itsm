module.exports=[34162,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246);function e(){let[a,e]=(0,c.useState)(null),[f,g]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{(async()=>{try{let a=localStorage.getItem("accessToken");if(!a)return void g(!1);let b=await fetch("/api/v1/organizations/me",{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json();e(a.organization)}}catch(a){}finally{g(!1)}})()},[]),f||!a)?null:(0,b.jsxs)("div",{style:{padding:"0.5rem 1rem",backgroundColor:"var(--bg-secondary)",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.875rem"},children:[a.logo&&(0,b.jsx)("img",{src:a.logo,alt:a.name,style:{width:"24px",height:"24px",objectFit:"contain"}}),(0,b.jsx)("span",{style:{color:"var(--text-secondary)"},children:"Organization:"}),(0,b.jsx)(d.default,{href:"/organization/settings",style:{color:"var(--accent-primary)",textDecoration:"none",fontWeight:500},children:a.name})]})}a.s(["default",()=>e])},36216,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246);let e=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}),f=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))});function g({tickets:a,onStatusChange:g,showQuickActions:h=!0,onRefresh:i,disableClientSort:j=!1,onSortChange:k,currentSortField:l,currentSortOrder:m}){let[n,o]=(0,c.useState)("createdAt"),[p,q]=(0,c.useState)("desc"),r=j&&void 0!==l?l:n,s=j&&void 0!==m?m:p,[t,u]=(0,c.useState)({}),v=async(a,b)=>{if(g){u(b=>({...b,[a]:!0}));try{await g(a,b),i&&i()}catch(a){console.error("Failed to update status:",a)}finally{u(b=>({...b,[a]:!1}))}}},w=j?a:[...a].sort((a,b)=>{let c,d;switch(r){case"ticketNumber":c=a.ticketNumber,d=b.ticketNumber;break;case"subject":c=a.subject,d=b.subject;break;case"status":c=a.status,d=b.status;break;case"priority":c=a.priority,d=b.priority;break;case"createdAt":default:c=new Date(a.createdAt).getTime(),d=new Date(b.createdAt).getTime();break;case"updatedAt":c=new Date(a.updatedAt).getTime(),d=new Date(b.updatedAt).getTime();break;case"requester":c=a.requester?.email||a.requesterEmail||"",d=b.requester?.email||b.requesterEmail||"";break;case"assignee":c=a.assignee?.email||"",d=b.assignee?.email||""}return c<d?"asc"===s?-1:1:c>d?"asc"===s?1:-1:0}),x=({field:a,label:c})=>(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"left",fontWeight:600,fontSize:"0.875rem",cursor:"pointer",userSelect:"none",position:"relative"},onClick:()=>{j&&k?k(a,r===a&&"desc"===s?"asc":"desc"):r===a?q("asc"===p?"desc":"asc"):(o(a),q("desc"))},children:(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[c,r===a&&("asc"===s?(0,b.jsx)(e,{style:{width:"0.875rem",height:"0.875rem"}}):(0,b.jsx)(f,{style:{width:"0.875rem",height:"0.875rem"}}))]})});return 0===a.length?(0,b.jsx)("div",{className:"card",style:{padding:"3rem",textAlign:"center",color:"var(--text-secondary)"},children:"No tickets found."}):(0,b.jsx)("div",{className:"card",style:{overflowX:"auto",padding:0},children:(0,b.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{style:{borderBottom:"2px solid var(--border-color)",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)(x,{field:"ticketNumber",label:"Ticket #"}),(0,b.jsx)(x,{field:"subject",label:"Subject"}),(0,b.jsx)(x,{field:"requester",label:"Requester"}),(0,b.jsx)(x,{field:"assignee",label:"Assignee"}),(0,b.jsx)(x,{field:"status",label:"Status"}),(0,b.jsx)(x,{field:"priority",label:"Priority"}),(0,b.jsx)(x,{field:"createdAt",label:"Created"}),h&&(0,b.jsx)("th",{style:{padding:"0.875rem 1rem",textAlign:"right",fontWeight:600,fontSize:"0.875rem"},children:"Actions"})]})}),(0,b.jsx)("tbody",{children:w.map(a=>(0,b.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[(0,b.jsx)("td",{style:{padding:"1rem"},children:(0,b.jsx)(d.default,{href:`/tickets/${a.id}`,style:{color:"var(--accent-primary)",textDecoration:"none",fontWeight:500},children:a.ticketNumber})}),(0,b.jsx)("td",{style:{padding:"1rem"},children:(0,b.jsx)(d.default,{href:`/tickets/${a.id}`,style:{color:"var(--text-primary)",textDecoration:"none"},children:a.subject})}),(0,b.jsx)("td",{style:{padding:"1rem",color:"var(--text-secondary)"},children:a.requester?[a.requester.firstName,a.requester.lastName].filter(Boolean).join(" ")||a.requester.email:a.requesterName||a.requesterEmail||"Unknown"}),(0,b.jsx)("td",{style:{padding:"1rem",color:"var(--text-secondary)"},children:a.assignee?[a.assignee.firstName,a.assignee.lastName].filter(Boolean).join(" ")||a.assignee.email:"Unassigned"}),(0,b.jsx)("td",{style:{padding:"1rem"},children:(0,b.jsx)("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:(a=>{switch(a){case"NEW":return"rgba(59, 130, 246, 0.15)";case"IN_PROGRESS":return"rgba(234, 179, 8, 0.15)";case"RESOLVED":return"rgba(34, 197, 94, 0.15)";case"CLOSED":return"rgba(107, 114, 128, 0.15)";default:return"var(--bg-tertiary)"}})(a.status),color:(a=>{switch(a){case"NEW":return"rgb(59, 130, 246)";case"IN_PROGRESS":return"rgb(234, 179, 8)";case"RESOLVED":return"rgb(34, 197, 94)";case"CLOSED":return"rgb(107, 114, 128)";default:return"var(--text-secondary)"}})(a.status),borderRadius:"4px",fontSize:"0.75rem",fontWeight:500,textTransform:"capitalize"},children:a.status.replace("_"," ")})}),(0,b.jsx)("td",{style:{padding:"1rem"},children:(0,b.jsx)("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:(a=>{switch(a){case"LOW":return"rgba(34, 197, 94, 0.15)";case"MEDIUM":return"rgba(234, 179, 8, 0.15)";case"HIGH":return"rgba(251, 146, 60, 0.15)";case"CRITICAL":return"rgba(239, 68, 68, 0.15)";default:return"var(--bg-tertiary)"}})(a.priority),color:(a=>{switch(a){case"LOW":return"rgb(34, 197, 94)";case"MEDIUM":return"rgb(234, 179, 8)";case"HIGH":return"rgb(251, 146, 60)";case"CRITICAL":return"rgb(239, 68, 68)";default:return"var(--text-secondary)"}})(a.priority),borderRadius:"4px",fontSize:"0.75rem",fontWeight:500,textTransform:"capitalize"},children:a.priority})}),(0,b.jsxs)("td",{style:{padding:"1rem",color:"var(--text-secondary)",fontSize:"0.875rem"},children:[new Date(a.createdAt).toLocaleDateString()," ",new Date(a.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),h&&(0,b.jsx)("td",{style:{padding:"1rem",textAlign:"right"},children:g&&(0,b.jsxs)("select",{value:a.status,onChange:b=>v(a.id,b.target.value),disabled:t[a.id],style:{padding:"0.375rem 0.75rem",border:"1px solid var(--border-color)",borderRadius:"4px",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",cursor:t[a.id]?"not-allowed":"pointer",fontSize:"0.875rem"},children:[(0,b.jsx)("option",{value:"NEW",children:"New"}),(0,b.jsx)("option",{value:"IN_PROGRESS",children:"In Progress"}),(0,b.jsx)("option",{value:"RESOLVED",children:"Resolved"}),(0,b.jsx)("option",{value:"CLOSED",children:"Closed"})]})})]},a.id))})]})})}a.s(["default",()=>g],36216)},80728,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(72131),e=a.i(36216),f=a.i(34162);function g(){let[a,g]=(0,d.useState)([]),[h,i]=(0,d.useState)(!0),[j,k]=(0,d.useState)(""),[l,m]=(0,d.useState)("all"),[n,o]=(0,d.useState)(""),[p,q]=(0,d.useState)("createdAt"),[r,s]=(0,d.useState)("desc"),[t,u]=(0,d.useState)(1),[v,w]=(0,d.useState)(1),[x,y]=(0,d.useState)(0);(0,d.useEffect)(()=>{z()},[l,n,p,r,t]);let z=async()=>{try{i(!0),k("");let a=localStorage.getItem("accessToken"),b=new URLSearchParams;"all"!==l&&b.append("status",l),n.trim()&&b.append("search",n.trim()),b.append("sortBy",p),b.append("sortOrder",r),b.append("page",t.toString()),b.append("limit","20");let c=await fetch(`/api/v1/tickets?${b.toString()}`,{headers:a?{Authorization:`Bearer ${a}`}:{}}),d=await c.json();if(!d.success)return void k(d.error?.message||"Failed to load tickets");g(d.data||[]),d.pagination&&(w(d.pagination.totalPages||1),y(d.pagination.total||0))}catch(a){k("Failed to load tickets"),console.error(a)}finally{i(!1)}},A=async(a,b)=>{let c=localStorage.getItem("accessToken");try{let d=await fetch(`/api/v1/tickets/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({status:b})}),e=await d.json();if(!e.success)throw Error(e.error?.message||"Failed to update status");z()}catch(a){throw console.error("Failed to update ticket status:",a),a}};return(0,b.jsxs)("div",{className:"container",style:{padding:"2rem"},children:[(0,b.jsx)(f.default,{}),(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",marginTop:"1rem"},children:[(0,b.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold"},children:"Tickets"}),(0,b.jsx)(c.default,{href:"/tickets/new",className:"btn btn-primary",children:"New Ticket"})]}),(0,b.jsxs)("div",{className:"card",style:{padding:"1.5rem",marginBottom:"1.5rem"},children:[(0,b.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"flex-end"},children:[(0,b.jsxs)("div",{style:{flex:1,minWidth:"200px"},children:[(0,b.jsx)("label",{className:"label",htmlFor:"statusFilter",children:"Status"}),(0,b.jsxs)("select",{id:"statusFilter",className:"input",value:l,onChange:a=>{m(a.target.value),u(1)},children:[(0,b.jsx)("option",{value:"all",children:"All Statuses"}),(0,b.jsx)("option",{value:"NEW",children:"New"}),(0,b.jsx)("option",{value:"IN_PROGRESS",children:"In Progress"}),(0,b.jsx)("option",{value:"RESOLVED",children:"Resolved"}),(0,b.jsx)("option",{value:"CLOSED",children:"Closed"})]})]}),(0,b.jsxs)("div",{style:{flex:2,minWidth:"250px"},children:[(0,b.jsx)("label",{className:"label",htmlFor:"search",children:"Search (Username, Email, or Problem)"}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),u(1),z()},style:{display:"flex",gap:"0.5rem"},children:[(0,b.jsx)("input",{id:"search",type:"text",className:"input",value:n,onChange:a=>o(a.target.value),placeholder:"Search by username, email, or problem text...",style:{flex:1}}),(0,b.jsx)("button",{type:"submit",className:"btn btn-secondary",children:"Search"}),n&&(0,b.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{o(""),u(1)},children:"Clear"})]})]}),(0,b.jsxs)("div",{style:{minWidth:"150px"},children:[(0,b.jsx)("label",{className:"label",htmlFor:"sortBy",children:"Sort By"}),(0,b.jsxs)("select",{id:"sortBy",className:"input",value:p,onChange:a=>{q(a.target.value),u(1)},children:[(0,b.jsx)("option",{value:"createdAt",children:"Created Date"}),(0,b.jsx)("option",{value:"updatedAt",children:"Updated Date"}),(0,b.jsx)("option",{value:"ticketNumber",children:"Ticket Number"}),(0,b.jsx)("option",{value:"subject",children:"Subject"}),(0,b.jsx)("option",{value:"status",children:"Status"}),(0,b.jsx)("option",{value:"priority",children:"Priority"}),(0,b.jsx)("option",{value:"requester",children:"Requester"}),(0,b.jsx)("option",{value:"assignee",children:"Assignee"})]})]}),(0,b.jsxs)("div",{style:{minWidth:"120px"},children:[(0,b.jsx)("label",{className:"label",htmlFor:"sortOrder",children:"Order"}),(0,b.jsxs)("select",{id:"sortOrder",className:"input",value:r,onChange:a=>{s(a.target.value),u(1)},children:[(0,b.jsx)("option",{value:"desc",children:"Newest First"}),(0,b.jsx)("option",{value:"asc",children:"Oldest First"})]})]})]}),x>0&&(0,b.jsxs)("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--border-color)",color:"var(--text-secondary)",fontSize:"0.875rem"},children:["Showing ",(t-1)*20+1," - ",Math.min(20*t,x)," of ",x," tickets"]})]}),j&&(0,b.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--error)"},children:j}),h?(0,b.jsx)("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading tickets..."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.default,{tickets:a,onStatusChange:A,showQuickActions:!0,onRefresh:z,disableClientSort:!0,onSortChange:(a,b)=>{q(a),s(b),u(1)}}),v>1&&(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"1rem",marginTop:"2rem"},children:[(0,b.jsx)("button",{className:"btn btn-secondary",onClick:()=>u(a=>Math.max(1,a-1)),disabled:1===t,children:"Previous"}),(0,b.jsxs)("span",{style:{color:"var(--text-secondary)"},children:["Page ",t," of ",v]}),(0,b.jsx)("button",{className:"btn btn-secondary",onClick:()=>u(a=>Math.min(v,a+1)),disabled:t===v,children:"Next"})]})]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=_0847cf8f._.js.map