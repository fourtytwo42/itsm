module.exports=[36110,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(){(0,d.useRouter)();let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)({name:"",displayName:"",description:"",isActive:!0}),[r,s]=(0,c.useState)(!1);(0,c.useEffect)(()=>{t()},[]);let t=async()=>{try{g(!0);let a=localStorage.getItem("accessToken"),b=await fetch("/api/v1/admin/custom-roles",{headers:a?{Authorization:`Bearer ${a}`}:{}}),c=await b.json();c.success?e(c.data.customRoles):i(c.error?.message||"Failed to load custom roles")}catch(a){i("An unexpected error occurred")}finally{g(!1)}},u=async a=>{a.preventDefault(),s(!0),i("");try{let a=localStorage.getItem("accessToken"),b=await fetch("/api/v1/admin/custom-roles",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(p)}),c=await b.json();c.success?(k(!1),q({name:"",displayName:"",description:"",isActive:!0}),t()):i(c.error?.message||"Failed to create custom role")}catch(a){i("An unexpected error occurred")}finally{s(!1)}},v=async a=>{if(a.preventDefault(),n){s(!0),i("");try{let a=localStorage.getItem("accessToken"),b=await fetch(`/api/v1/admin/custom-roles/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(p)}),c=await b.json();c.success?(m(!1),o(null),q({name:"",displayName:"",description:"",isActive:!0}),t()):i(c.error?.message||"Failed to update custom role")}catch(a){i("An unexpected error occurred")}finally{s(!1)}}},w=async a=>{if(confirm("Are you sure you want to delete this custom role? Users assigned to this role will need to be reassigned."))try{let b=localStorage.getItem("accessToken"),c=await fetch(`/api/v1/admin/custom-roles/${a}`,{method:"DELETE",headers:b?{Authorization:`Bearer ${b}`}:{}}),d=await c.json();d.success?t():i(d.error?.message||"Failed to delete custom role")}catch(a){i("An unexpected error occurred")}};return f?(0,b.jsx)("div",{style:{padding:"2rem"},children:(0,b.jsx)("p",{children:"Loading custom roles..."})}):(0,b.jsxs)("div",{style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",marginTop:"1rem"},children:[(0,b.jsx)("h1",{style:{fontSize:"2rem",margin:0},children:"Custom Roles"}),(0,b.jsx)("button",{onClick:()=>k(!0),style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--accent-primary)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:600},children:"Create Custom Role"})]}),h&&(0,b.jsx)("div",{style:{padding:"1rem",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"var(--error)",borderRadius:"8px",marginBottom:"1rem"},children:h}),(0,b.jsx)("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"8px",border:"1px solid var(--border-color)",overflow:"hidden"},children:0===a.length?(0,b.jsx)("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:"No custom roles found. Create your first custom role to get started."}):(0,b.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[(0,b.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontWeight:600},children:"Display Name"}),(0,b.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontWeight:600},children:"Name"}),(0,b.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontWeight:600},children:"Description"}),(0,b.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontWeight:600},children:"Users"}),(0,b.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontWeight:600},children:"Status"}),(0,b.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontWeight:600},children:"Actions"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[(0,b.jsx)("td",{style:{padding:"1rem",fontWeight:500},children:a.displayName}),(0,b.jsx)("td",{style:{padding:"1rem",color:"var(--text-secondary)",fontFamily:"monospace",fontSize:"0.875rem"},children:a.name}),(0,b.jsx)("td",{style:{padding:"1rem",color:"var(--text-secondary)"},children:a.description||"-"}),(0,b.jsx)("td",{style:{padding:"1rem",color:"var(--text-secondary)"},children:a._count?.userRoles||0}),(0,b.jsx)("td",{style:{padding:"1rem"},children:(0,b.jsx)("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:600,backgroundColor:a.isActive?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",color:a.isActive?"var(--success)":"var(--error)"},children:a.isActive?"Active":"Inactive"})}),(0,b.jsx)("td",{style:{padding:"1rem"},children:(0,b.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,b.jsx)("button",{onClick:()=>{o(a),q({name:a.name,displayName:a.displayName,description:a.description||"",isActive:a.isActive}),m(!0)},style:{padding:"0.5rem 1rem",backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem"},children:"Edit"}),(0,b.jsx)("button",{onClick:()=>w(a.id),style:{padding:"0.5rem 1rem",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"var(--error)",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem"},children:"Delete"})]})})]},a.id))})]})}),j&&(0,b.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>!r&&k(!1),children:(0,b.jsxs)("div",{style:{backgroundColor:"var(--bg-primary)",borderRadius:"8px",padding:"2rem",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto"},onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("h2",{style:{marginTop:0,marginBottom:"1.5rem"},children:"Create Custom Role"}),(0,b.jsxs)("form",{onSubmit:u,style:{display:"grid",gap:"1rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:["Name (lowercase, no spaces) ",(0,b.jsx)("span",{style:{color:"var(--error)"},children:"*"})]}),(0,b.jsx)("input",{type:"text",className:"input",value:p.name,onChange:a=>q({...p,name:a.target.value.toLowerCase().replace(/\s+/g,"-")}),placeholder:"tier-2, noc, senior-agent",required:!0,disabled:r}),(0,b.jsx)("p",{style:{marginTop:"0.25rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Internal identifier (lowercase letters, numbers, and hyphens only)"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:["Display Name ",(0,b.jsx)("span",{style:{color:"var(--error)"},children:"*"})]}),(0,b.jsx)("input",{type:"text",className:"input",value:p.displayName,onChange:a=>q({...p,displayName:a.target.value}),placeholder:"Tier 2 Support, NOC Team",required:!0,disabled:r})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Description"}),(0,b.jsx)("textarea",{className:"input",value:p.description,onChange:a=>q({...p,description:a.target.value}),rows:3,disabled:r})]}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,b.jsx)("input",{type:"checkbox",checked:p.isActive,onChange:a=>q({...p,isActive:a.target.checked}),disabled:r}),(0,b.jsx)("span",{children:"Active"})]})}),(0,b.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1rem"},children:[(0,b.jsx)("button",{type:"button",onClick:()=>k(!1),disabled:r,style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",cursor:r?"not-allowed":"pointer",fontSize:"0.875rem"},children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:r,children:r?"Creating...":"Create Role"})]})]})]})}),l&&n&&(0,b.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>!r&&m(!1),children:(0,b.jsxs)("div",{style:{backgroundColor:"var(--bg-primary)",borderRadius:"8px",padding:"2rem",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto"},onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("h2",{style:{marginTop:0,marginBottom:"1.5rem"},children:"Edit Custom Role"}),(0,b.jsxs)("form",{onSubmit:v,style:{display:"grid",gap:"1rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:["Name (lowercase, no spaces) ",(0,b.jsx)("span",{style:{color:"var(--error)"},children:"*"})]}),(0,b.jsx)("input",{type:"text",className:"input",value:p.name,onChange:a=>q({...p,name:a.target.value.toLowerCase().replace(/\s+/g,"-")}),placeholder:"tier-2, noc, senior-agent",required:!0,disabled:r})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:["Display Name ",(0,b.jsx)("span",{style:{color:"var(--error)"},children:"*"})]}),(0,b.jsx)("input",{type:"text",className:"input",value:p.displayName,onChange:a=>q({...p,displayName:a.target.value}),required:!0,disabled:r})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Description"}),(0,b.jsx)("textarea",{className:"input",value:p.description,onChange:a=>q({...p,description:a.target.value}),rows:3,disabled:r})]}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,b.jsx)("input",{type:"checkbox",checked:p.isActive,onChange:a=>q({...p,isActive:a.target.checked}),disabled:r}),(0,b.jsx)("span",{children:"Active"})]})}),(0,b.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1rem"},children:[(0,b.jsx)("button",{type:"button",onClick:()=>m(!1),disabled:r,style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",cursor:r?"not-allowed":"pointer",fontSize:"0.875rem"},children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:r,children:r?"Updating...":"Update Role"})]})]})]})})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=app_admin_custom-roles_page_tsx_64ade334._.js.map