{"version":3,"sources":["../../../../app/assets/%5Bid%5D/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useParams, useRouter } from 'next/navigation'\nimport Link from 'next/link'\nimport { AssetStatus } from '@prisma/client'\n\ninterface Asset {\n  id: string\n  assetNumber: string\n  name: string\n  type: string\n  status: string\n  assignedTo?: {\n    id: string\n    email: string\n    firstName?: string\n    lastName?: string\n  }\n  customAssetType?: {\n    id: string\n    name: string\n    fields: Field[]\n  }\n  customFields?: Record<string, any>\n  relationships?: Array<{\n    id: string\n    relationshipType: string\n    targetAsset: {\n      id: string\n      assetNumber: string\n      name: string\n    }\n  }>\n  relatedAssets?: Array<{\n    id: string\n    relationshipType: string\n    sourceAsset: {\n      id: string\n      assetNumber: string\n      name: string\n    }\n  }>\n}\n\ninterface Field {\n  id: string\n  fieldName: string\n  label: string\n  fieldType: string\n  required: boolean\n  defaultValue?: string\n  options?: any\n  placeholder?: string\n  order: number\n}\n\ninterface AuditLog {\n  id: string\n  eventType: string\n  description: string\n  userEmail: string\n  createdAt: string\n  metadata?: any\n  user?: {\n    firstName?: string\n    lastName?: string\n  }\n}\n\ninterface Ticket {\n  id: string\n  ticketNumber: string\n  subject: string\n  status: string\n  priority: string\n  createdAt: string\n}\n\nexport default function AssetDetailPage() {\n  const params = useParams()\n  const router = useRouter()\n  const [asset, setAsset] = useState<Asset | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [saving, setSaving] = useState(false)\n  const [users, setUsers] = useState<Array<{ id: string; email: string; firstName?: string; lastName?: string }>>([])\n  const [auditLogs, setAuditLogs] = useState<AuditLog[]>([])\n  const [tickets, setTickets] = useState<Ticket[]>([])\n  const [loadingHistory, setLoadingHistory] = useState(false)\n  \n  // Editable fields state\n  const [editingField, setEditingField] = useState<string | null>(null)\n  const [editValues, setEditValues] = useState<Record<string, any>>({})\n\n  useEffect(() => {\n    if (params.id) {\n      loadAsset(params.id as string)\n      loadUsers()\n      loadHistory(params.id as string)\n      loadTickets(params.id as string)\n    }\n  }, [params.id])\n\n  const loadAsset = async (id: string) => {\n    try {\n      setLoading(true)\n      const token = localStorage.getItem('accessToken')\n      const response = await fetch(`/api/v1/assets/${id}`, {\n        headers: token ? { Authorization: `Bearer ${token}` } : {},\n      })\n\n      const data = await response.json()\n      if (data.success) {\n        setAsset(data.data.asset)\n        // Initialize edit values\n        setEditValues({\n          assignedToId: data.data.asset.assignedTo?.id || '',\n        })\n      }\n    } catch (error) {\n      console.error('Failed to load asset:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const loadUsers = async () => {\n    try {\n      const token = localStorage.getItem('accessToken')\n      const response = await fetch(`/api/v1/admin/users?limit=1000`, {\n        headers: token ? { Authorization: `Bearer ${token}` } : {},\n      })\n\n      const data = await response.json()\n      if (data.success) {\n        const usersList = data.data?.users || data.data || []\n        setUsers(usersList)\n      }\n    } catch (err) {\n      console.error('Failed to load users:', err)\n    }\n  }\n\n  const loadHistory = async (assetId: string) => {\n    try {\n      setLoadingHistory(true)\n      const token = localStorage.getItem('accessToken')\n      const response = await fetch(`/api/v1/organizations/audit?entityType=Asset&entityId=${assetId}&limit=100`, {\n        headers: token ? { Authorization: `Bearer ${token}` } : {},\n      })\n\n      const data = await response.json()\n      if (data.logs) {\n        setAuditLogs(data.logs)\n      }\n    } catch (err) {\n      console.error('Failed to load history:', err)\n    } finally {\n      setLoadingHistory(false)\n    }\n  }\n\n  const loadTickets = async (assetId: string) => {\n    try {\n      const token = localStorage.getItem('accessToken')\n      const response = await fetch(`/api/v1/assets/${assetId}/tickets`, {\n        headers: token ? { Authorization: `Bearer ${token}` } : {},\n      })\n\n      const data = await response.json()\n      if (data.success && data.data) {\n        setTickets(data.data)\n      }\n    } catch (err) {\n      console.error('Failed to load tickets:', err)\n    }\n  }\n\n  const handleSaveField = async (field: string) => {\n    if (!asset) return\n\n    try {\n      setSaving(true)\n      const token = localStorage.getItem('accessToken')\n      \n      const updateData: any = {}\n      \n      if (field === 'assignedToId') {\n        updateData.assignedToId = editValues[field] || null\n      } else if (field === 'name') {\n        updateData.name = editValues[field]\n      } else if (field === 'status') {\n        updateData.status = editValues[field]\n      } else if (field.startsWith('customField_')) {\n        // Custom field update\n        const fieldName = field.replace('customField_', '')\n        const currentCustomFields = asset.customFields || {}\n        updateData.customFields = {\n          ...currentCustomFields,\n          [fieldName]: editValues[field],\n        }\n      }\n\n      const response = await fetch(`/api/v1/assets/${asset.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(updateData),\n      })\n\n      const data = await response.json()\n      if (data.success) {\n        await loadAsset(asset.id)\n        await loadHistory(asset.id)\n        setEditingField(null)\n      } else {\n        alert(data.error?.message || 'Failed to update asset')\n      }\n    } catch (err) {\n      alert('An unexpected error occurred')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const startEditing = (field: string, currentValue: any) => {\n    setEditingField(field)\n    setEditValues({ ...editValues, [field]: currentValue })\n  }\n\n  const cancelEditing = () => {\n    setEditingField(null)\n  }\n\n  const formatChangeDetails = (log: AuditLog): string => {\n    if (!log.metadata) return log.description\n\n    const meta = log.metadata\n    \n    // Handle assignment changes\n    if (log.eventType === 'ASSET_ASSIGNED' && (meta.oldAssigneeId || meta.newAssigneeId)) {\n      const oldUser = meta.oldAssigneeId ? users.find(u => u.id === meta.oldAssigneeId) : null\n      const newUser = meta.newAssigneeId ? users.find(u => u.id === meta.newAssigneeId) : null\n      const oldName = oldUser ? (oldUser.firstName || oldUser.lastName ? `${oldUser.firstName || ''} ${oldUser.lastName || ''}`.trim() : oldUser.email) : 'Unassigned'\n      const newName = newUser ? (newUser.firstName || newUser.lastName ? `${newUser.firstName || ''} ${newUser.lastName || ''}`.trim() : newUser.email) : 'Unassigned'\n      return `Assignment changed from \"${oldName}\" to \"${newName}\"`\n    }\n\n    // Handle general updates with changes object\n    if (meta.changes && typeof meta.changes === 'object') {\n      const changes: string[] = []\n      Object.keys(meta.changes).forEach(key => {\n        const change = meta.changes[key]\n        if (change && typeof change === 'object' && 'old' in change && 'new' in change) {\n          const oldValue = change.old === null || change.old === undefined ? 'empty' : String(change.old)\n          const newValue = change.new === null || change.new === undefined ? 'empty' : String(change.new)\n          const fieldLabel = key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase()).trim()\n          changes.push(`${fieldLabel}: \"${oldValue}\" → \"${newValue}\"`)\n        } else if (change !== undefined && change !== null) {\n          const oldValue = asset && (asset as any)[key] !== undefined ? String((asset as any)[key]) : 'empty'\n          const newValue = String(change)\n          const fieldLabel = key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase()).trim()\n          if (oldValue !== newValue) {\n            changes.push(`${fieldLabel}: \"${oldValue}\" → \"${newValue}\"`)\n          }\n        }\n      })\n      if (changes.length > 0) {\n        return changes.join(' | ')\n      }\n    }\n\n    return log.description\n  }\n\n  const renderFieldInput = (field: Field, value: any, isEditing: boolean) => {\n    if (!isEditing) {\n      return null\n    }\n\n    switch (field.fieldType) {\n      case 'textarea':\n        return (\n          <textarea\n            className=\"input\"\n            value={editValues[`customField_${field.fieldName}`] || value || ''}\n            onChange={(e) => setEditValues({ ...editValues, [`customField_${field.fieldName}`]: e.target.value })}\n            disabled={saving}\n            rows={4}\n            style={{ fontSize: '0.875rem', padding: '0.5rem' }}\n          />\n        )\n      case 'select':\n        const options = Array.isArray(field.options) ? field.options : []\n        return (\n          <select\n            className=\"input\"\n            value={editValues[`customField_${field.fieldName}`] || value || ''}\n            onChange={(e) => setEditValues({ ...editValues, [`customField_${field.fieldName}`]: e.target.value })}\n            disabled={saving}\n            style={{ fontSize: '0.875rem', padding: '0.5rem' }}\n          >\n            <option value=\"\">Select...</option>\n            {options.map((option: string, idx: number) => (\n              <option key={idx} value={option}>\n                {option}\n              </option>\n            ))}\n          </select>\n        )\n      case 'checkbox':\n        const checkboxOptions = Array.isArray(field.options) ? field.options : []\n        const currentValues = Array.isArray(editValues[`customField_${field.fieldName}`] || value) \n          ? editValues[`customField_${field.fieldName}`] || value \n          : []\n        return (\n          <div>\n            {checkboxOptions.map((option: string, idx: number) => (\n              <label key={idx} style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '0.5rem' }}>\n                <input\n                  type=\"checkbox\"\n                  checked={currentValues.includes(option)}\n                  onChange={(e) => {\n                    const updated = e.target.checked\n                      ? [...currentValues, option]\n                      : currentValues.filter((v: string) => v !== option)\n                    setEditValues({ ...editValues, [`customField_${field.fieldName}`]: updated })\n                  }}\n                  disabled={saving}\n                />\n                {option}\n              </label>\n            ))}\n          </div>\n        )\n      case 'date':\n        return (\n          <input\n            type=\"date\"\n            className=\"input\"\n            value={editValues[`customField_${field.fieldName}`] || (value ? new Date(value).toISOString().split('T')[0] : '')}\n            onChange={(e) => setEditValues({ ...editValues, [`customField_${field.fieldName}`]: e.target.value ? new Date(e.target.value).toISOString() : '' })}\n            disabled={saving}\n            style={{ fontSize: '0.875rem', padding: '0.5rem' }}\n          />\n        )\n      case 'number':\n        return (\n          <input\n            type=\"number\"\n            className=\"input\"\n            value={editValues[`customField_${field.fieldName}`] || value || ''}\n            onChange={(e) => setEditValues({ ...editValues, [`customField_${field.fieldName}`]: e.target.value })}\n            disabled={saving}\n            style={{ fontSize: '0.875rem', padding: '0.5rem' }}\n          />\n        )\n      default:\n        return (\n          <input\n            type=\"text\"\n            className=\"input\"\n            value={editValues[`customField_${field.fieldName}`] || value || ''}\n            onChange={(e) => setEditValues({ ...editValues, [`customField_${field.fieldName}`]: e.target.value })}\n            disabled={saving}\n            style={{ fontSize: '0.875rem', padding: '0.5rem' }}\n          />\n        )\n    }\n  }\n\n  const InlineField = ({ \n    label, \n    field, \n    value, \n    type = 'text',\n    options,\n    readOnly = false \n  }: { \n    label: string\n    field: string\n    value: any\n    type?: 'text' | 'select' | 'date' | 'number'\n    options?: Array<{ value: string; label: string }>\n    readOnly?: boolean\n  }) => {\n    const isEditing = editingField === field\n    const displayValue = value || (type === 'date' ? '' : 'Not set')\n\n    if (readOnly) {\n      return (\n        <div style={{ display: 'grid', gridTemplateColumns: '150px 1fr', gap: '1rem', alignItems: 'center', padding: '0.75rem 0', borderBottom: '1px solid var(--border-color)' }}>\n          <strong style={{ fontSize: '0.875rem', color: 'var(--text-secondary)' }}>{label}:</strong>\n          <span style={{ fontSize: '0.875rem' }}>{displayValue}</span>\n        </div>\n      )\n    }\n\n    return (\n      <div style={{ display: 'grid', gridTemplateColumns: '150px 1fr auto', gap: '1rem', alignItems: 'center', padding: '0.75rem 0', borderBottom: '1px solid var(--border-color)' }}>\n        <strong style={{ fontSize: '0.875rem', color: 'var(--text-secondary)' }}>{label}:</strong>\n        {isEditing ? (\n          <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\n            {type === 'select' && options ? (\n              <select\n                className=\"input\"\n                value={editValues[field] || ''}\n                onChange={(e) => setEditValues({ ...editValues, [field]: e.target.value })}\n                disabled={saving}\n                style={{ flex: 1, fontSize: '0.875rem', padding: '0.5rem' }}\n              >\n                {options.map(opt => (\n                  <option key={opt.value} value={opt.value}>{opt.label}</option>\n                ))}\n              </select>\n            ) : type === 'date' ? (\n              <input\n                type=\"date\"\n                className=\"input\"\n                value={editValues[field] ? new Date(editValues[field]).toISOString().split('T')[0] : ''}\n                onChange={(e) => setEditValues({ ...editValues, [field]: e.target.value ? new Date(e.target.value).toISOString() : null })}\n                disabled={saving}\n                style={{ flex: 1, fontSize: '0.875rem', padding: '0.5rem' }}\n              />\n            ) : type === 'number' ? (\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                className=\"input\"\n                value={editValues[field] || ''}\n                onChange={(e) => setEditValues({ ...editValues, [field]: e.target.value })}\n                disabled={saving}\n                style={{ flex: 1, fontSize: '0.875rem', padding: '0.5rem' }}\n              />\n            ) : (\n              <input\n                type=\"text\"\n                className=\"input\"\n                value={editValues[field] || ''}\n                onChange={(e) => setEditValues({ ...editValues, [field]: e.target.value })}\n                disabled={saving}\n                style={{ flex: 1, fontSize: '0.875rem', padding: '0.5rem' }}\n              />\n            )}\n            <button\n              className=\"btn btn-primary\"\n              onClick={() => handleSaveField(field)}\n              disabled={saving}\n              style={{ fontSize: '0.75rem', padding: '0.375rem 0.75rem', whiteSpace: 'nowrap' }}\n            >\n              {saving ? 'Saving...' : 'Save'}\n            </button>\n            <button\n              className=\"btn btn-secondary\"\n              onClick={cancelEditing}\n              disabled={saving}\n              style={{ fontSize: '0.75rem', padding: '0.375rem 0.75rem', whiteSpace: 'nowrap' }}\n            >\n              Cancel\n            </button>\n          </div>\n        ) : (\n          <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n            <span style={{ fontSize: '0.875rem', flex: 1 }}>{displayValue}</span>\n            <button\n              onClick={() => startEditing(field, value)}\n              style={{\n                padding: '0.25rem 0.5rem',\n                fontSize: '0.75rem',\n                backgroundColor: 'transparent',\n                border: '1px solid var(--border-color)',\n                borderRadius: '4px',\n                color: 'var(--accent-primary)',\n                cursor: 'pointer',\n              }}\n            >\n              Edit\n            </button>\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  if (loading) {\n    return <div style={{ padding: '2rem' }}>Loading asset...</div>\n  }\n\n  if (!asset) {\n    return (\n      <div style={{ padding: '2rem' }}>\n        <p>Asset not found</p>\n        <Link href=\"/assets\">Back to Assets</Link>\n      </div>\n    )\n  }\n\n  const customFields = asset.customFields || {}\n  const assetTypeFields = asset.customAssetType?.fields || []\n\n  return (\n    <div style={{ padding: '2rem', maxWidth: '1400px', margin: '0 auto' }}>\n      <div style={{ marginBottom: '2rem', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n        <Link href=\"/assets\" style={{ color: 'var(--accent-primary)', textDecoration: 'none', fontSize: '0.875rem' }}>\n          ← Back to Assets\n        </Link>\n        <div style={{ fontSize: '0.875rem', color: 'var(--text-secondary)' }}>\n          Asset Number: <strong>{asset.assetNumber}</strong>\n        </div>\n      </div>\n\n      <h1 style={{ marginBottom: '2rem', fontSize: '2rem', fontWeight: 'bold' }}>{asset.name}</h1>\n\n      {/* Default Fields */}\n      <div\n        style={{\n          padding: '1.5rem',\n          border: '1px solid var(--border-color)',\n          borderRadius: '8px',\n          backgroundColor: 'var(--bg-secondary)',\n          marginBottom: '2rem',\n        }}\n      >\n        <h2 style={{ marginTop: 0, marginBottom: '1.5rem', fontSize: '1.25rem', fontWeight: 600 }}>Asset Information</h2>\n        <div style={{ display: 'flex', flexDirection: 'column', gap: 0 }}>\n          <InlineField label=\"Asset Number\" field=\"assetNumber\" value={asset.assetNumber} readOnly />\n          <InlineField label=\"Name\" field=\"name\" value={asset.name} />\n          <InlineField \n            label=\"Type\" \n            field=\"type\" \n            value={asset.customAssetType?.name || asset.type || 'N/A'} \n            readOnly \n          />\n          <InlineField \n            label=\"Status\" \n            field=\"status\" \n            value={asset.status} \n            type=\"select\"\n            options={[\n              { value: 'ACTIVE', label: 'Active' },\n              { value: 'INACTIVE', label: 'Inactive' },\n              { value: 'RETIRED', label: 'Retired' },\n              { value: 'MAINTENANCE', label: 'Maintenance' },\n            ]}\n          />\n          <div style={{ display: 'grid', gridTemplateColumns: '150px 1fr auto', gap: '1rem', alignItems: 'center', padding: '0.75rem 0', borderBottom: '1px solid var(--border-color)' }}>\n            <strong style={{ fontSize: '0.875rem', color: 'var(--text-secondary)' }}>Assigned To:</strong>\n            {editingField === 'assignedToId' ? (\n              <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\n                <select\n                  className=\"input\"\n                  value={editValues.assignedToId || ''}\n                  onChange={(e) => setEditValues({ ...editValues, assignedToId: e.target.value })}\n                  disabled={saving}\n                  style={{ flex: 1, fontSize: '0.875rem', padding: '0.5rem' }}\n                >\n                  <option value=\"\">Unassigned</option>\n                  {users\n                    .filter((user: any) => user.role === 'END_USER' || user.roles?.includes('END_USER'))\n                    .map((user) => (\n                      <option key={user.id} value={user.id}>\n                        {user.firstName || user.lastName\n                          ? `${user.firstName || ''} ${user.lastName || ''}`.trim()\n                          : user.email}\n                      </option>\n                    ))}\n                </select>\n                <button\n                  className=\"btn btn-primary\"\n                  onClick={() => handleSaveField('assignedToId')}\n                  disabled={saving}\n                  style={{ fontSize: '0.75rem', padding: '0.375rem 0.75rem', whiteSpace: 'nowrap' }}\n                >\n                  {saving ? 'Saving...' : 'Save'}\n                </button>\n                <button\n                  className=\"btn btn-secondary\"\n                  onClick={cancelEditing}\n                  disabled={saving}\n                  style={{ fontSize: '0.75rem', padding: '0.375rem 0.75rem', whiteSpace: 'nowrap' }}\n                >\n                  Cancel\n                </button>\n              </div>\n            ) : (\n              <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n                <span style={{ fontSize: '0.875rem', flex: 1 }}>\n                  {asset.assignedTo\n                    ? `${asset.assignedTo.firstName || ''} ${asset.assignedTo.lastName || ''}`.trim() || asset.assignedTo.email\n                    : 'Unassigned'}\n                </span>\n                <button\n                  onClick={() => startEditing('assignedToId', asset.assignedTo?.id || '')}\n                  style={{\n                    padding: '0.25rem 0.5rem',\n                    fontSize: '0.75rem',\n                    backgroundColor: 'transparent',\n                    border: '1px solid var(--border-color)',\n                    borderRadius: '4px',\n                    color: 'var(--accent-primary)',\n                    cursor: 'pointer',\n                  }}\n                >\n                  Edit\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Asset Type Fields */}\n      {assetTypeFields.length > 0 && (\n        <div\n          style={{\n            padding: '1.5rem',\n            border: '1px solid var(--border-color)',\n            borderRadius: '8px',\n            backgroundColor: 'var(--bg-secondary)',\n            marginBottom: '2rem',\n          }}\n        >\n          <h2 style={{ marginTop: 0, marginBottom: '1.5rem', fontSize: '1.25rem', fontWeight: 600 }}>\n            {asset.customAssetType?.name} Fields\n          </h2>\n          <div style={{ display: 'flex', flexDirection: 'column', gap: 0 }}>\n            {assetTypeFields\n              .sort((a, b) => a.order - b.order)\n              .map((field) => {\n                const fieldKey = `customField_${field.fieldName}`\n                const isEditing = editingField === fieldKey\n                const value = customFields[field.fieldName]\n\n                return (\n                  <div key={field.id} style={{ padding: '0.75rem 0', borderBottom: '1px solid var(--border-color)' }}>\n                    <div style={{ display: 'grid', gridTemplateColumns: '150px 1fr auto', gap: '1rem', alignItems: 'center' }}>\n                      <strong style={{ fontSize: '0.875rem', color: 'var(--text-secondary)' }}>\n                        {field.label}\n                        {field.required && <span style={{ color: 'var(--error)' }}> *</span>}\n                      </strong>\n                      {isEditing ? (\n                        <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\n                          <div style={{ flex: 1 }}>\n                            {renderFieldInput(field, value, true)}\n                          </div>\n                          <button\n                            className=\"btn btn-primary\"\n                            onClick={() => handleSaveField(fieldKey)}\n                            disabled={saving}\n                            style={{ fontSize: '0.75rem', padding: '0.375rem 0.75rem', whiteSpace: 'nowrap' }}\n                          >\n                            {saving ? 'Saving...' : 'Save'}\n                          </button>\n                          <button\n                            className=\"btn btn-secondary\"\n                            onClick={cancelEditing}\n                            disabled={saving}\n                            style={{ fontSize: '0.75rem', padding: '0.375rem 0.75rem', whiteSpace: 'nowrap' }}\n                          >\n                            Cancel\n                          </button>\n                        </div>\n                      ) : (\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n                          <span style={{ fontSize: '0.875rem', flex: 1 }}>\n                            {field.fieldType === 'checkbox' && Array.isArray(value)\n                              ? value.join(', ')\n                              : field.fieldType === 'date' && value\n                              ? new Date(value).toLocaleDateString()\n                              : value || 'Not set'}\n                          </span>\n                          <button\n                            onClick={() => startEditing(fieldKey, value)}\n                            style={{\n                              padding: '0.25rem 0.5rem',\n                              fontSize: '0.75rem',\n                              backgroundColor: 'transparent',\n                              border: '1px solid var(--border-color)',\n                              borderRadius: '4px',\n                              color: 'var(--accent-primary)',\n                              cursor: 'pointer',\n                            }}\n                          >\n                            Edit\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )\n              })}\n          </div>\n        </div>\n      )}\n\n      {/* Relationships */}\n      {(asset.relationships && asset.relationships.length > 0) ||\n      (asset.relatedAssets && asset.relatedAssets.length > 0) ? (\n        <div\n          style={{\n            padding: '1.5rem',\n            border: '1px solid var(--border-color)',\n            borderRadius: '8px',\n            backgroundColor: 'var(--bg-secondary)',\n            marginBottom: '2rem',\n          }}\n        >\n          <h2 style={{ marginTop: 0, marginBottom: '1rem', fontSize: '1.25rem', fontWeight: 600 }}>Relationships</h2>\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem' }}>\n            {asset.relationships?.map((rel) => (\n              <div key={rel.id} style={{ padding: '0.75rem', backgroundColor: 'var(--bg-primary)', borderRadius: '4px' }}>\n                <strong style={{ fontSize: '0.875rem' }}>{rel.relationshipType}:</strong>{' '}\n                <Link href={`/assets/${rel.targetAsset.id}`} style={{ color: 'var(--accent-primary)', textDecoration: 'none' }}>\n                  {rel.targetAsset.assetNumber} - {rel.targetAsset.name}\n                </Link>\n              </div>\n            ))}\n            {asset.relatedAssets?.map((rel) => (\n              <div key={rel.id} style={{ padding: '0.75rem', backgroundColor: 'var(--bg-primary)', borderRadius: '4px' }}>\n                <strong style={{ fontSize: '0.875rem' }}>{rel.relationshipType}:</strong>{' '}\n                <Link href={`/assets/${rel.sourceAsset.id}`} style={{ color: 'var(--accent-primary)', textDecoration: 'none' }}>\n                  {rel.sourceAsset.assetNumber} - {rel.sourceAsset.name}\n                </Link>\n              </div>\n            ))}\n          </div>\n        </div>\n      ) : null}\n\n      {/* Related Tickets */}\n      {tickets.length > 0 && (\n        <div\n          style={{\n            padding: '1.5rem',\n            border: '1px solid var(--border-color)',\n            borderRadius: '8px',\n            backgroundColor: 'var(--bg-secondary)',\n            marginBottom: '2rem',\n          }}\n        >\n          <h2 style={{ marginTop: 0, marginBottom: '1rem', fontSize: '1.25rem', fontWeight: 600 }}>Related Tickets</h2>\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\n            {tickets.map((ticket) => (\n              <div key={ticket.id} style={{ padding: '0.75rem', border: '1px solid var(--border-color)', borderRadius: '4px', backgroundColor: 'var(--bg-primary)' }}>\n                <Link href={`/tickets/${ticket.id}`} style={{ color: 'var(--accent-primary)', textDecoration: 'none', fontWeight: 500 }}>\n                  {ticket.ticketNumber} - {ticket.subject}\n                </Link>\n                <div style={{ fontSize: '0.8125rem', color: 'var(--text-secondary)', marginTop: '0.25rem' }}>\n                  Status: {ticket.status} | Priority: {ticket.priority} | Created: {new Date(ticket.createdAt).toLocaleDateString()}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* History */}\n      <div\n        style={{\n          padding: '1.5rem',\n          border: '1px solid var(--border-color)',\n          borderRadius: '8px',\n          backgroundColor: 'var(--bg-secondary)',\n          marginBottom: '2rem',\n        }}\n      >\n        <h2 style={{ marginTop: 0, marginBottom: '1.5rem', fontSize: '1.25rem', fontWeight: 600 }}>Change History</h2>\n        {loadingHistory ? (\n          <div style={{ padding: '2rem', textAlign: 'center', color: 'var(--text-secondary)' }}>Loading history...</div>\n        ) : auditLogs.length > 0 ? (\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\n            {auditLogs.map((log) => (\n              <div key={log.id} style={{ padding: '1rem', border: '1px solid var(--border-color)', borderRadius: '6px', backgroundColor: 'var(--bg-primary)' }}>\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start', marginBottom: '0.5rem' }}>\n                  <div>\n                    <strong style={{ fontSize: '0.9375rem', color: 'var(--text-primary)' }}>\n                      {log.eventType.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())}\n                    </strong>\n                    <div style={{ fontSize: '0.8125rem', color: 'var(--text-secondary)', marginTop: '0.25rem' }}>\n                      By: {log.user?.firstName || log.user?.lastName \n                        ? `${log.user.firstName || ''} ${log.user.lastName || ''}`.trim()\n                        : log.userEmail}\n                    </div>\n                  </div>\n                  <span style={{ fontSize: '0.8125rem', color: 'var(--text-secondary)', whiteSpace: 'nowrap' }}>\n                    {new Date(log.createdAt).toLocaleString()}\n                  </span>\n                </div>\n                <div style={{ fontSize: '0.875rem', color: 'var(--text-primary)', marginTop: '0.5rem', padding: '0.75rem', backgroundColor: 'var(--bg-secondary)', borderRadius: '4px' }}>\n                  {formatChangeDetails(log)}\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div style={{ padding: '2rem', textAlign: 'center', color: 'var(--text-secondary)' }}>No history available</div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}