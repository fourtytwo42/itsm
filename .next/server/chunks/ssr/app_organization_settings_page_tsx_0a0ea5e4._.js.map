{"version":3,"sources":["../../../../app/organization/settings/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { EmailProtocol, EmailEncryption } from '@prisma/client'\n\ninterface Organization {\n  id: string\n  name: string\n  slug: string\n  logo?: string\n  description?: string\n  isActive: boolean\n}\n\nexport default function OrganizationSettingsPage() {\n  const router = useRouter()\n  const [organization, setOrganization] = useState<Organization | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [saving, setSaving] = useState(false)\n  const [error, setError] = useState('')\n  const [success, setSuccess] = useState('')\n  const [logoFile, setLogoFile] = useState<File | null>(null)\n  const [logoPreview, setLogoPreview] = useState<string | null>(null)\n  const [activeTab, setActiveTab] = useState<'details' | 'email'>('details')\n  const [emailConfig, setEmailConfig] = useState<any>(null)\n  const [savingEmail, setSavingEmail] = useState(false)\n  const [emailError, setEmailError] = useState('')\n  const [emailSuccess, setEmailSuccess] = useState('')\n  const [emailFormData, setEmailFormData] = useState<{\n    providerName: string\n    protocol: EmailProtocol\n    host: string\n    port: number\n    username: string\n    password: string\n    encryption: EmailEncryption\n    pollingIntervalMinutes: number\n  }>({\n    providerName: '',\n    protocol: EmailProtocol.SMTP,\n    host: '',\n    port: 587,\n    username: '',\n    password: '',\n    encryption: EmailEncryption.TLS,\n    pollingIntervalMinutes: 5,\n  })\n\n  useEffect(() => {\n    fetchOrganization()\n    if (activeTab === 'email') {\n      fetchEmailConfig()\n    }\n  }, [activeTab])\n\n  const fetchOrganization = async () => {\n    try {\n      const token = localStorage.getItem('accessToken')\n      const response = await fetch('/api/v1/organizations/me', {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch organization')\n      }\n\n      const data = await response.json()\n      setOrganization(data.organization)\n      if (data.organization?.logo) {\n        setLogoPreview(data.organization.logo)\n      }\n    } catch (err: any) {\n      setError(err.message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const fetchEmailConfig = async () => {\n    try {\n      const token = localStorage.getItem('accessToken')\n      const response = await fetch('/api/v1/organizations/email-config', {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n\n      if (!response.ok) {\n        if (response.status === 404) {\n          // No email config exists yet, that's fine\n          setEmailConfig(null)\n          return\n        }\n        throw new Error('Failed to fetch email configuration')\n      }\n\n      const data = await response.json()\n      if (data.success && data.data) {\n        setEmailConfig(data.data)\n        setEmailFormData({\n          providerName: data.data.providerName || '',\n          protocol: data.data.protocol,\n          host: data.data.host || '',\n          port: data.data.port || 587,\n          username: data.data.username || '',\n          password: '', // Don't populate password\n          encryption: data.data.encryption || EmailEncryption.TLS,\n          pollingIntervalMinutes: data.data.pollingIntervalMinutes || 5,\n        })\n      } else {\n        setEmailConfig(null)\n      }\n    } catch (err: any) {\n      console.error('Error fetching email config:', err)\n      setEmailConfig(null)\n    }\n  }\n\n  const handleEmailSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setSavingEmail(true)\n    setEmailError('')\n    setEmailSuccess('')\n\n    try {\n      const token = localStorage.getItem('accessToken')\n      const response = await fetch('/api/v1/organizations/email-config', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(emailFormData),\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error?.message || 'Failed to save email configuration')\n      }\n\n      setEmailSuccess('Email configuration saved successfully')\n      setEmailConfig(data.data)\n    } catch (err: any) {\n      setEmailError(err.message)\n    } finally {\n      setSavingEmail(false)\n    }\n  }\n\n  const handleLogoChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (file) {\n      setLogoFile(file)\n      const reader = new FileReader()\n      reader.onloadend = () => {\n        setLogoPreview(reader.result as string)\n      }\n      reader.readAsDataURL(file)\n    }\n  }\n\n  const handleUploadLogo = async () => {\n    if (!logoFile || !organization) return\n\n    setSaving(true)\n    setError('')\n    setSuccess('')\n\n    try {\n      const token = localStorage.getItem('accessToken')\n      const formData = new FormData()\n      formData.append('file', logoFile)\n      formData.append('organizationId', organization.id)\n\n      const response = await fetch('/api/v1/organizations/upload-logo', {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n        body: formData,\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to upload logo')\n      }\n\n      setSuccess('Logo uploaded successfully')\n      setLogoFile(null)\n      if (data.logoUrl) {\n        setLogoPreview(data.logoUrl)\n        setOrganization({ ...organization, logo: data.logoUrl })\n      }\n    } catch (err: any) {\n      setError(err.message)\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!organization) return\n\n    setSaving(true)\n    setError('')\n    setSuccess('')\n\n    try {\n      const token = localStorage.getItem('accessToken')\n      const response = await fetch('/api/v1/organizations/me', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          name: organization.name,\n          description: organization.description,\n        }),\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to update organization')\n      }\n\n      setSuccess('Organization updated successfully')\n      setOrganization(data.organization || data)\n    } catch (err: any) {\n      setError(err.message)\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  if (loading) {\n    return <div>Loading organization settings...</div>\n  }\n\n  if (!organization) {\n    return <div>Organization not found</div>\n  }\n\n  return (\n    <div style={{ padding: '2rem', maxWidth: '1000px', margin: '0 auto' }}>\n      <h1 style={{ marginBottom: '2rem' }}>Organization Settings</h1>\n\n      {/* Tabs */}\n      <div style={{ display: 'flex', gap: '1rem', borderBottom: '1px solid var(--border-color)', marginBottom: '2rem' }}>\n        <button\n          onClick={() => setActiveTab('details')}\n          style={{\n            padding: '0.75rem 1.5rem',\n            border: 'none',\n            background: 'none',\n            borderBottom: activeTab === 'details' ? '2px solid var(--accent-primary)' : '2px solid transparent',\n            cursor: 'pointer',\n            color: activeTab === 'details' ? 'var(--accent-primary)' : 'var(--text-secondary)',\n            fontWeight: activeTab === 'details' ? 600 : 400,\n          }}\n        >\n          Details\n        </button>\n        <button\n          onClick={() => setActiveTab('email')}\n          style={{\n            padding: '0.75rem 1.5rem',\n            border: 'none',\n            background: 'none',\n            borderBottom: activeTab === 'email' ? '2px solid var(--accent-primary)' : '2px solid transparent',\n            cursor: 'pointer',\n            color: activeTab === 'email' ? 'var(--accent-primary)' : 'var(--text-secondary)',\n            fontWeight: activeTab === 'email' ? 600 : 400,\n          }}\n        >\n          Email (SMTP)\n        </button>\n      </div>\n\n      {error && (\n        <div\n          style={{\n            padding: '0.75rem',\n            backgroundColor: 'rgba(239, 68, 68, 0.1)',\n            border: '1px solid var(--error)',\n            borderRadius: '0.5rem',\n            marginBottom: '1rem',\n            color: 'var(--error)',\n          }}\n        >\n          {error}\n        </div>\n      )}\n\n      {success && (\n        <div\n          style={{\n            padding: '0.75rem',\n            backgroundColor: 'rgba(34, 197, 94, 0.1)',\n            border: '1px solid var(--success)',\n            borderRadius: '0.5rem',\n            marginBottom: '1rem',\n            color: 'var(--success)',\n          }}\n        >\n          {success}\n        </div>\n      )}\n\n      {activeTab === 'details' && (\n        <>\n          <div className=\"card\" style={{ padding: '2rem', marginBottom: '2rem' }}>\n            <h2 style={{ marginBottom: '1.5rem' }}>Logo</h2>\n        <div style={{ display: 'flex', gap: '1.5rem', alignItems: 'flex-start' }}>\n          {logoPreview && (\n            <img\n              src={logoPreview}\n              alt=\"Organization logo\"\n              style={{ width: '120px', height: '120px', objectFit: 'contain', borderRadius: '0.5rem', border: '1px solid var(--border)' }}\n            />\n          )}\n          <div style={{ flex: 1 }}>\n            <input\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={handleLogoChange}\n              style={{ marginBottom: '1rem' }}\n              disabled={saving}\n            />\n            {logoFile && (\n              <button\n                type=\"button\"\n                className=\"btn btn-primary\"\n                onClick={handleUploadLogo}\n                disabled={saving}\n              >\n                {saving ? 'Uploading...' : 'Upload Logo'}\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"card\" style={{ padding: '2rem' }}>\n        <h2 style={{ marginBottom: '1.5rem' }}>Organization Details</h2>\n        <form onSubmit={handleSubmit}>\n          <div style={{ marginBottom: '1rem' }}>\n            <label className=\"label\" htmlFor=\"name\">\n              Organization Name\n            </label>\n            <input\n              id=\"name\"\n              type=\"text\"\n              className=\"input\"\n              value={organization.name}\n              onChange={(e) => setOrganization({ ...organization, name: e.target.value })}\n              required\n              disabled={saving}\n            />\n          </div>\n\n          <div style={{ marginBottom: '1rem' }}>\n            <label className=\"label\" htmlFor=\"slug\">\n              Slug\n            </label>\n            <input\n              id=\"slug\"\n              type=\"text\"\n              className=\"input\"\n              value={organization.slug}\n              disabled\n              style={{ backgroundColor: 'var(--bg-secondary)', color: 'var(--text-secondary)' }}\n            />\n            <p style={{ fontSize: '0.875rem', color: 'var(--text-secondary)', marginTop: '0.25rem' }}>\n              Slug cannot be changed after creation\n            </p>\n          </div>\n\n          <div style={{ marginBottom: '1.5rem' }}>\n            <label className=\"label\" htmlFor=\"description\">\n              Description\n            </label>\n            <textarea\n              id=\"description\"\n              className=\"input\"\n              value={organization.description || ''}\n              onChange={(e) => setOrganization({ ...organization, description: e.target.value })}\n              rows={4}\n              disabled={saving}\n            />\n          </div>\n\n          <button type=\"submit\" className=\"btn btn-primary\" disabled={saving}>\n            {saving ? 'Saving...' : 'Save Changes'}\n          </button>\n        </form>\n      </div>\n        </>\n      )}\n\n      {activeTab === 'email' && (\n        <div className=\"card\" style={{ padding: '2rem' }}>\n          <h2 style={{ marginBottom: '1.5rem' }}>SMTP Email Configuration</h2>\n\n          {emailError && (\n            <div\n              style={{\n                padding: '0.75rem',\n                backgroundColor: 'rgba(239, 68, 68, 0.1)',\n                border: '1px solid var(--error)',\n                borderRadius: '0.5rem',\n                marginBottom: '1rem',\n                color: 'var(--error)',\n              }}\n            >\n              {emailError}\n            </div>\n          )}\n\n          {emailSuccess && (\n            <div\n              style={{\n                padding: '0.75rem',\n                backgroundColor: 'rgba(34, 197, 94, 0.1)',\n                border: '1px solid var(--success)',\n                borderRadius: '0.5rem',\n                marginBottom: '1rem',\n                color: 'var(--success)',\n              }}\n            >\n              {emailSuccess}\n            </div>\n          )}\n\n          <form onSubmit={handleEmailSubmit}>\n            <div style={{ marginBottom: '1rem' }}>\n              <label className=\"label\" htmlFor=\"providerName\">\n                Provider Name (Optional)\n              </label>\n              <input\n                id=\"providerName\"\n                type=\"text\"\n                className=\"input\"\n                value={emailFormData.providerName}\n                onChange={(e) => setEmailFormData({ ...emailFormData, providerName: e.target.value })}\n                placeholder=\"e.g., Gmail, SendGrid, AWS SES\"\n                disabled={savingEmail}\n              />\n            </div>\n\n            <div style={{ marginBottom: '1rem' }}>\n              <label className=\"label\" htmlFor=\"protocol\">\n                Protocol *\n              </label>\n              <select\n                id=\"protocol\"\n                className=\"input\"\n                value={emailFormData.protocol}\n                onChange={(e) => setEmailFormData({ ...emailFormData, protocol: e.target.value as EmailProtocol })}\n                required\n                disabled={savingEmail}\n              >\n                <option value={EmailProtocol.SMTP}>SMTP</option>\n                <option value={EmailProtocol.IMAP}>IMAP</option>\n                <option value={EmailProtocol.POP3}>POP3</option>\n              </select>\n            </div>\n\n            <div style={{ marginBottom: '1rem' }}>\n              <label className=\"label\" htmlFor=\"host\">\n                SMTP Host *\n              </label>\n              <input\n                id=\"host\"\n                type=\"text\"\n                className=\"input\"\n                value={emailFormData.host}\n                onChange={(e) => setEmailFormData({ ...emailFormData, host: e.target.value })}\n                placeholder=\"e.g., smtp.gmail.com, smtp.sendgrid.net\"\n                required\n                disabled={savingEmail}\n              />\n            </div>\n\n            <div style={{ marginBottom: '1rem' }}>\n              <label className=\"label\" htmlFor=\"port\">\n                Port *\n              </label>\n              <input\n                id=\"port\"\n                type=\"number\"\n                className=\"input\"\n                value={emailFormData.port}\n                onChange={(e) => setEmailFormData({ ...emailFormData, port: parseInt(e.target.value) || 587 })}\n                min=\"1\"\n                max=\"65535\"\n                required\n                disabled={savingEmail}\n              />\n              <small style={{ color: 'var(--text-secondary)', fontSize: '0.875rem', marginTop: '0.25rem', display: 'block' }}>\n                Common ports: 587 (TLS), 465 (SSL), 25 (unencrypted)\n              </small>\n            </div>\n\n            <div style={{ marginBottom: '1rem' }}>\n              <label className=\"label\" htmlFor=\"username\">\n                Username / Email *\n              </label>\n              <input\n                id=\"username\"\n                type=\"text\"\n                className=\"input\"\n                value={emailFormData.username}\n                onChange={(e) => setEmailFormData({ ...emailFormData, username: e.target.value })}\n                placeholder=\"your-email@example.com\"\n                required\n                disabled={savingEmail}\n              />\n            </div>\n\n            <div style={{ marginBottom: '1rem' }}>\n              <label className=\"label\" htmlFor=\"password\">\n                Password *\n              </label>\n              <input\n                id=\"password\"\n                type=\"password\"\n                className=\"input\"\n                value={emailFormData.password}\n                onChange={(e) => setEmailFormData({ ...emailFormData, password: e.target.value })}\n                placeholder={emailConfig ? 'Leave blank to keep current password' : 'Enter SMTP password'}\n                required={!emailConfig}\n                disabled={savingEmail}\n              />\n              {emailConfig && (\n                <small style={{ color: 'var(--text-secondary)', fontSize: '0.875rem', marginTop: '0.25rem', display: 'block' }}>\n                  Leave blank to keep the current password\n                </small>\n              )}\n            </div>\n\n            <div style={{ marginBottom: '1rem' }}>\n              <label className=\"label\" htmlFor=\"encryption\">\n                Encryption *\n              </label>\n              <select\n                id=\"encryption\"\n                className=\"input\"\n                value={emailFormData.encryption}\n                onChange={(e) => setEmailFormData({ ...emailFormData, encryption: e.target.value as EmailEncryption })}\n                required\n                disabled={savingEmail}\n              >\n                <option value={EmailEncryption.NONE}>None</option>\n                <option value={EmailEncryption.SSL}>SSL</option>\n                <option value={EmailEncryption.TLS}>TLS</option>\n              </select>\n              <small style={{ color: 'var(--text-secondary)', fontSize: '0.875rem', marginTop: '0.25rem', display: 'block' }}>\n                Recommended: TLS (port 587) or SSL (port 465)\n              </small>\n            </div>\n\n            <div style={{ marginBottom: '1.5rem' }}>\n              <label className=\"label\" htmlFor=\"pollingIntervalMinutes\">\n                Polling Interval (Minutes)\n              </label>\n              <input\n                id=\"pollingIntervalMinutes\"\n                type=\"number\"\n                className=\"input\"\n                value={emailFormData.pollingIntervalMinutes}\n                onChange={(e) => setEmailFormData({ ...emailFormData, pollingIntervalMinutes: parseInt(e.target.value) || 5 })}\n                min=\"1\"\n                max=\"60\"\n                disabled={savingEmail}\n              />\n              <small style={{ color: 'var(--text-secondary)', fontSize: '0.875rem', marginTop: '0.25rem', display: 'block' }}>\n                How often to check for new emails (for IMAP/POP3)\n              </small>\n            </div>\n\n            <button type=\"submit\" className=\"btn btn-primary\" disabled={savingEmail}>\n              {savingEmail ? 'Saving...' : emailConfig ? 'Update Configuration' : 'Save Configuration'}\n            </button>\n          </form>\n        </div>\n      )}\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}