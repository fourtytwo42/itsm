module.exports=[11950,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(){let a=(0,d.useSearchParams)().get("organizationId"),[e,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(1),[m,n]=(0,c.useState)(1),[o,p]=(0,c.useState)({eventType:"",entityType:"",startDate:"",endDate:""});(0,c.useEffect)(()=>{q()},[k,o,a]);let q=async()=>{try{let b=localStorage.getItem("accessToken"),c=new URLSearchParams({page:k.toString(),limit:"50"});a&&c.append("organizationId",a),o.eventType&&c.append("eventType",o.eventType),o.entityType&&c.append("entityType",o.entityType),o.startDate&&c.append("startDate",o.startDate),o.endDate&&c.append("endDate",o.endDate);let d=await fetch(`/api/v1/organizations/audit?${c.toString()}`,{headers:{Authorization:`Bearer ${b}`}});if(!d.ok)throw Error("Failed to fetch audit logs");let e=await d.json();f(e.logs),n(e.pagination.totalPages)}catch(a){j(a.message)}finally{h(!1)}},r=(a,b)=>{p({...o,[a]:b}),l(1)};return g?(0,b.jsx)("div",{children:"Loading audit logs..."}):(0,b.jsxs)("div",{style:{padding:"2rem"},children:[(0,b.jsx)("h1",{style:{marginBottom:"2rem"},children:"Audit Logs"}),i&&(0,b.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--error)",borderRadius:"0.5rem",marginBottom:"1rem",color:"var(--error)"},children:i}),(0,b.jsxs)("div",{className:"card",style:{padding:"1.5rem",marginBottom:"1.5rem"},children:[(0,b.jsx)("h3",{style:{marginBottom:"1rem"},children:"Filters"}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",htmlFor:"eventType",children:"Event Type"}),(0,b.jsx)("input",{id:"eventType",type:"text",className:"input",value:o.eventType,onChange:a=>r("eventType",a.target.value),placeholder:"e.g., USER_CREATED"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",htmlFor:"entityType",children:"Entity Type"}),(0,b.jsx)("input",{id:"entityType",type:"text",className:"input",value:o.entityType,onChange:a=>r("entityType",a.target.value),placeholder:"e.g., User, Ticket"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",htmlFor:"startDate",children:"Start Date"}),(0,b.jsx)("input",{id:"startDate",type:"date",className:"input",value:o.startDate,onChange:a=>r("startDate",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",htmlFor:"endDate",children:"End Date"}),(0,b.jsx)("input",{id:"endDate",type:"date",className:"input",value:o.endDate,onChange:a=>r("endDate",a.target.value)})]})]})]}),(0,b.jsxs)("div",{className:"card",style:{padding:"1.5rem"},children:[(0,b.jsx)("div",{style:{overflowX:"auto"},children:(0,b.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{style:{borderBottom:"1px solid var(--border)"},children:[(0,b.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Date"}),(0,b.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Event"}),(0,b.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Entity"}),(0,b.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"User"}),(0,b.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Description"}),(0,b.jsx)("th",{style:{padding:"0.75rem",textAlign:"left"},children:"IP Address"})]})}),(0,b.jsx)("tbody",{children:e.map(a=>(0,b.jsxs)("tr",{style:{borderBottom:"1px solid var(--border)"},children:[(0,b.jsx)("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:new Date(a.createdAt).toLocaleString()}),(0,b.jsx)("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:(0,b.jsx)("code",{style:{fontSize:"0.75rem"},children:a.eventType})}),(0,b.jsxs)("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:[a.entityType,a.entityId&&(0,b.jsxs)("span",{style:{color:"var(--text-secondary)",marginLeft:"0.5rem"},children:["(",a.entityId.slice(0,8),"...)"]})]}),(0,b.jsxs)("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:[a.user.firstName," ",a.user.lastName,(0,b.jsx)("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:a.userEmail})]}),(0,b.jsx)("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:a.description}),(0,b.jsx)("td",{style:{padding:"0.75rem",fontSize:"0.875rem",fontFamily:"monospace"},children:a.ipAddress||"-"})]},a.id))})]})}),0===e.length&&(0,b.jsx)("div",{style:{textAlign:"center",padding:"3rem",color:"var(--text-secondary)"},children:"No audit logs found"}),m>1&&(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem",marginTop:"1.5rem"},children:[(0,b.jsx)("button",{className:"btn",onClick:()=>l(a=>Math.max(1,a-1)),disabled:1===k,children:"Previous"}),(0,b.jsxs)("span",{style:{display:"flex",alignItems:"center",padding:"0 1rem"},children:["Page ",k," of ",m]}),(0,b.jsx)("button",{className:"btn",onClick:()=>l(a=>Math.min(m,a+1)),disabled:k===m,children:"Next"})]})]})]})}function f(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{children:"Loading audit logs..."}),children:(0,b.jsx)(e,{})})}a.s(["default",()=>f])}];

//# sourceMappingURL=app_organization_audit_page_tsx_7e6499e9._.js.map