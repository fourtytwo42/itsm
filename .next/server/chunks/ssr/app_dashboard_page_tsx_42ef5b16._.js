module.exports=[20731,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246);function e(){let[a,e]=(0,c.useState)(null),[f,g]=(0,c.useState)(null),[h,i]=(0,c.useState)(!0);(0,c.useEffect)(()=>{j()},[]);let j=async()=>{try{i(!0);let a=localStorage.getItem("accessToken"),[b,c]=await Promise.all([fetch("/api/v1/analytics/metrics",{headers:a?{Authorization:`Bearer ${a}`}:{}}),fetch("/api/v1/analytics/mttr",{headers:a?{Authorization:`Bearer ${a}`}:{}})]),d=await b.json(),f=await c.json();d.success&&e(d.data.metrics),f.success&&g(f.data.mttr)}catch(a){console.error("Failed to load dashboard data:",a)}finally{i(!1)}},k=async a=>{try{let b=localStorage.getItem("accessToken"),c=await fetch(`/api/v1/analytics/export?type=${a}&format=csv`,{headers:b?{Authorization:`Bearer ${b}`}:{}}),d=await c.blob(),e=window.URL.createObjectURL(d),f=document.createElement("a");f.href=e,f.download=`${a}-report-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(f),f.click(),window.URL.revokeObjectURL(e),document.body.removeChild(f)}catch(a){console.error("Failed to export report:",a)}};return h?(0,b.jsx)("div",{style:{padding:"2rem"},children:"Loading dashboard..."}):(0,b.jsxs)("div",{style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,b.jsx)("h1",{style:{margin:0},children:"Dashboard"}),(0,b.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,b.jsx)("button",{onClick:()=>k("tickets"),style:{padding:"0.5rem 1rem",backgroundColor:"var(--accent-primary)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Export Tickets CSV"}),(0,b.jsx)(d.default,{href:"/reports",style:{padding:"0.5rem 1rem",backgroundColor:"var(--accent-primary)",color:"white",textDecoration:"none",borderRadius:"6px"},children:"View Reports"})]})]}),a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[(0,b.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Total Tickets"}),(0,b.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:a.totalTickets})]}),(0,b.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Open Tickets"}),(0,b.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"orange"},children:a.openTickets})]}),(0,b.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Resolved Tickets"}),(0,b.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"green"},children:a.resolvedTickets})]}),(0,b.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"SLA Compliance"}),(0,b.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:a.slaCompliance>=90?"green":a.slaCompliance>=75?"orange":"red"},children:[a.slaCompliance.toFixed(1),"%"]})]}),null!==f&&(0,b.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"MTTR (Minutes)"}),(0,b.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:f})]}),(0,b.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Avg Resolution Time"}),(0,b.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:[a.averageResolutionTime," min"]})]})]}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem",marginBottom:"2rem"},children:[(0,b.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)("h2",{style:{marginTop:0,marginBottom:"1rem"},children:"Tickets by Priority"}),(0,b.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Object.entries(a.ticketsByPriority).map(([a,c])=>(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,b.jsxs)("span",{children:[a,":"]}),(0,b.jsx)("strong",{children:c})]},a))})]}),(0,b.jsxs)("div",{style:{padding:"1.5rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[(0,b.jsx)("h2",{style:{marginTop:0,marginBottom:"1rem"},children:"Tickets by Status"}),(0,b.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Object.entries(a.ticketsByStatus).map(([a,c])=>(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,b.jsxs)("span",{children:[a,":"]}),(0,b.jsx)("strong",{children:c})]},a))})]})]})]}),(0,b.jsxs)("div",{style:{marginTop:"2rem"},children:[(0,b.jsx)("h2",{style:{marginBottom:"1rem"},children:"Quick Links"}),(0,b.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[(0,b.jsx)(d.default,{href:"/tickets",style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)"},children:"View Tickets"}),(0,b.jsx)(d.default,{href:"/assets",style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)"},children:"View Assets"}),(0,b.jsx)(d.default,{href:"/changes",style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)"},children:"View Changes"}),(0,b.jsx)(d.default,{href:"/kb",style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)"},children:"Knowledge Base"}),(0,b.jsx)(d.default,{href:"/admin/sla",style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)"},children:"SLA Management"}),(0,b.jsx)(d.default,{href:"/admin/config",style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)"},children:"Configuration"}),(0,b.jsx)(d.default,{href:"/admin/users",style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",textDecoration:"none",color:"var(--text-primary)"},children:"User Management"})]})]})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=app_dashboard_page_tsx_42ef5b16._.js.map