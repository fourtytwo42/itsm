(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,13597,e=>{"use strict";var r=e.i(18050),t=e.i(71645),i=e.i(18566);function s(){(0,i.useRouter)();let[e,s]=(0,t.useState)([]),[o,a]=(0,t.useState)(!0),[n,l]=(0,t.useState)(""),[d,c]=(0,t.useState)(!1),[m,p]=(0,t.useState)(!1),[g,h]=(0,t.useState)(null),[u,x]=(0,t.useState)({name:"",displayName:"",description:"",isActive:!0}),[y,b]=(0,t.useState)(!1);(0,t.useEffect)(()=>{v()},[]);let v=async()=>{try{a(!0);let e=localStorage.getItem("accessToken"),r=await fetch("/api/v1/admin/custom-roles",{headers:e?{Authorization:`Bearer ${e}`}:{}}),t=await r.json();t.success?s(t.data.customRoles):l(t.error?.message||"Failed to load custom roles")}catch(e){l("An unexpected error occurred")}finally{a(!1)}},j=async e=>{e.preventDefault(),b(!0),l("");try{let e=localStorage.getItem("accessToken"),r=await fetch("/api/v1/admin/custom-roles",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(u)}),t=await r.json();t.success?(c(!1),x({name:"",displayName:"",description:"",isActive:!0}),v()):l(t.error?.message||"Failed to create custom role")}catch(e){l("An unexpected error occurred")}finally{b(!1)}},f=async e=>{if(e.preventDefault(),g){b(!0),l("");try{let e=localStorage.getItem("accessToken"),r=await fetch(`/api/v1/admin/custom-roles/${g.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(u)}),t=await r.json();t.success?(p(!1),h(null),x({name:"",displayName:"",description:"",isActive:!0}),v()):l(t.error?.message||"Failed to update custom role")}catch(e){l("An unexpected error occurred")}finally{b(!1)}}},C=async e=>{if(confirm("Are you sure you want to delete this custom role? Users assigned to this role will need to be reassigned."))try{let r=localStorage.getItem("accessToken"),t=await fetch(`/api/v1/admin/custom-roles/${e}`,{method:"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}),i=await t.json();i.success?v():l(i.error?.message||"Failed to delete custom role")}catch(e){l("An unexpected error occurred")}};return o?(0,r.jsx)("div",{style:{padding:"2rem"},children:(0,r.jsx)("p",{children:"Loading custom roles..."})}):(0,r.jsxs)("div",{style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",marginTop:"1rem"},children:[(0,r.jsx)("h1",{style:{fontSize:"2rem",margin:0},children:"Custom Roles"}),(0,r.jsx)("button",{onClick:()=>c(!0),style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--accent-primary)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:600},children:"Create Custom Role"})]}),n&&(0,r.jsx)("div",{style:{padding:"1rem",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"var(--error)",borderRadius:"8px",marginBottom:"1rem"},children:n}),(0,r.jsx)("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"8px",border:"1px solid var(--border-color)",overflow:"hidden"},children:0===e.length?(0,r.jsx)("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:"No custom roles found. Create your first custom role to get started."}):(0,r.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[(0,r.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontWeight:600},children:"Display Name"}),(0,r.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontWeight:600},children:"Name"}),(0,r.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontWeight:600},children:"Description"}),(0,r.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontWeight:600},children:"Users"}),(0,r.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontWeight:600},children:"Status"}),(0,r.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontWeight:600},children:"Actions"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[(0,r.jsx)("td",{style:{padding:"1rem",fontWeight:500},children:e.displayName}),(0,r.jsx)("td",{style:{padding:"1rem",color:"var(--text-secondary)",fontFamily:"monospace",fontSize:"0.875rem"},children:e.name}),(0,r.jsx)("td",{style:{padding:"1rem",color:"var(--text-secondary)"},children:e.description||"-"}),(0,r.jsx)("td",{style:{padding:"1rem",color:"var(--text-secondary)"},children:e._count?.userRoles||0}),(0,r.jsx)("td",{style:{padding:"1rem"},children:(0,r.jsx)("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:600,backgroundColor:e.isActive?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",color:e.isActive?"var(--success)":"var(--error)"},children:e.isActive?"Active":"Inactive"})}),(0,r.jsx)("td",{style:{padding:"1rem"},children:(0,r.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,r.jsx)("button",{onClick:()=>{h(e),x({name:e.name,displayName:e.displayName,description:e.description||"",isActive:e.isActive}),p(!0)},style:{padding:"0.5rem 1rem",backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem"},children:"Edit"}),(0,r.jsx)("button",{onClick:()=>C(e.id),style:{padding:"0.5rem 1rem",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"var(--error)",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem"},children:"Delete"})]})})]},e.id))})]})}),d&&(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>!y&&c(!1),children:(0,r.jsxs)("div",{style:{backgroundColor:"var(--bg-primary)",borderRadius:"8px",padding:"2rem",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto"},onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("h2",{style:{marginTop:0,marginBottom:"1.5rem"},children:"Create Custom Role"}),(0,r.jsxs)("form",{onSubmit:j,style:{display:"grid",gap:"1rem"},children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:["Name (lowercase, no spaces) ",(0,r.jsx)("span",{style:{color:"var(--error)"},children:"*"})]}),(0,r.jsx)("input",{type:"text",className:"input",value:u.name,onChange:e=>x({...u,name:e.target.value.toLowerCase().replace(/\s+/g,"-")}),placeholder:"tier-2, noc, senior-agent",required:!0,disabled:y}),(0,r.jsx)("p",{style:{marginTop:"0.25rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Internal identifier (lowercase letters, numbers, and hyphens only)"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:["Display Name ",(0,r.jsx)("span",{style:{color:"var(--error)"},children:"*"})]}),(0,r.jsx)("input",{type:"text",className:"input",value:u.displayName,onChange:e=>x({...u,displayName:e.target.value}),placeholder:"Tier 2 Support, NOC Team",required:!0,disabled:y})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Description"}),(0,r.jsx)("textarea",{className:"input",value:u.description,onChange:e=>x({...u,description:e.target.value}),rows:3,disabled:y})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,r.jsx)("input",{type:"checkbox",checked:u.isActive,onChange:e=>x({...u,isActive:e.target.checked}),disabled:y}),(0,r.jsx)("span",{children:"Active"})]})}),(0,r.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1rem"},children:[(0,r.jsx)("button",{type:"button",onClick:()=>c(!1),disabled:y,style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",cursor:y?"not-allowed":"pointer",fontSize:"0.875rem"},children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:y,children:y?"Creating...":"Create Role"})]})]})]})}),m&&g&&(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>!y&&p(!1),children:(0,r.jsxs)("div",{style:{backgroundColor:"var(--bg-primary)",borderRadius:"8px",padding:"2rem",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto"},onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("h2",{style:{marginTop:0,marginBottom:"1.5rem"},children:"Edit Custom Role"}),(0,r.jsxs)("form",{onSubmit:f,style:{display:"grid",gap:"1rem"},children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:["Name (lowercase, no spaces) ",(0,r.jsx)("span",{style:{color:"var(--error)"},children:"*"})]}),(0,r.jsx)("input",{type:"text",className:"input",value:u.name,onChange:e=>x({...u,name:e.target.value.toLowerCase().replace(/\s+/g,"-")}),placeholder:"tier-2, noc, senior-agent",required:!0,disabled:y})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:["Display Name ",(0,r.jsx)("span",{style:{color:"var(--error)"},children:"*"})]}),(0,r.jsx)("input",{type:"text",className:"input",value:u.displayName,onChange:e=>x({...u,displayName:e.target.value}),required:!0,disabled:y})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Description"}),(0,r.jsx)("textarea",{className:"input",value:u.description,onChange:e=>x({...u,description:e.target.value}),rows:3,disabled:y})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[(0,r.jsx)("input",{type:"checkbox",checked:u.isActive,onChange:e=>x({...u,isActive:e.target.checked}),disabled:y}),(0,r.jsx)("span",{children:"Active"})]})}),(0,r.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1rem"},children:[(0,r.jsx)("button",{type:"button",onClick:()=>p(!1),disabled:y,style:{padding:"0.75rem 1.5rem",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px",cursor:y?"not-allowed":"pointer",fontSize:"0.875rem"},children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:y,children:y?"Updating...":"Update Role"})]})]})]})})]})}e.s(["default",()=>s])}]);